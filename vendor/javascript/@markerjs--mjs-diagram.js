// @markerjs/mjs-diagram@1.3.2 downloaded from https://ga.jspm.io/npm:@markerjs/mjs-diagram@1.3.2/mjs-diagram.js

import{Toolbar as e,ToolbarBlock as f,Button as B}from"@markerjs/mjs-toolbar";class s{constructor(){this._contextStrings=new Map,this.defaultColor="#000",this.defaultTextColor=this.defaultColor,this.defaultStrokeColor=this.defaultColor,this.defaultFillColor="#ccc",this.defaultBackgroundColor="#fff",this._colors=new Map,this.defaultStrokeDasharray="",this.defaultStrokeWidth="1",this.defaultFontFamily="Helvetica, Arial, sans-serif",this._fontFamily=new Map,this.defaultFontSize={value:1,units:"rem",step:.1},this._fontSizes=new Map}getContextString(e,f){const B=this._contextStrings.get(e);return void 0!==B?B.get(f):void 0}setContextString(e,f,B){let J=this._contextStrings.get(e);void 0===J&&(J=new Map,this._contextStrings.set(e,J)),J.set(f,B)}getColor(e,f){var B;const J=null===(B=this._colors.get(e))||void 0===B?void 0:B.get(f);if(void 0!==J)return J;switch(f){case"background":return this.defaultBackgroundColor;case"fill":return this.defaultFillColor;case"stroke":return this.defaultStrokeColor;case"text":return this.defaultTextColor;default:return this.defaultColor}}setContextColor(e,f,B){let J=this._colors.get(e);void 0===J&&(J=new Map,this._colors.set(e,J)),J.set(f,B)}getDashArray(e){var f;return null!==(f=this.getContextString(e,"strokeDashArray"))&&void 0!==f?f:this.defaultStrokeDasharray}setContextDashArray(e,f){this.setContextString(e,"strokeDashArray",f)}getStrokeWidth(e){var f;return null!==(f=this.getContextString(e,"strokeWidth"))&&void 0!==f?f:this.defaultStrokeWidth}setContextStrokeWidth(e,f){this.setContextString(e,"strokeWidth",f)}getFontFamily(e){const f=this._fontFamily.get(e);return null!=f?f:this.defaultFontFamily}setContextFontFamily(e,f){this._fontFamily.set(e,f)}getFontSize(e){const f=this._fontSizes.get(e);return null!=f?f:this.defaultFontSize}setContextFontSize(e,f){this._fontSizes.set(e,f)}}class n{constructor(e){this.enabled=!0,this.connectors=[],this.x=0,this.y=0,this.location=e,this.removeConnector=this.removeConnector.bind(this)}removeConnector(e){const f=this.connectors.indexOf(e);f>-1&&this.connectors.splice(f,1)}}class o{static createDefs(){return document.createElementNS("http://www.w3.org/2000/svg","defs")}static setAttributes(e,f){for(const[B,J]of f)e.setAttribute(B,J)}static createRect(e,f,B){const J=document.createElementNS("http://www.w3.org/2000/svg","rect");return J.setAttribute("width",e.toString()),J.setAttribute("height",f.toString()),B&&o.setAttributes(J,B),J}static createLine(e,f,B,J,lt){const Ct=document.createElementNS("http://www.w3.org/2000/svg","line");return Ct.setAttribute("x1",e.toString()),Ct.setAttribute("y1",f.toString()),Ct.setAttribute("x2",B.toString()),Ct.setAttribute("y2",J.toString()),lt&&o.setAttributes(Ct,lt),Ct}static createPolygon(e,f){const B=document.createElementNS("http://www.w3.org/2000/svg","polygon");return B.setAttribute("points",e),f&&o.setAttributes(B,f),B}static createCircle(e,f){const B=document.createElementNS("http://www.w3.org/2000/svg","circle");return B.setAttribute("cx",(e/2).toString()),B.setAttribute("cy",(e/2).toString()),B.setAttribute("r",e.toString()),f&&o.setAttributes(B,f),B}static createEllipse(e,f,B){const J=document.createElementNS("http://www.w3.org/2000/svg","ellipse");return J.setAttribute("cx",(e/2).toString()),J.setAttribute("cy",(f/2).toString()),J.setAttribute("rx",(e/2).toString()),J.setAttribute("ry",(f/2).toString()),B&&o.setAttributes(J,B),J}static createGroup(e){const f=document.createElementNS("http://www.w3.org/2000/svg","g");return e&&o.setAttributes(f,e),f}static createTransform(){return document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGTransform()}static createMarker(e,f,B,J,lt,Ct,vt){const St=document.createElementNS("http://www.w3.org/2000/svg","marker");return o.setAttributes(St,[["id",e],["orient",f],["markerWidth",B.toString()],["markerHeight",J.toString()],["refX",lt.toString()],["refY",Ct.toString()]]),St.appendChild(vt),St}static createText(e){const f=document.createElementNS("http://www.w3.org/2000/svg","text");return f.setAttribute("x","0"),f.setAttribute("y","0"),e&&o.setAttributes(f,e),f}static createTSpan(e,f){const B=document.createElementNS("http://www.w3.org/2000/svg","tspan");return B.textContent=e,f&&o.setAttributes(B,f),B}static createImage(e){const f=document.createElementNS("http://www.w3.org/2000/svg","image");return e&&o.setAttributes(f,e),f}static createPoint(e,f){const B=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGPoint();return B.x=e,B.y=f,B}static createPath(e,f){const B=document.createElementNS("http://www.w3.org/2000/svg","path");return B.setAttribute("d",e),f&&o.setAttributes(B,f),B}static createForeignObject(e){const f=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");return f.setAttribute("x","0"),f.setAttribute("y","0"),e&&o.setAttributes(f,e),f}static clientToLocalCoordinates(e,f,B,J=1){if(e){const lt=e.getBoundingClientRect();return{x:(f-lt.left)/J,y:(B-lt.top)/J}}return{x:f,y:B}}static createSvgFromString(e){const f=document.createElementNS("http://www.w3.org/2000/svg","svg");return f.innerHTML=e,f}}class r{constructor(e,f,B){this._defaultSize={width:120,height:70},this.left=0,this.top=0,this.width=this._defaultSize.width,this.height=this._defaultSize.height,this._visual=o.createGroup(),this._fillColor="#eeeeee",this._strokeColor="black",this._strokeWidth=1,this._strokeDasharray="",this.ports=new Map([["topleft",new n("topleft")],["topcenter",new n("topcenter")],["topright",new n("topright")],["leftcenter",new n("leftcenter")],["rightcenter",new n("rightcenter")],["bottomleft",new n("bottomleft")],["bottomcenter",new n("bottomcenter")],["bottomright",new n("bottomright")]]),this.fillEditable=!0,this.strokeEditable=!0,this._iid=e,this._container=f,this._settings=B,this.getPathD=this.getPathD.bind(this),this.getSelectorPathD=this.getSelectorPathD.bind(this),this.setStrokeColor=this.setStrokeColor.bind(this),this.setFillColor=this.setFillColor.bind(this),this.setStrokeWidth=this.setStrokeWidth.bind(this),this.setStrokeDasharray=this.setStrokeDasharray.bind(this),this.createVisual=this.createVisual.bind(this),this.createSelector=this.createSelector.bind(this),this.adjustSelector=this.adjustSelector.bind(this),this.adjustVisual=this.adjustVisual.bind(this),this._strokeColor=this.settings.getColor(this.typeName,"stroke"),this._fillColor=this.settings.getColor(this.typeName,"fill"),this.setStrokeWidth(this.settings.getStrokeWidth(this.typeName)),this._strokeDasharray=this.settings.getDashArray(this.typeName)}get typeName(){return Object.getPrototypeOf(this).constructor.typeName}static getPathD(e,f){return"M0,0"}get IId(){return this._iid}get container(){return this._container}get settings(){return this._settings}get defaultSize(){return this._defaultSize}set defaultSize(e){this._defaultSize=e,this.width=e.width,this.height=e.height}get right(){return this.left+this.width}get bottom(){return this.top+this.height}get centerX(){return this.left+this.width/2}get centerY(){return this.top+this.height/2}get visual(){return this._visual}set visual(e){this._visual=e;const f=o.createTransform();this._visual.transform.baseVal.appendItem(f)}get fillColor(){return this._fillColor}get strokeColor(){return this._strokeColor}get strokeWidth(){return this._strokeWidth}get strokeDasharray(){return this._strokeDasharray}static getThumbnailSVG(e,f){const B=document.createElementNS("http://www.w3.org/2000/svg","svg");return B.setAttribute("xmlns","http://www.w3.org/2000/svg"),B.setAttribute("width",e.toString()),B.setAttribute("height",f.toString()),B.setAttribute("viewBox","0 0 "+e.toString()+" "+f.toString()),B}static getThumbnail(e,f){const B=r.getThumbnailSVG(e,f),J=this.getPathD(e,f);if(J&&J.length>0){const e=o.createPath(J);B.appendChild(e)}return B}ownsTarget(e){return e===this.visual||e===this._frame||e===this._selectorFrame}dispose(){}scale(e,f){this.left=this.left*e,this.top=this.top*f,this.width=this.width*e,this.height=this.height*f,this.setSize()}disablePorts(...e){e&&e.length>0&&e.forEach((e=>{const f=this.ports.get(e);void 0!==f&&(f.enabled=!1)}))}getPathD(e,f){return Object.getPrototypeOf(this).constructor.getPathD(e,f)}getSelectorPathD(e,f){return this.getPathD(e,f)}createSelector(){const e=this.getSelectorPathD(this.defaultSize.width,this.defaultSize.height);e&&e.length>0&&(this._selectorFrame=o.createPath(e,[["fill","transparent"],["stroke","transparent"],["stroke-width","15px"]]),this.visual.appendChild(this._selectorFrame))}createVisual(){this.createSelector();const e=this.getPathD(this.defaultSize.width,this.defaultSize.height);e&&e.length>0&&(this._frame=o.createPath(e,[["fill",this._fillColor],["stroke",this._strokeColor],["stroke-width",this.strokeWidth.toString()],["stroke-dasharray",this.strokeDasharray]]),this.visual.appendChild(this._frame),this.addVisualToContainer(this.visual))}addVisualToContainer(e){this.container.childNodes.length>0?this.container.insertBefore(e,this.container.childNodes[0]):this.container.appendChild(e)}moveVisual(e){this.visual.style.transform=`translate(${e.x}px, ${e.y}px)`}adjustSelector(){void 0!==this._selectorFrame&&o.setAttributes(this._selectorFrame,[["d",this.getSelectorPathD(this.width,this.height)]])}adjustVisual(){void 0!==this._frame&&o.setAttributes(this._frame,[["d",this.getPathD(this.width,this.height)]])}setSize(){this.moveVisual({x:this.left,y:this.top}),this.adjustSelector(),this.adjustVisual()}setStrokeColor(e){this._strokeColor=e,void 0!==this._frame&&o.setAttributes(this._frame,[["stroke",this._strokeColor]])}setFillColor(e){this._fillColor=e,void 0!==this._frame&&o.setAttributes(this._frame,[["fill",this._fillColor]])}setStrokeWidth(e){const f="string"==typeof e?Number.parseFloat(e):e;this._strokeWidth=f,void 0!==this._frame&&o.setAttributes(this._frame,[["stroke-width",this.strokeWidth.toString()]])}setStrokeDasharray(e){this._strokeDasharray=e,void 0!==this._frame&&o.setAttributes(this._frame,[["stroke-dasharray",this.strokeDasharray]])}getPortPosition(e){const f=this.ports.get(e);return{x:this.left+((null==f?void 0:f.x)||0),y:this.top+((null==f?void 0:f.y)||0)}}positionPorts(){const e=this.width/2,f=this.height/2,B=this.height,J=this.width;this.positionPort(this.ports.get("topleft"),0,0),this.positionPort(this.ports.get("topcenter"),e,0),this.positionPort(this.ports.get("topright"),J,0),this.positionPort(this.ports.get("leftcenter"),0,f),this.positionPort(this.ports.get("rightcenter"),J,f),this.positionPort(this.ports.get("bottomleft"),0,B),this.positionPort(this.ports.get("bottomcenter"),e,B),this.positionPort(this.ports.get("bottomright"),J,B)}positionPort(e,f,B){void 0!==e&&(e.x=f,e.y=B)}getState(){return{typeName:this.typeName,iid:this.IId,notes:this.notes,left:this.left,top:this.top,width:this.width,height:this.height,fillColor:this._fillColor,strokeColor:this._strokeColor,strokeWidth:this.strokeWidth,strokeDasharray:this.strokeDasharray}}restoreState(e){this._iid=e.iid,this.notes=e.notes,this.left=e.left,this.top=e.top,void 0!==e.width&&(this.width=e.width),void 0!==e.height&&(this.height=e.height),void 0!==e.fillColor&&(this._fillColor=e.fillColor),void 0!==e.strokeColor&&(this._strokeColor=e.strokeColor),void 0!==e.strokeWidth&&(this._strokeWidth=e.strokeWidth),void 0!==e.strokeDasharray&&(this._strokeDasharray=e.strokeDasharray),this.createVisual(),this.setSize(),this.positionPorts()}}r.typeName="StencilBase";class a{constructor(e){this._text="",this.offsetX=0,this.offsetY=0,this._boundingBox=new DOMRect,this._labelBackground=o.createRect(10,10,[["fill","white"]]),this._textElement=o.createText(),this._color="transparent",this._fontFamily="",this._fontSize={value:1,units:"rem",step:.1},this.setupTextElement(),void 0!==e&&(this.text=e),this.setupTextElement=this.setupTextElement.bind(this),this.renderText=this.renderText.bind(this),this.positionText=this.positionText.bind(this),this.ownsTarget=this.ownsTarget.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.showControlBox=this.showControlBox.bind(this),this.hideControlBox=this.hideControlBox.bind(this),this.applyFontStyles=this.applyFontStyles.bind(this)}get text(){return this._text}set text(e){this._text=e,this.renderText()}get boundingBox(){return this._boundingBox}set boundingBox(e){this._boundingBox=e,this.positionText()}get labelBackground(){return this._labelBackground}get textElement(){return this._textElement}set color(e){this.textElement&&o.setAttributes(this._textElement,[["fill",e]]),this._color=e}get color(){return this._color}get fontFamily(){return this._fontFamily}set fontFamily(e){this._textElement&&(this._textElement.style.fontFamily=e),this._fontFamily=e,this.positionText()}get fontSize(){return this._fontSize}set fontSize(e){this._textElement&&(this._textElement.style.fontSize=`${e.value}${e.units}`),this._fontSize=e,this.positionText()}ownsTarget(e){if(e===this._textElement)return!0;{let f=!1;return this._textElement.childNodes.forEach((B=>{B===e&&(f=!0)})),f}}setupTextElement(){this._textElement.style.fontSize=`${this.fontSize.value}${this.fontSize.units}`,this._textElement.style.textAnchor="middle",this._labelBackground.style.stroke="#aaa",this._labelBackground.style.strokeDasharray="2 2",this._labelBackground.style.strokeWidth="1",this._labelBackground.style.strokeOpacity="0"}renderText(){if(this._textElement){for(;this._textElement.lastChild;)this._textElement.removeChild(this._textElement.lastChild);this.text.split(/\r\n|[\n\v\f\r\x85\u2028\u2029]/).forEach(((e,f)=>{this._textElement.appendChild(o.createTSpan(""===e.trim()?" ":e.trim(),[["dy",f>0?"1em":"0"]]))})),this.textElement.style.opacity="0",setTimeout((()=>{this.positionText(this)}),100)}}applyFontStyles(){this._textElement.childNodes.forEach((e=>{const f=e;f.style.fontFamily=this._textElement.style.fontFamily,f.style.fontSize=this._textElement.style.fontSize}))}get textSize(){return this._textSize}positionText(e){const f=void 0===e?this:e;f.applyFontStyles(),f._textSize=f._textElement.getBBox();const B=f.boundingBox.x+f.boundingBox.width/2+f.offsetX,J=f._textElement.childNodes.length,lt=f._textSize.height/J,Ct=J>1?-lt*(J-2)/2:lt/3,vt=f.boundingBox.y+f.boundingBox.height/2+Ct+f.offsetY;f._textElement.childNodes.forEach(((e,f)=>{const J=e;o.setAttributes(J,[["x",`${B}`],["dy",f>0?"1em":"0"]])})),o.setAttributes(f._textElement,[["x",`${B}`]]),o.setAttributes(f._textElement,[["y",`${vt}`]]),f._textSize=f._textElement.getBBox();const St=1.2;o.setAttributes(f.labelBackground,[["width",(f._textSize.width*St).toString()],["height",(f._textSize.height*St).toString()],["x",(B-f._textSize.width*St/2).toString()],["y",(f._textSize.y-St).toString()]]),f.onTextSizeChanged&&f.onTextSizeChanged(f),this.textElement.style.opacity="1"}show(){this._textElement.style.display="",this._labelBackground.style.display=""}hide(){this._textElement.style.display="none",this._labelBackground.style.display="none"}showControlBox(){this.labelBackground.style.strokeOpacity="1"}hideControlBox(){this.labelBackground.style.strokeOpacity="0"}}class h extends r{constructor(e,f,B){super(e,f,B),this._color="transparent",this._fontFamily="Helvetica, Arial, sans-serif",this._fontSize={value:1,units:"rem",step:.1},this._text=this.getDefaultText(),this.padding=2,this.textBlock=new a(this.getDefaultText()),this.setColor=this.setColor.bind(this),this.setFont=this.setFont.bind(this),this.setFontSize=this.setFontSize.bind(this),this.addTextElement=this.addTextElement.bind(this),this.setSize=this.setSize.bind(this),this.textBoundingBox=new DOMRect}get color(){return this._color}set color(e){this._color=e,this.textBlock.color=e}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily=e,this.textBlock.fontFamily=e}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize=e,this.textBlock.fontSize=e}getDefaultText(){return Object.getPrototypeOf(this).constructor.DEFAULT_TEXT}get text(){return this.textBlock.text}set text(e){this._text=e,this.textBlock.text=this._text}static getThumbnail(e,f){const B=.9*e,J=Math.min(.9*f,.4*B),lt=super.getThumbnail(B,J),Ct=Math.max(.1*J,10),vt=o.createText([["x",(B/2).toString()],["y",(J/2-Ct/2).toString()],["width",B.toString()]]);return vt.style.fontFamily="Arial, Helvetica, sans-serif",vt.style.fontSize=`${Ct}px`,vt.style.textAnchor="middle",vt.style.dominantBaseline="hanging",vt.style.strokeWidth="0px",vt.style.fill="currentColor",vt.textContent="Text",lt.appendChild(vt),lt}ownsTarget(e){return super.ownsTarget(e)||e===this.visual||this.textBlock.ownsTarget(e)}addTextElement(){this.visual.appendChild(this.textBlock.textElement)}createVisual(){super.createVisual(),this.addTextElement()}setTextBoundingBox(){this.textBoundingBox.x=this.padding,this.textBoundingBox.y=this.padding,this.textBoundingBox.width=this.width-2*this.padding,this.textBoundingBox.height=this.height-2*this.padding,this.textBlock.boundingBox=this.textBoundingBox}setSize(){super.setSize(),this.setTextBoundingBox()}setColor(e){this.color=e}setFont(e){this.fontFamily=e}setFontSize(e){this.fontSize=e}getState(){return Object.assign({color:this._color,fontFamily:this.fontFamily,fontSize:this.fontSize,padding:this.padding,text:this.text},super.getState())}restoreState(e){const f=e;void 0!==f.color&&(this.color=f.color),void 0!==f.fontFamily&&(this.fontFamily=f.fontFamily),void 0!==f.fontSize&&(this.fontSize=f.fontSize),void 0!==f.padding&&(this.padding=f.padding),void 0!==f.text&&(this.text=f.text),super.restoreState(e)}scale(e,f){super.scale(e,f),this.setSize()}}h.typeName="TextStencil",h.title="Text stencil",h.DEFAULT_TEXT="Text";class l extends h{static getPathD(e,f){return`M 0 0 \n      H ${e} \n      V ${f} \n      H 0 \n      V 0 Z`}static getThumbnail(e,f){return super.getThumbnail(e,f)}}l.typeName="RectangleTextStencil",l.title="Rectangle Text stencil";class c extends l{constructor(e,f,B){super(e,f,B),this.setColor=this.setColor.bind(this),this.setFont=this.setFont.bind(this),this.setSize=this.setSize.bind(this),this.textBoundingBox=new DOMRect,this.disablePorts("bottomleft","topleft","bottomright","topright")}static getPathD(e,f){return`M0,${f/2} a${e/2},${f/2} 0 1,0 ${e},0 a${e/2},${f/2} 0 1,0 -${e},0`}setTextBoundingBox(){super.setTextBoundingBox();const e=this.width/2*Math.sqrt(2)*1.4,f=this.height/2*Math.sqrt(2)*1.4;this.textBoundingBox.x=(this.width-e)/2+this.padding,this.textBoundingBox.y=(this.height-f)/2+this.padding,this.textBoundingBox.width=e-2*this.padding,this.textBoundingBox.height=f-2*this.padding}}c.typeName="EllipseStencil",c.title="Ellipse stencil";class d extends l{constructor(e,f,B){super(e,f,B),this.setColor=this.setColor.bind(this),this.setFont=this.setFont.bind(this),this.setSize=this.setSize.bind(this),this.textBoundingBox=new DOMRect,this.disablePorts("bottomleft","topleft","bottomright","topright")}static getPathD(e,f){return`M0,${f/2} L${e/2},0 L${e},${f/2} L${e/2},${f} Z`}setTextBoundingBox(){super.setTextBoundingBox();const e=Math.atan(0!==this.width?this.height/2/(this.width/2):1),f=Math.sqrt(Math.pow(this.width/2,2)+Math.pow(this.height/2,2)),B=Math.cos(e)*f*1.4,J=Math.sin(e)*f*1.4;this.textBoundingBox.x=(this.width-B)/2+this.padding,this.textBoundingBox.y=(this.height-J)/2+this.padding,this.textBoundingBox.width=B-2*this.padding,this.textBoundingBox.height=J-2*this.padding}}d.typeName="DiamondStencil",d.title="Diamond stencil";class g extends h{constructor(e,f,B){super(e,f,B),this.imageType="svg",this._isImageSet=!1,this.naturalWidth=24,this.naturalHeight=24,this.labelLocation="bottom",this._textBlockChangeProcessed=!1,this.createImage=this.createImage.bind(this),this.adjustImage=this.adjustImage.bind(this),this.setTextBoundingBox=this.setTextBoundingBox.bind(this),this.textSizeChanged=this.textSizeChanged.bind(this),this.setLabelLocation=this.setLabelLocation.bind(this),this.toggleLabelVisibility=this.toggleLabelVisibility.bind(this)}static getThumbnail(e,f){if(void 0===this.svgString)return super.getThumbnail(e,f);{const B=.9*e,J=Math.min(.9*f,.4*B),lt=o.createSvgFromString(this.svgString);return o.setAttributes(lt,[["viewBox","0 0 24 24"],["width",`${B}px`],["height",`${J}px`]]),lt}}get imageSrc(){return this._imageSrc}set imageSrc(e){this._imageSrc=e,this.SVGImage&&"bitmap"===this.imageType&&(void 0!==e?(this._isImageSet=!0,o.setAttributes(this.SVGImage,[["href",e]])):(this._isImageSet=!1,o.setAttributes(this.SVGImage,[["href",""]])),this.setTextBoundingBox())}textSizeChanged(){this._textBlockChangeProcessed?this._textBlockChangeProcessed=!1:(this._textBlockChangeProcessed=!0,this.setTextBoundingBox())}setTextBoundingBox(){if(this._isImageSet){switch(this.labelLocation){case"top":case"bottom":this.textBoundingBox.x=this.padding,this.textBoundingBox.width=this.width-2*this.padding,this.textBlock&&void 0!==this.textBlock.textSize&&this.textBlock.textSize.height>0?(this.textBoundingBox.y="top"===this.labelLocation?this.padding:this.height-this.padding-this.textBlock.textSize.height,this.textBoundingBox.height=this.textBlock.textSize.height):(this.textBoundingBox.y="top"===this.labelLocation?this.padding:this.height-this.padding-30,this.textBoundingBox.height=this.height-this.padding-this.textBoundingBox.y);break;case"left":case"right":this.textBoundingBox.y=this.padding,this.textBoundingBox.width=.65*(this.width-2*this.padding),this.textBoundingBox.x="left"===this.labelLocation?this.padding:this.width-this.padding-this.textBoundingBox.width,this.textBoundingBox.height=this.height-2*this.padding;break;case"hidden":this.textBoundingBox.x=0,this.textBoundingBox.y=0,this.textBoundingBox.width=0,this.textBoundingBox.height=0}this.textBlock.boundingBox=this.textBoundingBox,this.adjustImage()}else super.setTextBoundingBox()}getSelectorPathD(e,f){return`M 0 0 \n      H ${e} \n      V ${f} \n      H 0 \n      V 0`}ownsTarget(e){return super.ownsTarget(e)||e===this.SVGImage}createImage(){var e;void 0!==Object.getPrototypeOf(this).constructor.svgString?(this._isImageSet=!0,this.imageType="svg",this.SVGImage=o.createSvgFromString(Object.getPrototypeOf(this).constructor.svgString)):(this.imageType="bitmap",this._isImageSet=void 0!==this._imageSrc,this.SVGImage=o.createImage([["href",null!==(e=this._imageSrc)&&void 0!==e?e:""]]))}createVisual(){super.createVisual(),this.createImage(),void 0!==this.SVGImage&&("svg"===this.imageType&&o.setAttributes(this.SVGImage,[["viewBox",`0 0 ${this.naturalWidth} ${this.naturalHeight}`],["pointer-events","none"],["fill",this._fillColor],["stroke",this._strokeColor],["stroke-width",this.strokeWidth.toString()],["stroke-dasharray",this.strokeDasharray]]),this.adjustImage(),this.visual.appendChild(this.SVGImage)),this.textBlock.onTextSizeChanged=this.textSizeChanged}adjustImage(){if(void 0!==this.SVGImage)switch(this.toggleLabelVisibility(),this.labelLocation){case"bottom":this.SVGImage.setAttribute("x",`${this.padding}px`),this.SVGImage.setAttribute("y",`${this.padding}px`),this.SVGImage.setAttribute("width",this.width-2*this.padding+"px"),this.textBlock&&""!==this.textBlock.text?this.SVGImage.setAttribute("height",this.textBoundingBox.y-this.padding+"px"):this.SVGImage.setAttribute("height",this.height-this.padding+"px");break;case"top":this.SVGImage.setAttribute("x",`${this.padding}px`),this.SVGImage.setAttribute("y",`${this.textBoundingBox.bottom+this.padding}px`),this.SVGImage.setAttribute("width",this.width-2*this.padding+"px"),this.SVGImage.setAttribute("height",this.height-2*this.padding-this.textBoundingBox.height-this.padding+"px");break;case"left":case"right":"right"===this.labelLocation?this.SVGImage.setAttribute("x",`${this.padding}px`):this.SVGImage.setAttribute("x",`${this.padding+.65*(this.width-2*this.padding)}px`),this.SVGImage.setAttribute("y",`${this.padding}px`),this.SVGImage.setAttribute("height",this.height-2*this.padding+"px"),this.SVGImage.setAttribute("width",.35*(this.width-2*this.padding)+"px");break;case"hidden":this.SVGImage.setAttribute("x",`${this.padding}px`),this.SVGImage.setAttribute("y",`${this.padding}px`),this.SVGImage.setAttribute("width",this.width-2*this.padding+"px"),this.SVGImage.setAttribute("height",this.height-2*this.padding+"px")}}setStrokeColor(e){super.setStrokeColor(e),void 0!==this.SVGImage&&o.setAttributes(this.SVGImage,[["stroke",e]])}setFillColor(e){super.setFillColor(e),void 0!==this.SVGImage&&o.setAttributes(this.SVGImage,[["fill",e]])}setStrokeWidth(e){super.setStrokeWidth(e),void 0!==this.SVGImage&&o.setAttributes(this.SVGImage,[["stroke-width",this.strokeWidth.toString()]])}setStrokeDasharray(e){super.setStrokeDasharray(e),void 0!==this.SVGImage&&o.setAttributes(this.SVGImage,[["stroke-dasharray",this.strokeDasharray]])}setLabelLocation(e){this.labelLocation=e,this.toggleLabelVisibility(),this.setTextBoundingBox()}toggleLabelVisibility(){this.textBlock&&("hidden"===this.labelLocation?this.textBlock.textElement.style.visibility="hidden":this.textBlock.textElement.style.visibility="")}getState(){return Object.assign({imageType:this.imageType,imageSrc:this.imageSrc,labelLocation:this.labelLocation},super.getState())}restoreState(e){const f=e;void 0!==f.imageType&&(this.imageType=f.imageType),void 0!==f.imageSrc&&(this.imageSrc=f.imageSrc),void 0!==f.labelLocation&&(this.labelLocation=f.labelLocation),super.restoreState(e)}}g.typeName="ImageStencil",g.title="Image stencil",g.DEFAULT_TEXT="Image";class p extends g{constructor(e,f,B){super(e,f,B),this.defaultSize={width:50,height:80},this._fillColor="#fde047",this.strokeEditable=!1,this.setStrokeWidth(0)}}p.typeName="LightbulbIconStencil",p.title="Lightbulb",p.DEFAULT_TEXT="Idea!",p.svgString='<path d="M12,6A6,6 0 0,1 18,12C18,14.22 16.79,16.16 15,17.2V19A1,1 0 0,1 14,20H10A1,1 0 0,1 9,19V17.2C7.21,16.16 6,14.22 6,12A6,6 0 0,1 12,6M14,21V22A1,1 0 0,1 13,23H11A1,1 0 0,1 10,22V21H14M20,11H23V13H20V11M1,11H4V13H1V11M13,1V4H11V1H13M4.92,3.5L7.05,5.64L5.63,7.05L3.5,4.93L4.92,3.5M16.95,5.63L19.07,3.5L20.5,4.93L18.37,7.05L16.95,5.63Z" />';class u extends h{constructor(e,f,B){super(e,f,B),this.strokeEditable=!1,this.fillEditable=!1}}u.typeName="LabelStencil",u.title="Label",u.DEFAULT_TEXT="Label";class m extends g{constructor(e,f,B){super(e,f,B),this.setImageSrc=this.setImageSrc.bind(this)}static getPathD(e,f){return`M 0 0 \n      H ${e} \n      V ${f} \n      H 0 \n      V 0 Z`}static getThumbnail(e,f){const B=.9*e,J=Math.min(.9*f,.4*B),lt=o.createSvgFromString('<path d="M8.5,13.5L11,16.5L14.5,12L19,18H5M21,19V5C21,3.89 20.1,3 19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19Z" />');return o.setAttributes(lt,[["viewBox","0 0 24 24"],["width",`${B}px`],["height",`${J}px`]]),lt}setImageSrc(e){this.imageSrc=e}}m.typeName="CustomImageStencil",m.title="Custom image",m.DEFAULT_TEXT="Image";class C extends m{constructor(e,f,B){super(e,f,B),this.defaultSize={width:100,height:100},this._fillColor="transparent",this._strokeColor="transparent"}}C.typeName="BitmapImageStencil",C.title="Bitmap image";class v{constructor(e,f,B){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.visual=o.createGroup(),this.strokeColor="#000",this.strokeWidth=1,this.strokeDasharray="",this._labelText="",this.textBlock=new a,this.textBoundingBox=new DOMRect,this.arrowType="none",this.arrowBaseHeight=10,this.arrowBaseWidth=10,this._iid=e,this.container=f,this._settings=B,this.ownsTarget=this.ownsTarget.bind(this),this.createVisual=this.createVisual.bind(this),this.createCoreVisual=this.createCoreVisual.bind(this),this.adjustVisual=this.adjustVisual.bind(this),this.addVisualToContainer=this.addVisualToContainer.bind(this),this.adjust=this.adjust.bind(this),this.adjustPoints=this.adjustPoints.bind(this),this.setStartPosition=this.setStartPosition.bind(this),this.setEndPosition=this.setEndPosition.bind(this),this.setTextBoundingBox=this.setTextBoundingBox.bind(this),this.moveLabel=this.moveLabel.bind(this),this.getArrowPoints=this.getArrowPoints.bind(this),this.createTips=this.createTips.bind(this),this.adjustTips=this.adjustTips.bind(this),this.rotateArrows=this.rotateArrows.bind(this),this.getEnding=this.getEnding.bind(this),this.getEndings=this.getEndings.bind(this),this.setStrokeColor=this.setStrokeColor.bind(this),this.setArrowType=this.setArrowType.bind(this),this.setStrokeDasharray=this.setStrokeDasharray.bind(this),this.setStrokeWidth=this.setStrokeWidth.bind(this),this.scale=this.scale.bind(this),this.getState=this.getState.bind(this),this.restoreState=this.restoreState.bind(this)}get typeName(){return Object.getPrototypeOf(this).constructor.typeName}get IId(){return this._iid}get labelText(){return this.textBlock.text}set labelText(e){this._labelText=e,this.textBlock.text=this._labelText}static getThumbnail(e,f){const B=document.createElementNS("http://www.w3.org/2000/svg","svg");B.setAttribute("xmlns","http://www.w3.org/2000/svg"),B.setAttribute("width",e.toString()),B.setAttribute("height",f.toString()),B.setAttribute("viewBox","0 0 "+e.toString()+" "+f.toString());const J=Math.max(Math.floor(.05*e),2),lt=Math.max(Math.floor(.05*f),2),Ct=o.createLine(J,lt,e-J,f-J,[["stroke-width",Math.max(Math.round(e/20),2).toString()]]);return B.appendChild(Ct),B}get settings(){return this._settings}ownsTarget(e){return e===this.visual||e===this.selectorLine||e===this.visibleLine||this.textBlock.ownsTarget(e)}createVisual(){this.createCoreVisual(),this.createTips(),this.visual.appendChild(this.textBlock.labelBackground),this.visual.appendChild(this.textBlock.textElement),this.addVisualToContainer(this.visual)}createCoreVisual(){this.selectorLine=o.createLine(this.x1,this.y1,this.x2,this.y2,[["stroke","transparent"],["stroke-width",(this.strokeWidth+10).toString()]]),this.visibleLine=o.createLine(this.x1,this.y1,this.x2,this.y2,[["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()]]),this.visual.appendChild(this.selectorLine),this.visual.appendChild(this.visibleLine)}addVisualToContainer(e){this.container.childNodes.length>0?this.container.insertBefore(e,this.container.childNodes[0]):this.container.appendChild(e)}getArrowPoints(e,f){const B=this.arrowBaseWidth+2*this.strokeWidth,J=this.arrowBaseHeight+2*this.strokeWidth;return`${e-B/2},${f+J-this.strokeWidth/2} ${e},${f-this.strokeWidth/2} ${e+B/2},${f+J-this.strokeWidth/2}`}createTips(){this.arrow1=o.createPolygon(this.getArrowPoints(this.x1,this.y1),[["fill",this.strokeColor]]),this.arrow1.transform.baseVal.appendItem(o.createTransform()),this.visual.appendChild(this.arrow1),this.arrow2=o.createPolygon(this.getArrowPoints(this.x2,this.y2),[["fill",this.strokeColor]]),this.arrow2.transform.baseVal.appendItem(o.createTransform()),this.visual.appendChild(this.arrow2)}adjust(){this.adjustPoints(),this.adjustVisual()}adjustPoints(){if(this.startStencil&&this.startPort){const e=this.startStencil.getPortPosition(this.startPort.location);this.x1=e.x,this.y1=e.y}if(this.endStencil&&this.endPort){const e=this.endStencil.getPortPosition(this.endPort.location);this.x2=e.x,this.y2=e.y}}getEnding(e,f){return{x:e.x,y:e.y}}getEndings(){let e={x:this.x1,y:this.y1},f={x:this.x2,y:this.y2};return"both"!==this.arrowType&&"start"!==this.arrowType||(e=this.getEnding(e,this.startPort)),"both"!==this.arrowType&&"end"!==this.arrowType||(f=this.getEnding(f,this.endPort)),[e,f]}adjustVisual(){if(this.selectorLine&&this.visibleLine){const[e,f]=this.getEndings();this.selectorLine.setAttribute("x1",e.x.toString()),this.selectorLine.setAttribute("y1",e.y.toString()),this.selectorLine.setAttribute("x2",f.x.toString()),this.selectorLine.setAttribute("y2",f.y.toString()),this.visibleLine.setAttribute("x1",e.x.toString()),this.visibleLine.setAttribute("y1",e.y.toString()),this.visibleLine.setAttribute("x2",f.x.toString()),this.visibleLine.setAttribute("y2",f.y.toString()),o.setAttributes(this.visibleLine,[["stroke",this.strokeColor]]),o.setAttributes(this.visibleLine,[["stroke-width",this.strokeWidth.toString()]]),o.setAttributes(this.visibleLine,[["stroke-dasharray",this.strokeDasharray.toString()]]),this.adjustTips(),this.setTextBoundingBox(),this.moveLabel()}}adjustTips(){this.arrow1&&this.arrow2&&(this.arrow1.style.display="both"!==this.arrowType&&"start"!==this.arrowType||void 0===this.startPort?"none":"",this.arrow2.style.display="both"!==this.arrowType&&"end"!==this.arrowType||void 0===this.endPort?"none":"",o.setAttributes(this.arrow1,[["points",this.getArrowPoints(this.x1,this.y1)],["fill",this.strokeColor]]),o.setAttributes(this.arrow2,[["points",this.getArrowPoints(this.x2,this.y2)],["fill",this.strokeColor]]),this.rotateArrows())}rotateArrows(){if(Math.abs(this.x1-this.x2)>.1){const e=180*Math.atan((this.y2-this.y1)/(this.x2-this.x1))/Math.PI+90*Math.sign(this.x1-this.x2),f=this.arrow1.transform.baseVal.getItem(0);f.setRotate(e,this.x1,this.y1),this.arrow1.transform.baseVal.replaceItem(f,0);const B=this.arrow2.transform.baseVal.getItem(0);B.setRotate(e+180,this.x2,this.y2),this.arrow2.transform.baseVal.replaceItem(B,0)}}setStartPosition(e){this.x1=e.x,this.y1=e.y,this.adjustVisual()}setEndPosition(e){this.x2=e.x,this.y2=e.y,this.adjustVisual()}moveLabel(e=0,f=0){this.textBlock.offsetX+=e,this.textBlock.offsetY+=f,this.setTextBoundingBox()}setTextBoundingBox(){this.textBoundingBox.x=Math.min(this.x1,this.x2),this.textBoundingBox.y=Math.min(this.y1,this.y2),this.textBoundingBox.width=Math.max(this.x1,this.x2)-this.textBoundingBox.x,this.textBoundingBox.height=Math.max(this.y1,this.y2)-this.textBoundingBox.y,this.textBlock.boundingBox=this.textBoundingBox}setStrokeColor(e){this.strokeColor=e,this.adjustVisual()}setStrokeDasharray(e){this.strokeDasharray=e,this.adjustVisual()}setStrokeWidth(e){const f="string"==typeof e?Number.parseFloat(e):e;this.strokeWidth=f,this.adjustVisual()}setArrowType(e){this.arrowType=e,this.adjustVisual()}scale(e,f){this.x1=this.x1*e,this.y1=this.y1*f,this.x2=this.x2*e,this.y2=this.y2*f,this.adjustVisual()}getState(){var e,f,B,J;return{typeName:this.typeName,iid:this.IId,startStencilId:null===(e=this.startStencil)||void 0===e?void 0:e.IId,startPortLocation:null===(f=this.startPort)||void 0===f?void 0:f.location,endStencilId:null===(B=this.endStencil)||void 0===B?void 0:B.IId,endPortLocation:null===(J=this.endPort)||void 0===J?void 0:J.location,labelOffsetX:this.textBlock.offsetX,labelOffsetY:this.textBlock.offsetY,strokeColor:this.strokeColor,strokeWidth:this.strokeWidth,strokeDasharray:this.strokeDasharray,arrowType:this.arrowType,labelText:this.labelText}}restoreState(e,f){var B;this._iid=e.iid,void 0!==e.strokeColor&&(this.strokeColor=e.strokeColor),void 0!==e.strokeWidth&&(this.strokeWidth=e.strokeWidth),void 0!==e.strokeDasharray&&(this.strokeDasharray=e.strokeDasharray),void 0!==e.labelOffsetX&&(this.textBlock.offsetX=e.labelOffsetX),void 0!==e.labelOffsetY&&(this.textBlock.offsetY=e.labelOffsetY),this.startStencil=f.startStencil,this.startPort=f.startPort,this.endStencil=f.endStencil,this.endPort=f.endPort,void 0!==e.arrowType&&(this.arrowType=e.arrowType),this.labelText=null!==(B=e.labelText)&&void 0!==B?B:"",this.createVisual(),this.adjustPoints(),this.adjustVisual()}}v.typeName="ConnectorBase";class A extends v{constructor(e,f,B){super(e,f,B),this.andgledCorners=!0,this.getPathD=this.getPathD.bind(this)}static getThumbnail(e,f){const B=document.createElementNS("http://www.w3.org/2000/svg","svg");B.setAttribute("xmlns","http://www.w3.org/2000/svg"),B.setAttribute("width",e.toString()),B.setAttribute("height",f.toString()),B.setAttribute("viewBox","0 0 "+e.toString()+" "+f.toString());const J=Math.max(Math.floor(.05*e),2),lt=Math.max(Math.floor(.05*f),2),Ct=o.createPath(`M ${J} ${lt} C ${.75*(e-2*J)} ${lt}, ${.25*(e-2*J)} ${f-lt}, ${e-J} ${f-lt}`,[["stroke-width",Math.max(Math.round(e/20),2).toString()],["fill","transparent"]]);return B.appendChild(Ct),B}getPathD(){const[e,f]=this.getEndings(),B=f.x-e.x,J=f.y-e.y,lt=Math.max(Math.abs(B/4),50),Ct=Math.max(Math.abs(J/4),50);let vt=e.x,St=e.y,wt=f.x,zt=f.y;if(void 0!==this.startPort)switch(this.startPort.location){case"bottomcenter":St=e.y+Ct;break;case"bottomleft":vt=e.x-lt,this.andgledCorners&&(St=e.y+Ct);break;case"bottomright":vt=e.x+lt,this.andgledCorners&&(St=e.y+Ct);break;case"leftcenter":vt=e.x-lt;break;case"rightcenter":vt=e.x+lt;break;case"topcenter":St=e.y-Ct;break;case"topleft":vt=e.x-lt,this.andgledCorners&&(St=e.y-Ct);break;case"topright":vt=e.x+lt,this.andgledCorners&&(St=e.y-Ct)}if(void 0!==this.endPort)switch(this.endPort.location){case"bottomcenter":zt=f.y+Ct;break;case"bottomleft":wt=f.x-lt,this.andgledCorners&&(zt=f.y+Ct);break;case"bottomright":wt=f.x+lt,this.andgledCorners&&(zt=f.y+Ct);break;case"leftcenter":wt=f.x-lt;break;case"rightcenter":wt=f.x+lt;break;case"topcenter":zt=f.y-Ct;break;case"topleft":wt=f.x-lt,this.andgledCorners&&(zt=f.y-Ct);break;case"topright":wt=f.x+lt,this.andgledCorners&&(zt=f.y-Ct)}return`M ${e.x} ${e.y} C ${vt} ${St}, ${wt} ${zt}, ${f.x} ${f.y}`}rotateArrows(){function t(e,f=!0){let B=0;if(void 0!==e)switch(e.location){case"bottomcenter":B=0;break;case"bottomleft":B=f?45:90;break;case"bottomright":B=f?-45:270;break;case"leftcenter":B=90;break;case"rightcenter":B=270;break;case"topcenter":B=180;break;case"topleft":B=f?135:90;break;case"topright":B=f?225:270}return B}super.rotateArrows();const e=this.arrow1.transform.baseVal.getItem(0);e.setRotate(t(this.startPort,this.andgledCorners),this.x1,this.y1),this.arrow1.transform.baseVal.replaceItem(e,0);const f=this.arrow2.transform.baseVal.getItem(0);f.setRotate(t(this.endPort,this.andgledCorners),this.x2,this.y2),this.arrow2.transform.baseVal.replaceItem(f,0)}getEnding(e,f){const B={x:e.x,y:e.y},J=this.arrowBaseHeight/1.5;if(void 0!==f)switch(f.location){case"bottomcenter":B.y+=J;break;case"bottomleft":B.x-=J,B.y+=J;break;case"bottomright":B.x+=J,B.y+=J;break;case"leftcenter":B.x-=J;break;case"rightcenter":B.x+=J;break;case"topcenter":B.y-=J;break;case"topleft":B.x-=J,B.y-=J;break;case"topright":B.x+=J,B.y-=J}return B}createCoreVisual(){this.selectorLine=o.createPath(this.getPathD(),[["stroke","transparent"],["stroke-width",(this.strokeWidth+10).toString()],["fill","transparent"]]),this.visibleLine=o.createPath(this.getPathD(),[["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()],["fill","transparent"]]),this.visual.appendChild(this.selectorLine),this.visual.appendChild(this.visibleLine)}adjustVisual(){this.selectorLine&&this.visibleLine&&(this.selectorLine.setAttribute("d",this.getPathD()),this.visibleLine.setAttribute("d",this.getPathD()),o.setAttributes(this.visibleLine,[["stroke",this.strokeColor]]),o.setAttributes(this.visibleLine,[["stroke-width",this.strokeWidth.toString()]]),o.setAttributes(this.visibleLine,[["stroke-dasharray",this.strokeDasharray.toString()]]),this.adjustTips(),this.setTextBoundingBox())}}A.typeName="CurvedConnector";class b extends v{constructor(e,f,B){super(e,f,B),this.startLineDir="left",this.endLineDir="left",this.stepPoints=[],this.getPathD=this.getPathD.bind(this)}static getThumbnail(e,f){const B=document.createElementNS("http://www.w3.org/2000/svg","svg");B.setAttribute("xmlns","http://www.w3.org/2000/svg"),B.setAttribute("width",e.toString()),B.setAttribute("height",f.toString()),B.setAttribute("viewBox","0 0 "+e.toString()+" "+f.toString());const J=Math.max(Math.floor(.05*e),2),lt=Math.max(Math.floor(.05*f),2),Ct=o.createPath(`M ${J} ${lt} H ${e/2} V ${f-lt}, H ${e-J}`,[["stroke-width",Math.max(Math.round(e/20),2).toString()],["fill","transparent"]]);return B.appendChild(Ct),B}getPathD(){const[e,f]=this.getEndings(),B=10+this.strokeWidth;void 0!==this.startPort&&(this.startLineDir=a(this.startPort)),void 0!==this.endPort&&(this.endLineDir=a(this.endPort));const J=void 0!==this.startStencil?r(e,this.startLineDir):e,lt=void 0!==this.endStencil?r(f,this.endLineDir):f;this.stepPoints=[J,{x:"left"===this.startLineDir||"right"===this.startLineDir?lt.x:J.x,y:"left"===this.startLineDir||"right"===this.startLineDir?J.y:lt.y},lt];let Ct=`M ${e.x} ${e.y} `;return this.stepPoints.forEach((e=>{Ct+=`L ${e.x} ${e.y} `})),Ct+=`L ${f.x} ${f.y}`,Ct;function r(e,f){const J={x:e.x,y:e.y};switch(f){case"down":J.y+=B;break;case"up":J.y-=B;break;case"left":J.x-=B;break;case"right":J.x+=B}return J}function a(e){let f="left";switch(e.location){case"bottomcenter":case"bottomleft":case"bottomright":f="down";break;case"leftcenter":f="left";break;case"topcenter":case"topleft":case"topright":f="up";break;case"rightcenter":f="right"}return f}}rotateArrows(){function t(e){let f=0;switch(e){case"left":f=90;break;case"right":f=270;break;case"up":f=180;break;case"down":f=0}return f}super.rotateArrows();const e=this.arrow1.transform.baseVal.getItem(0);e.setRotate(t(this.startLineDir),this.x1,this.y1),this.arrow1.transform.baseVal.replaceItem(e,0);const f=this.arrow2.transform.baseVal.getItem(0);f.setRotate(t(this.endLineDir),this.x2,this.y2),this.arrow2.transform.baseVal.replaceItem(f,0)}getEnding(e,f){const B={x:e.x,y:e.y},J=this.arrowBaseHeight/1.5;if(void 0!==f)switch(f.location){case"bottomcenter":B.y+=J;break;case"bottomleft":B.x-=J,B.y+=J;break;case"bottomright":B.x+=J,B.y+=J;break;case"leftcenter":B.x-=J;break;case"rightcenter":B.x+=J;break;case"topcenter":B.y-=J;break;case"topleft":B.x-=J,B.y-=J;break;case"topright":B.x+=J,B.y-=J}return B}createCoreVisual(){this.selectorLine=o.createPath(this.getPathD(),[["stroke","transparent"],["stroke-width",(this.strokeWidth+10).toString()],["fill","transparent"]]),this.visibleLine=o.createPath(this.getPathD(),[["stroke",this.strokeColor],["stroke-width",this.strokeWidth.toString()],["fill","transparent"]]),this.visual.appendChild(this.selectorLine),this.visual.appendChild(this.visibleLine)}adjustVisual(){this.selectorLine&&this.visibleLine&&(this.selectorLine.setAttribute("d",this.getPathD()),this.visibleLine.setAttribute("d",this.getPathD()),o.setAttributes(this.visibleLine,[["stroke",this.strokeColor]]),o.setAttributes(this.visibleLine,[["stroke-width",this.strokeWidth.toString()]]),o.setAttributes(this.visibleLine,[["stroke-dasharray",this.strokeDasharray.toString()]]),this.adjustTips(),this.setTextBoundingBox())}setTextBoundingBox(){if(this.stepPoints.length>1){const[e,f]=[this.stepPoints[0],this.stepPoints[1]];e.x!=f.x?(this.textBoundingBox.x=Math.min(e.x,f.x),this.textBoundingBox.y=e.y-20,this.textBoundingBox.width=Math.abs(e.x-f.x),this.textBoundingBox.height=20):(this.textBoundingBox.x=e.x-100,this.textBoundingBox.y=Math.min(e.y,f.y)+Math.abs(e.y-f.y)/2-20,this.textBoundingBox.width=200,this.textBoundingBox.height=20),this.textBlock.boundingBox=this.textBoundingBox}else super.setTextBoundingBox()}}b.typeName="AngledConnector";class x extends v{constructor(e,f,B){super(e,f,B),this.arrowType="end"}}x.typeName="ArrowConnector";class y extends A{constructor(e,f,B){super(e,f,B),this.arrowType="end"}}y.typeName="CurvedArrowConnector";class S extends b{constructor(e,f,B){super(e,f,B),this.arrowType="end"}}S.typeName="AngledArrowConnector";class w{constructor(e,f){this.id=e,this.displayName=null!=f?f:e,this.stencilTypes=[],this.connectorTypes=[],this.getStencilProperties=this.getStencilProperties.bind(this),this.getConnectorProperties=this.getConnectorProperties.bind(this)}getStencilProperties(e){let f;return f="string"==typeof e?this.stencilTypes.find((f=>f.stencilType.typeName===e)):this.stencilTypes.find((f=>f.stencilType===e)),f}getConnectorProperties(e){let f;return f="string"==typeof e?this.connectorTypes.find((f=>f.connectorType.typeName===e)):this.connectorTypes.find((f=>f.connectorType===e)),f}}const J=new w("core","Basic diagram");J.stencilTypes.push({stencilType:l,displayName:"Text box"},{stencilType:c,displayName:"Ellipse"},{stencilType:d,displayName:"Diamond"},{stencilType:u,displayName:"Label"},{stencilType:p,displayName:"Lightbulb"},{stencilType:C,displayName:"Image"}),J.connectorTypes.push({connectorType:v,displayName:"Basic connector"},{connectorType:A,displayName:"Curved connector"},{connectorType:b,displayName:"Angled connector"});class E{static addKey(e,f){E.keys.set(e,f),E.keyAddListeners.forEach((e=>{e()}))}static addKeyAddListener(e){E.keyAddListeners.push(e)}static removeKeyAddListener(e){const f=E.keyAddListeners.indexOf(e);f>-1&&E.keyAddListeners.splice(f,1)}static isLicensed(e){if(E.keys.has(e)){const f=new RegExp(`${e}-[A-Z][0-9]{3}-[A-Z][0-9]{3}-[0-9]{4}`,"i"),B=E.keys.get(e);return void 0!==B&&f.test(B)}return!1}}E.keys=new Map,E.keyAddListeners=new Array;var lt='<svg viewBox="0 0 112 96" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:1.41421"><path style="fill:#e5f20d;fill-opacity:.647059" d="M801.047 441.52h507.554v82.104H801.047z" transform="matrix(.22059 0 0 .67273 -176.702 -256.636)"/><path d="M506.73 455.948c0 .4-.133.742-.4 1.025-.266.284-.616.425-1.05.425-.6 0-.9-.3-.9-.9 0-6.733-.216-11.891-.65-15.475-.433-3.583-1.183-5.375-2.25-5.375-1.8 0-4.433 6.284-7.9 18.85v.05c0 .4-.133.742-.4 1.025-.266.284-.616.425-1.05.425-.6 0-.9-.3-.9-.9 0-1.333.067-3.4.2-6.2.134-3.133.2-5.6.2-7.4 0-2.5-.075-4.275-.225-5.325-.15-1.05-.475-1.575-.975-1.575-1.133 0-2.566 2.075-4.3 6.225-1.733 4.15-3.55 9.042-5.45 14.675l-.45 1.3a2.315 2.315 0 0 1-.575.85c-.25.234-.525.35-.825.35-.4 0-.666-.033-.8-.1-.133-.066-.216-.266-.25-.6-.166-1.633-.3-3.816-.4-6.55-.066-.7-.133-1.85-.2-3.45-.333-5.633-.633-9.441-.9-11.425-.266-1.983-.4-3.091-.4-3.325 0-.266.134-.583.4-.95.267-.366.517-.55.75-.55.534 0 .967.384 1.3 1.15.167.367.35 1.834.55 4.4.2 2.567.367 5.75.5 9.55l.25 7.65c1.834-5.666 3.734-10.808 5.7-15.425 1.967-4.616 3.767-6.925 5.4-6.925 1.1 0 1.85.8 2.25 2.4.4 1.6.6 3.917.6 6.95 0 1.6-.033 3.9-.1 6.9l-.05 2.3c1.367-4.766 2.725-8.766 4.075-12 1.35-3.233 2.709-4.85 4.075-4.85 3.434 0 5.15 7.6 5.15 22.8Z" style="fill-rule:nonzero" transform="translate(-1156.959 -1063.791) scale(2.46792)"/></svg>';class _ extends HTMLElement{constructor(){super(),this._stencils=[],this._connectors=[],this.zoomSteps=[.5,.75,1,1.5,2,4],this._zoomLevel=1,this._autoScaling="down",this._stencilSet=J,this.settings=new s,this._toolbarVisible=!0,this._loadAnimationEnabled=!0,this._iid=0,this.width=0,this.height=0,this.documentWidth=640,this.documentHeight=360,this.documentBgColor="white",this.touchPoints=0,this.isDragging=!1,this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onStencilPointerUp=this.onStencilPointerUp.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOut=this.onPointerOut.bind(this),this.clientToLocalCoordinates=this.clientToLocalCoordinates.bind(this),this.addStyles=this.addStyles.bind(this),this.toggleLogo=this.toggleLogo.bind(this),this.addLogo=this.addLogo.bind(this),this.removeLogo=this.removeLogo.bind(this),this.positionLogo=this.positionLogo.bind(this),this.show=this.show.bind(this),this.setDocumentBgColor=this.setDocumentBgColor.bind(this),this.connectedCallback=this.connectedCallback.bind(this),this.zoom=this.zoom.bind(this),this.toolbarButtonClicked=this.toolbarButtonClicked.bind(this),this.setupResizeObserver=this.setupResizeObserver.bind(this),this.autoScale=this.autoScale.bind(this),this.attachShadow({mode:"open"})}get zoomLevel(){return this._zoomLevel}set zoomLevel(e){this._zoomLevel=e,this._canvasContainer&&this._contentContainer&&this._mainCanvas&&(this._mainCanvas.style.width=this.documentWidth*this.zoomLevel+"px",this._mainCanvas.style.height=this.documentHeight*this.zoomLevel+"px",this._canvasContainer.scrollTo({left:(this._mainCanvas.clientWidth-this._canvasContainer.clientWidth)/2,top:(this._mainCanvas.clientHeight-this._canvasContainer.clientHeight)/2}))}get autoScaling(){return this._autoScaling}set autoScaling(e){this._autoScaling=e,this.autoScale()}get stencilSet(){return this._stencilSet}set stencilSet(e){this._stencilSet=e,this.toggleLogo()}get toolbarVisible(){return this._toolbarVisible}set toolbarVisible(e){this._toolbarVisible=e,void 0!==this._toolbarContainer&&(this._toolbarContainer.style.display=e?"":"none")}get loadAnimationEnabled(){return this._loadAnimationEnabled}set loadAnimationEnabled(e){this._loadAnimationEnabled=e}getNewIId(){return++this._iid}createLayout(){var e;this.style.display="block",this.style.width=""!==this.style.width?this.style.width:"100%",this.style.height=""!==this.style.height?this.style.height:"100%",this.style.position="relative",this._container=document.createElement("div"),this._container.className="main-container",this._container.style.display="flex",this._container.style.width="100%",this._container.style.height="100%",this._container.style.userSelect="none",this._contentContainer=document.createElement("div"),this._contentContainer.style.display="grid",this._contentContainer.style.position="relative",this._contentContainer.style.flexGrow="2",this._contentContainer.style.flexShrink="1",this._contentContainer.style.overflow="hidden",this._contentContainer.style.gridTemplateRows="auto 60px",this._contentContainer.style.gridTemplateColumns="1fr",this._container.appendChild(this._contentContainer),this._canvasContainer=document.createElement("div"),this._canvasContainer.style.touchAction="pinch-zoom",this._canvasContainer.className="canvas-container",this._canvasContainer.style.display="grid",this._canvasContainer.style.gridTemplateColumns="1fr",this._canvasContainer.style.flexGrow="2",this._canvasContainer.style.flexShrink="2",this._canvasContainer.style.justifyItems="center",this._canvasContainer.style.alignItems="center",this._canvasContainer.style.overflow="auto",this._canvasContainer.style.gridRow="1/3",this._canvasContainer.style.gridColumn="1",this._contentContainer.appendChild(this._canvasContainer),this._toolbarAreaContainer=document.createElement("div"),this._toolbarAreaContainer.className="toolbar-area",this._toolbarAreaContainer.style.display="flex",this._toolbarAreaContainer.style.gridRow="2",this._toolbarAreaContainer.style.gridColumn="1",this._toolbarAreaContainer.style.justifyContent="center",this._toolbarAreaContainer.style.marginBottom="10px",this._contentContainer.appendChild(this._toolbarAreaContainer),this._toolbarContainer=document.createElement("div"),this._toolbarAreaContainer.appendChild(this._toolbarContainer),this._container.setAttribute("part","container"),null===(e=this.shadowRoot)||void 0===e||e.appendChild(this._container)}addToolbar(){const J=document.createElement("mjstb-panel");J.className="toolbar-panel";const lt=new e;lt.addEventListener("buttonclick",this.toolbarButtonClicked);const Ct=new f,vt=new B({icon:'<svg width="24" height="24" viewBox="0 0 24 24">\n    <path fill="currentColor" d="M19,13H5V11H19V13Z" />\n</svg>',text:"zoom out",command:"zoomout"});Ct.appendButton(vt);const St=new B({icon:'<svg width="24" height="24" viewBox="0 0 24 24">\n    <path fill="currentColor" d="M12 5.5L10 8H14L12 5.5M18 10V14L20.5 12L18 10M6 10L3.5 12L6 14V10M14 16H10L12 18.5L14 16M21 3H3C1.9 3 1 3.9 1 5V19C1 20.1 1.9 21 3 21H21C22.1 21 23 20.1 23 19V5C23 3.9 22.1 3 21 3M21 19H3V5H21V19Z" />\n</svg>',text:"fit",command:"zoomreset"});Ct.appendButton(St);const wt=new B({icon:'<svg width="24" height="24" viewBox="0 0 24 24">\n    <path fill="currentColor" d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" />\n</svg>',text:"zoom in",command:"zoomin"});Ct.appendButton(wt),lt.appendBlock(Ct),J.appendToolbar(lt),void 0!==this._toolbarContainer&&(this._toolbarContainer.style.display=this.toolbarVisible?"":"none",this._toolbarContainer.appendChild(J))}toolbarButtonClicked(e){switch(e.detail.button.command){case"zoomin":this.zoom(1);break;case"zoomout":this.zoom(-1);break;case"zoomreset":1===this.zoomLevel?this.autoScale():this.zoom(0)}}zoom(e){const f=this.zoomSteps.indexOf(this.zoomLevel);0===e||-1===f?this.zoomLevel=1:e>0&&f<this.zoomSteps.length-1?this.zoomLevel=this.zoomSteps[f+1]:e<0&&f>0&&(this.zoomLevel=this.zoomSteps[f-1])}autoScale(){if("none"!==this.autoScaling&&this._container&&("both"===this.autoScaling||this._container.clientWidth>this.documentWidth&&this._container.clientHeight>this.documentHeight&&"up"===this.autoScaling||(this._container.clientWidth<this.documentWidth||this._container.clientHeight<this.documentHeight)&&"down"===this.autoScaling)){const e=this._container.getBoundingClientRect();this.zoomLevel=Math.min(e.width/this.documentWidth,e.height/this.documentHeight)}}addMainCanvas(){var e,f,B;this.width=(null===(e=this._container)||void 0===e?void 0:e.clientWidth)||0,this.height=(null===(f=this._container)||void 0===f?void 0:f.clientHeight)||0,this._mainCanvas=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._mainCanvas.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.setMainCanvasSize(),this._mainCanvas.style.pointerEvents="auto",this._mainCanvas.style.fontFamily="Helvetica, Arial, Sans-Serif",this._mainCanvas.style.backgroundColor=this.documentBgColor,this._mainCanvas.style.filter="var(--i-mjsdiav-canvas-filter)",this._groupLayer=o.createGroup(),this._connectorLayer=o.createGroup(),this._objectLayer=o.createGroup(),this._mainCanvas.appendChild(this._groupLayer),this._mainCanvas.appendChild(this._connectorLayer),this._mainCanvas.appendChild(this._objectLayer),null===(B=this._canvasContainer)||void 0===B||B.appendChild(this._mainCanvas)}connectedCallback(){E.addKeyAddListener(this.toggleLogo),this.createLayout(),this.addMainCanvas(),this.addToolbar(),this.attachEvents()}disconnectedCallback(){this.detachEvents()}attachEvents(){var e,f;this.setupResizeObserver(),null===(e=this._mainCanvas)||void 0===e||e.addEventListener("pointerdown",this.onPointerDown),null===(f=this._mainCanvas)||void 0===f||f.addEventListener("pointerup",this.onStencilPointerUp),this.attachWindowEvents()}attachWindowEvents(){window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp),window.addEventListener("pointercancel",this.onPointerOut),window.addEventListener("pointerout",this.onPointerOut),window.addEventListener("pointerleave",this.onPointerUp)}detachEvents(){var e,f;this._resizeObserver&&this._container&&this._resizeObserver.unobserve(this._container),null===(e=this._mainCanvas)||void 0===e||e.removeEventListener("pointerdown",this.onPointerDown),null===(f=this._mainCanvas)||void 0===f||f.removeEventListener("pointerdown",this.onStencilPointerUp),this.detachWindowEvents()}detachWindowEvents(){window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("pointercancel",this.onPointerOut),window.removeEventListener("pointerout",this.onPointerOut),window.removeEventListener("pointerleave",this.onPointerUp)}setupResizeObserver(){window.ResizeObserver&&this._container&&(this._resizeObserver=new ResizeObserver((()=>{this.autoScale(),this.positionLogo()})),this._resizeObserver.observe(this._container))}clientToLocalCoordinates(e,f){if(this._mainCanvas){const B=this._mainCanvas.getBoundingClientRect();return{x:(e-B.left)/this.zoomLevel,y:(f-B.top)/this.zoomLevel}}return{x:e,y:f}}onPointerDown(e){}onPointerMove(e){}onStencilPointerUp(e){}onPointerUp(e){}onPointerOut(){}addNewStencil(e){var f;const B=o.createGroup();B.classList.add("stencil-container"),null===(f=this._objectLayer)||void 0===f||f.appendChild(B);const J=new e(this.getNewIId(),B,this.settings);return J.container.addEventListener("pointerenter",(()=>this.dispatchEvent(new CustomEvent("stencilpointerenter",{detail:{viewer:this,stencil:J}})))),J.container.addEventListener("pointerleave",(()=>this.dispatchEvent(new CustomEvent("stencilpointerleave",{detail:{viewer:this,stencil:J}})))),J.container.addEventListener("click",(()=>this.dispatchEvent(new CustomEvent("stencilclick",{detail:{viewer:this,stencil:J}})))),J}addNewConnector(e){var f;const B=o.createGroup();B.classList.add("connector-container"),null===(f=this._connectorLayer)||void 0===f||f.appendChild(B);const J=new e(this.getNewIId(),B,this.settings);return J.container.addEventListener("pointerenter",(()=>this.dispatchEvent(new CustomEvent("connectorpointerenter",{detail:{viewer:this,connector:J}})))),J.container.addEventListener("pointerleave",(()=>this.dispatchEvent(new CustomEvent("connectorpointerleave",{detail:{viewer:this,connector:J}})))),J.container.addEventListener("click",(()=>this.dispatchEvent(new CustomEvent("connectorclick",{detail:{viewer:this,connector:J}})))),J}setDocumentBgColor(e){this.documentBgColor=e,void 0!==this._mainCanvas&&(this._mainCanvas.style.backgroundColor=e)}setMainCanvasSize(){void 0!==this._mainCanvas&&(this._mainCanvas.setAttribute("width",this.documentWidth.toString()),this._mainCanvas.setAttribute("height",this.documentHeight.toString()),this._mainCanvas.setAttribute("viewBox","0 0 "+this.documentWidth.toString()+" "+this.documentHeight.toString()),this.zoomLevel=1*this.zoomLevel)}setDocumentSize(e,f){this.documentWidth=e,this.documentHeight=f,this.setMainCanvasSize()}addStyles(){var e;const f=document.createElement("style");f.innerHTML="\n      * {\n        --i-mjsdiav-canvas-background-color: var(--mjsdiav-canvas-background-color, #fff);\n        --i-mjsdiav-canvas-filter: var(--mjsdiav-canvas-filter);\n        \n        --i-mjsdiav-tb-background-color: var(--mjsdiav-tb-background-color, #fff);\n        --i-mjsdiav-tb-border-color: var(--mjsdiav-tb-border-color, #fafafa);\n        --i-mjsdiav-tb-fore-color: var(--mjsdiav-tb-fore-color, #333);\n        --i-mjsdiav-tb-button-border-color: var(--mjsdiav-tb-button-border-color, #fff);\n        --i-mjsdiav-tb-background-color-hover: var(--mjsdiav-tb-background-color-hover, #fcfcfc);\n        --i-mjsdiav-tb-button-border-color-hover: var(--mjsdiav-tb-button-border-color-hover, #fafafa);\n      }\n      .canvas-container {\n        background-color: var(--i-mjsdiav-canvas-background-color);\n        scrollbar-width: thin;\n      }\n      .canvas-container::-webkit-scrollbar {\n        height: 10px;\n        width: 10px;\n      }\n      .canvas-container::-webkit-scrollbar-track {\n        background-color: transparent;\n      }\n      .canvas-container::-webkit-scrollbar-thumb {\n        background-color: #444;\n        border-radius: 20px;\n        border: 2px solid #aaa;\n      }      \n      .stencil-container {\n        cursor: default;\n      }\n      .connector-container {\n        cursor: default;\n      }\n      .hidden {\n        opacity: 0;\n      }\n\n      .toolbar-area {\n        opacity: 0;\n      }\n      .main-container:hover .toolbar-area {\n        opacity: 1;\n      }\n      .toolbar-area:hover {\n        opacity: 1;\n      }\n\n      mjstb-panel.toolbar-panel::part(panel) {\n        background-color: var(--i-mjsdiav-tb-background-color);\n        border: 2px solid var(--i-mjsdiav-tb-border-color);\n        border-radius: 5px;\n        opacity: 0.5;\n      }\n      mjstb-panel.toolbar-panel::part(panel):hover {\n        opacity: 1;\n      }\n      mjstb-panel.toolbar-panel::part(toolbar) {\n        padding: 5px;\n        justify-content: space-between;\n      }\n      mjstb-panel.toolbar-panel::part(toolbar-block) {\n      }\n      mjstb-panel.toolbar-panel::part(button) {\n        color: var(--i-mjsdiav-tb-fore-color);\n        background-color: var(--i-mjsdiav-tb-background-color);\n        width: 36px;\n        height: 36px;\n        border-radius: 3px;\n        border: 2px solid var(--i-mjsdiav-tb-button-border-color);\n      }\n      mjstb-panel.toolbar-panel::part(button):hover {\n        background-color: var(--i-mjsdiav-tb-background-color-hover);\n        border-color: var(--i-mjsdiav-tb-button-border-color-hover);\n      }\n\n\n      @keyframes fade_in_animation_frames {\n        from {\n          opacity: 0;\n          transform: scale(0);\n        }\n        to {\n          opacity: 1;\n        }        \n      }\n\n      @keyframes connector_fade_in_animation_frames {\n        from {\n          opacity: 0;\n        }\n        to {\n          opacity: 1;\n        }        \n      }\n\n      @keyframes stencil_hover_frames {\n        from {\n          transform: scale(1);\n          filter: drop-shadow(0px #888);\n        }\n        to {\n          transform: scale(1.02);\n          filter: drop-shadow(1px 2px 3px #888);\n        }        \n      }\n\n      @keyframes connector_hover_frames {\n        from {\n          filter: drop-shadow(0px #888);\n        }\n        to {\n          filter: drop-shadow(1px 2px 1px #888);\n        }        \n      }\n\n      .fade-in {\n        transform-origin: center;\n        transform-box: fill-box;\n        animation-duration: 0.3s;\n        animation-fill-mode: forwards;\n        animation-name: fade_in_animation_frames;     \n        animation-timing-function: ease-out;   \n      }\n      .connector-fade-in {\n        transform-origin: center;\n        transform-box: fill-box;\n        animation-duration: 0.3s;\n        animation-fill-mode: forwards;\n        animation-name: connector_fade_in_animation_frames;        \n      }\n\n      .stencil-container:hover {\n        transform-origin: center;\n        transform-box: fill-box;\n        animation-duration: 0.1s;\n        animation-fill-mode: forwards;\n        animation-name: stencil_hover_frames;        \n        animation-timing-function: ease-out;   \n      }\n      .connector-container:hover {\n        transform-origin: center;\n        transform-box: fill-box;\n        animation-duration: 0.1s;\n        animation-fill-mode: forwards;\n        animation-name: connector_hover_frames;        \n      }\n    ",null===(e=this.shadowRoot)||void 0===e||e.appendChild(f)}show(e){var f,B;for(this.dispatchEvent(new CustomEvent("viewerinit",{detail:{viewer:this}})),this.addStyles(),void 0!==e.width&&void 0!==e.height&&this.setDocumentSize(e.width,e.height),void 0!==e.backgroundColor&&this.setDocumentBgColor(e.backgroundColor),this._stencils.splice(0);null===(f=this._objectLayer)||void 0===f?void 0:f.lastChild;)this._objectLayer.removeChild(this._objectLayer.lastChild);for(this._connectors.splice(0);null===(B=this._connectorLayer)||void 0===B?void 0:B.lastChild;)this._connectorLayer.removeChild(this._connectorLayer.lastChild);let J=1e3;if(void 0!==e.stencils&&e.stencils.length>0){const f=Math.min(250,J/e.stencils.length);J=f*e.stencils.length,e.stencils.forEach(((e,B)=>{const J=this._stencilSet.getStencilProperties(e.typeName);if(void 0!==J){const lt=this.addNewStencil(J.stencilType);this.loadAnimationEnabled&&(lt.container.classList.add("hidden"),lt.container.addEventListener("animationend",(()=>{lt.container.classList.remove("hidden","fade-in")}))),lt.restoreState(e),this._stencils.push(lt),this.loadAnimationEnabled&&setTimeout((()=>{lt.container.classList.add("fade-in")}),B*f)}}))}if(void 0!==e.connectors&&e.connectors.length>0){const f=Math.min(50,250/e.connectors.length);e.connectors.forEach(((e,B)=>{const lt=this._stencilSet.getConnectorProperties(e.typeName);if(void 0!==lt){const Ct=this._stencils.find((f=>f.IId===e.startStencilId)),vt=this._stencils.find((f=>f.IId===e.endStencilId));if(Ct&&vt&&e.startPortLocation&&e.endPortLocation){const St=Ct.ports.get(e.startPortLocation),wt=vt.ports.get(e.endPortLocation);if(St&&wt){const zt=this.addNewConnector(lt.connectorType);this.loadAnimationEnabled&&(zt.container.classList.add("hidden"),zt.container.addEventListener("animationend",(()=>{zt.container.classList.remove("hidden","connector-fade-in")}))),zt.restoreState(e,{startStencil:Ct,startPort:St,endStencil:vt,endPort:wt}),this._connectors.push(zt),St.connectors.push(zt),wt.connectors.push(zt),this.loadAnimationEnabled&&setTimeout((()=>{zt.container.classList.add("connector-fade-in")}),J+B*f)}}}}))}this.dispatchEvent(new CustomEvent("diagramload",{detail:{viewer:this}}))}toggleLogo(){E.isLicensed("MJSDV")?this.removeLogo():this.addLogo()}addLogo(){var e,f;void 0!==this._logoUI&&(null===(e=this._container)||void 0===e||e.removeChild(this._logoUI)),this._logoUI=document.createElement("div"),this._logoUI.style.display="inline-block",this._logoUI.style.margin="0px",this._logoUI.style.padding="0px",this._logoUI.style.fill="#333333";const B=document.createElement("a");B.href="https://markerjs.com/",B.target="_blank",B.innerHTML=lt,B.title="Powered by marker.js",B.style.display="grid",B.style.alignItems="center",B.style.justifyItems="center",B.style.padding="3px",B.style.width="20px",B.style.height="20px",this._logoUI.appendChild(B),null===(f=this._container)||void 0===f||f.appendChild(this._logoUI),this._logoUI.style.position="absolute",this._logoUI.style.pointerEvents="all",this.positionLogo()}removeLogo(){this._container&&void 0!==this._logoUI&&this._container.contains(this._logoUI)&&this._container.removeChild(this._logoUI)}positionLogo(){if(this._logoUI&&this._container){this._logoUI.style.left="20px",this._logoUI.style.top=this._container.offsetHeight-this._logoUI.clientHeight-20+"px";const e=this._container.clientWidth<300||this._container.clientHeight<250;this._logoUI.style.display=e?"none":"inline-block"}}addEventListener(e,f,B){super.addEventListener(e,f,B)}removeEventListener(e,f,B){super.removeEventListener(e,f,B)}}function k(e,f,B,J){return new(B||(B=Promise))((function(lt,Ct){function r(e){try{h(J.next(e))}catch(e){Ct(e)}}function a(e){try{h(J.throw(e))}catch(e){Ct(e)}}function h(e){var f;e.done?lt(e.value):(f=e.value,f instanceof B?f:new B((function(e){e(f)}))).then(r,a)}h((J=J.apply(e,f||[])).next())}))}window&&window.customElements&&void 0===window.customElements.get("mjs-diagram-viewer")&&window.customElements.define("mjs-diagram-viewer",_);class L{constructor(){this.enabled=!0,this.GRIP_SIZE=10,this.visual=o.createGroup(),this.visual.appendChild(o.createCircle(1.5*this.GRIP_SIZE,[["fill","transparent"]])),this.visual.appendChild(o.createCircle(this.GRIP_SIZE,[["fill","#cccccc"],["fill-opacity","0.7"],["stroke","#333333"],["stroke-width","2"],["stroke-opacity","0.7"]]))}ownsTarget(e){return e===this.visual||e===this.visual.childNodes[0]||e===this.visual.childNodes[1]}}class T{constructor(e,f){this.title=e,this.language=f}}class P extends T{constructor(e,f,B,J){super(e,f),this.colors=[],this.colorBoxes=[],this.colors=B,this.currentColor=J,this.setCurrentColor=this.setCurrentColor.bind(this),this.getColorBox=this.getColorBox.bind(this)}getUi(){const e=document.createElement("div");return e.style.display="flex",e.style.flexWrap="wrap",this.colors.forEach((f=>{const B=this.getColorBox(f);e.appendChild(B),this.colorBoxes.push(B)})),e}getColorBox(e){const f=document.createElement("div");return f.style.display="flex",f.style.alignItems="center",f.style.justifyContent="center",f.style.width="28px",f.style.height="28px",f.style.backgroundColor=e.value,f.style.borderWidth="2px",f.style.borderStyle="solid",f.style.borderColor=e.value===this.currentColor?"var(--i-mjsdiae-accent-color)":"var(--i-mjsdiae-background-color)",f.style.borderRadius="3px","transparent"===e.value&&(f.style.color="var(--i-mjsdiae-accent-color)",f.innerHTML='<svg viewBox="0 0 24 24" width="24" height="24">\n      <path fill="currentColor" d="M22.11 21.46L2.39 1.73L1.11 3L3 4.9V19C3 20.11 3.9 21 5 21H19.1L20.84 22.73L22.11 21.46M5 19V6.89L17.11 19H5M8.2 5L6.2 3H19C20.1 3 21 3.89 21 5V17.8L19 15.8V5H8.2Z" />\n  </svg>'),f.addEventListener("click",(()=>{this.setCurrentColor(e.value,f)})),f}setCurrentColor(e,f){this.currentColor=e,this.colorBoxes.forEach((e=>{e.style.borderColor=e===f?"var(--i-mjsdiae-accent-color)":"var(--i-mjsdiae-background-color)"})),this.onColorChanged&&this.onColorChanged(e)}}class M extends T{constructor(e,f,B){super(e,f),this.typeBoxes=[],this.currentType=B,this.setCurrentType=this.setCurrentType.bind(this)}getUi(){const e=document.createElement("div");e.style.display="flex",e.style.overflow="hidden",e.style.flexGrow="2";for(let f=0;f<4;f++){let B="both";switch(f){case 0:B="end";break;case 1:B="start";break;case 2:B="both";break;case 3:B="none"}const J=document.createElement("div");if(J.style.display="flex",J.style.width="25%",J.style.flexGrow="2",J.style.alignItems="center",J.style.justifyContent="space-between",J.style.padding="5px",J.style.borderWidth="2px",J.style.borderStyle="solid",J.style.borderColor=B===this.currentType?"var(--i-mjsdiae-accent-color)":"transparent",J.addEventListener("click",(()=>{this.setCurrentType(B,J)})),e.appendChild(J),"both"===B||"start"===B){const e=document.createElement("div");e.style.display="flex",e.style.alignItems="center",e.style.minHeight="20px",e.innerHTML='<svg viewBox="0 0 10 10" width="10" height="10" xmlns="http://www.w3.org/2000/svg">\n          <polygon points="0,5 10,0 10,10" style="fill: var(--i-mjsdiae-accent-color);" />\n        </svg>',e.style.marginLeft="5px",J.appendChild(e)}const lt=document.createElement("div");lt.style.display="flex",lt.style.alignItems="center",lt.style.minHeight="20px",lt.style.flexGrow="2";const Ct=document.createElement("hr");if(Ct.style.minWidth="20px",Ct.style.border="0px",Ct.style.borderTop="3px solid var(--i-mjsdiae-accent-color)",Ct.style.flexGrow="2",lt.appendChild(Ct),J.appendChild(lt),"both"===B||"end"===B){const e=document.createElement("div");e.style.display="flex",e.style.alignItems="center",e.style.minHeight="20px",e.innerHTML='<svg viewBox="0 0 10 10" width="10" height="10" xmlns="http://www.w3.org/2000/svg">\n          <polygon points="0,0 10,5 0,10" style="fill: var(--i-mjsdiae-accent-color);" />\n        </svg>',e.style.marginRight="5px",J.appendChild(e)}this.typeBoxes.push(J)}return e}setCurrentType(e,f){this.currentType=e,this.typeBoxes.forEach((e=>{e.style.borderColor=e===f?"var(--i-mjsdiae-accent-color)":"transparent"})),this.onArrowTypeChanged&&this.onArrowTypeChanged(this.currentType)}}class H{constructor(){this.isInFocus=!1,this._width=0,this._height=0,this._left=0,this._top=0,this._text="",this._fontFamily="sans-serif",this._fontSize="1rem",this._textColor="#000",this.isSetupCompleted=!1,this.textEditor=document.createElement("div"),this.getEditorUi=this.getEditorUi.bind(this),this.focus=this.focus.bind(this),this.setup=this.setup.bind(this)}get width(){return this._width}set width(e){this._width=e,this.textEditor.style.width=`${this.width}px`}get height(){return this._height}set height(e){this._height=e,this.textEditor.style.height=`${this.height}px`}get left(){return this._left}set left(e){this._left=e,this.textEditor.style.left=`${this.left}px`}get top(){return this._top}set top(e){this._top=e,this.textEditor.style.top=`${this.top}px`}get text(){return this._text}set text(e){this._text=e}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily=e,this.textEditor.style.fontFamily=this._fontFamily}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize=e,this.textEditor.style.fontSize=this._fontSize}get textColor(){return this._textColor}set textColor(e){this._textColor=e,this.textEditor.style.color=this.textColor}setup(){this.textEditor.style.position="absolute",this.textEditor.style.pointerEvents="auto",this.textEditor.style.display="flex",this.textEditor.style.flexDirection="column",this.textEditor.style.alignItems="center",this.textEditor.style.justifyContent="center",this.textEditor.style.width=`${this._width}px`,this.textEditor.style.height=`${this._height}px`,this.textEditor.style.overflow="hidden",this.textEditor.style.textAlign="center",this.textEditor.style.fontFamily=this._fontFamily,this.textEditor.style.fontSize=this._fontSize,this.textEditor.style.lineHeight="1em",""!==this._text?this.textEditor.innerText=this._text:this.textEditor.innerHTML="&nbsp;",this.textEditor.contentEditable="true",this.textEditor.style.outline="none",this.textEditor.style.color=this._textColor,this.textEditor.style.whiteSpace="pre",this.textEditor.addEventListener("pointerdown",(e=>{e.stopPropagation()})),this.textEditor.addEventListener("pointerup",(e=>{e.stopPropagation()})),this.textEditor.addEventListener("keyup",(e=>{e.cancelBubble=!0})),this.textEditor.addEventListener("blur",(()=>{this._text=this.textEditor.innerText,void 0!==this.onTextChanged&&this.onTextChanged(this._text)})),this.textEditor.addEventListener("paste",(e=>{if(e.clipboardData){const f=e.clipboardData.getData("text"),B=window.getSelection();if(!B||!B.rangeCount)return!1;B.deleteFromDocument(),B.getRangeAt(0).insertNode(document.createTextNode(f)),e.preventDefault()}})),this.isSetupCompleted=!0}getEditorUi(){return this.isSetupCompleted||this.setup(),this.textEditor}focus(){this.textEditor.focus()}blur(){this.textEditor.blur()}}class V{constructor(){this.width=0,this.height=0,this._isSelected=!1,this.getUi=this.getUi.bind(this)}get isSelected(){return this._isSelected}set isSelected(e){this._isSelected=e,void 0!==this.itemUi&&(this.itemUi.style.borderColor=this.isSelected?"var(--i-mjsdiae-accent-color)":"var(--i-mjsdiae-background-color)")}setupUi(){this.itemUi=document.createElement("div"),void 0!==this.content&&this.itemUi.appendChild(this.content),this.itemUi.style.display="flex",this.itemUi.style.borderWidth="2px",this.itemUi.style.borderStyle="solid",this.itemUi.style.flexGrow="1",this.itemUi.style.padding="0 3px",this.itemUi.addEventListener("click",(()=>{void 0!==this.onClick&&this.onClick(this)}))}getUi(){return void 0===this.itemUi&&this.setupUi(),void 0!==this.itemUi&&(this.itemUi.style.maxWidth=`${this.width}px`,this.itemUi.style.minWidth="20px",this.itemUi.style.overflow="hidden",this.itemUi.style.height=`${this.height}px`,this.itemUi.style.borderColor=this.isSelected?"var(--i-mjsdiae-accent-color)":"var(--i-mjsdiae-background-color)",this.itemUi.style.stroke="var(--i-mjsdiae-accent-color)"),this.itemUi}}class I extends T{constructor(e,f,B,J,lt){super(e,f),this.lineStyles=[],this.typeBoxes=[],this.lineAttributes=[],this.lineStyleAttribute=B,this.lineStyles=J,this.currentStyle=lt,this.setCurrentType=this.setCurrentType.bind(this),this.getTypeBox=this.getTypeBox.bind(this),this.selectStyle=this.selectStyle.bind(this)}getUi(){this.typeBoxes.length>0&&this.typeBoxes.splice(0,this.typeBoxes.length);const e=document.createElement("div");return e.style.display="flex",e.style.justifyContent="stretch",this.lineStyles.forEach((f=>{const B=this.getTypeBox(f);e.appendChild(B.getUi()),this.typeBoxes.push(B)})),e}getTypeBox(e){const f=30,B=120,J=document.createElementNS("http://www.w3.org/2000/svg","svg");J.setAttribute("xmlns","http://www.w3.org/2000/svg"),J.setAttribute("width",B.toString()),J.setAttribute("height",f.toString());const lt=o.createLine(0,f/2,B,f/2,[...this.lineAttributes,[this.lineStyleAttribute,e]]);J.appendChild(lt);const Ct=new V;return Ct.width=B,Ct.height=f,Ct.content=J,Ct.dataItem=e,Ct.isSelected=e===this.currentStyle,Ct.onClick=this.setCurrentType,Ct}setCurrentType(e){this.currentStyle=e.dataItem,this.typeBoxes.forEach((e=>{e.isSelected=e.dataItem===this.currentStyle})),this.onLineStyleChanged&&void 0!==this.currentStyle&&this.onLineStyleChanged(this.currentStyle)}selectStyle(e){this.lineStyles.forEach(((f,B)=>{f===e?(this.currentStyle=f,this.typeBoxes[B].isSelected=!0):this.typeBoxes[B].isSelected=!1}))}}class D{constructor(e){var f,B,J,lt,Ct;this._state="new",this.manipulationStartX=0,this.manipulationStartY=0,this.prevX=0,this.prevY=0,this.manipulationStartX1=0,this.manipulationStartY1=0,this.manipulationStartX2=0,this.manipulationStartY2=0,this.isDraggingLabel=!1,this._isSelected=!1,this.connector=null!==(f=e.connector)&&void 0!==f?f:new e.connectorType(e.iid,e.container,e.settings),this._container=e.container,this.overlayContainer=e.overlayContainer,this._settings=e.settings,this._language=e.language,this.connector.textBlock.fontFamily=this.settings.getFontFamily(this.connector.typeName),this.connector.strokeColor=this.settings.getColor(this.connector.typeName,"stroke"),this.textBlockEditor=new H,this.strokePanel=new P(null!==(B=this._language.getString("toolbox-linecolor-title"))&&void 0!==B?B:"Line color",this._language,this.settings.getColorSet(this.connector.typeName,"stroke"),this.connector.strokeColor),this.strokePanel.onColorChanged=this.connector.setStrokeColor,this.arrowTypePanel=new M(null!==(J=this._language.getString("toolbox-arrowtype-title"))&&void 0!==J?J:"Arrow type",this._language,this.connector.arrowType),this.arrowTypePanel.onArrowTypeChanged=this.connector.setArrowType,this.lineStylePanel=new I(null!==(lt=this._language.getString("toolbox-linestyle-title"))&&void 0!==lt?lt:"Line style",this._language,"stroke-dasharray",this.settings.getDashArrays(this.connector.typeName),this.connector.strokeDasharray),this.lineStylePanel.lineAttributes=[["stroke-width","3"]],this.lineStylePanel.onLineStyleChanged=this.connector.setStrokeDasharray,this.lineWidthPanel=new I(null!==(Ct=this._language.getString("toolbox-linewidth-title"))&&void 0!==Ct?Ct:"Line width",this._language,"stroke-width",this.settings.getStrokeWidths(this.connector.typeName),this.connector.strokeWidth.toString()),this.lineWidthPanel.onLineStyleChanged=this.connector.setStrokeWidth,this.select=this.select.bind(this),this.deselect=this.deselect.bind(this),this.setupControlBox=this.setupControlBox.bind(this),this.adjustControlBox=this.adjustControlBox.bind(this),this.showControlBox=this.showControlBox.bind(this),this.hideControlBox=this.hideControlBox.bind(this),this.restoreState=this.restoreState.bind(this),this.pointerDown=this.pointerDown.bind(this),this.pointerUp=this.pointerUp.bind(this),this.manipulate=this.manipulate.bind(this),this.showTextEditor=this.showTextEditor.bind(this),this.positionTextEditor=this.positionTextEditor.bind(this),this.textChanged=this.textChanged.bind(this)}get state(){return this._state}get container(){return this._container}get settings(){return this._settings}ownsTarget(e){let f=!1;return null!==e&&(f=!!(this.grip1.ownsTarget(e)||this.grip2.ownsTarget(e)||this.connector.ownsTarget(e))),f}get isSelected(){return this._isSelected}select(){this.connector.container.style.cursor="move",this._isSelected=!0,void 0===this.controlBox&&this.setupControlBox(),this.adjustControlBox(),this.showControlBox()}deselect(){this.connector.container.style.cursor="default",this._isSelected=!1,this.hideControlBox()}hideControlBox(){this.controlBox.style.display="none",this.connector.textBlock.hideControlBox()}showControlBox(){void 0===this.controlBox&&this.setupControlBox(),this.controlBox.style.display="",this.connector.textBlock.showControlBox()}pointerDown(e,f){this.manipulationStartX=e.x,this.manipulationStartY=e.y,this.prevX=e.x,this.prevY=e.y,"new"===this.state&&(this.connector.createVisual(),this.connector.x1=e.x,this.connector.y1=e.y,this.connector.x2=e.x,this.connector.y2=e.y),this.manipulationStartX1=this.connector.x1,this.manipulationStartY1=this.connector.y1,this.manipulationStartX2=this.connector.x2,this.manipulationStartY2=this.connector.y2,"new"!==this.state?(this.select(),f&&this.grip1.ownsTarget(f)?(this.activeGrip=this.grip1,this.movingPort=this.connector.startPort):f&&this.grip2.ownsTarget(f)?(this.activeGrip=this.grip2,this.movingPort=this.connector.endPort):f&&this.connector.textBlock.ownsTarget(f)?this.isDraggingLabel=!0:(this.activeGrip=void 0,this.movingPort=void 0,this.isDraggingLabel=!1),this.activeGrip?(this._state="move",o.setAttributes(this.connector.container,[["pointer-events","none"]])):this.isDraggingLabel?this._state="move-label":this._state="select"):(this.connector.adjustVisual(),this.showControlBox(),this._state="creating",o.setAttributes(this.connector.container,[["pointer-events","none"]]))}dblClick(e,f){this.showTextEditor()}manipulate(e){"creating"===this.state?this.resize(e):"move"===this.state?this.activeGrip===this.grip1?this.connector.setStartPosition({x:this.manipulationStartX1+e.x-this.manipulationStartX,y:this.manipulationStartY1+e.y-this.manipulationStartY}):this.activeGrip===this.grip2&&this.connector.setEndPosition({x:this.manipulationStartX2+e.x-this.manipulationStartX,y:this.manipulationStartY2+e.y-this.manipulationStartY}):this.isDraggingLabel&&(0===e.x&&0===e.y||this.connector.moveLabel(e.x-this.prevX,e.y-this.prevY)),this.adjustControlBox(),this.prevX=e.x,this.prevY=e.y}resize(e){switch(this.activeGrip){case this.grip1:this.connector.setStartPosition({x:e.x,y:e.y});break;case this.grip2:case void 0:this.connector.setEndPosition({x:e.x,y:e.y})}this.adjustControlBox()}setupControlBox(){this.controlBox=o.createGroup(),this.controlBox.classList.add("control-box"),this.connector.container.appendChild(this.controlBox),this.addControlGrips(),this.controlBox.style.display="none"}adjustControlBox(){void 0===this.controlBox&&this.setupControlBox(),this.positionGrips()}addControlGrips(){this.grip1=this.createGrip(),this.grip2=this.createGrip(),this.positionGrips()}createGrip(){const e=new L;return e.visual.transform.baseVal.appendItem(o.createTransform()),this.controlBox.appendChild(e.visual),e}positionGrips(){const e=this.grip1.GRIP_SIZE;this.positionGrip(this.grip1.visual,this.connector.x1-e/2,this.connector.y1-e/2),this.positionGrip(this.grip2.visual,this.connector.x2-e/2,this.connector.y2-e/2)}positionGrip(e,f,B){const J=e.transform.baseVal.getItem(0);J.setTranslate(f,B),e.transform.baseVal.replaceItem(J,0)}pointerUp(e){const f=this.state;this.manipulate(e),this._state="select","creating"===f?(this.deselect(),this.onConnectorCreated&&this.onConnectorCreated(this)):"move"===f?(this.deselect(),this.connector.adjustPoints(),this.connector.adjustVisual(),this.onConnectorUpdated&&this.onConnectorUpdated(this),this.activeGrip=void 0):this.isDraggingLabel&&(this.connector.adjustPoints(),this.connector.adjustVisual(),this.isDraggingLabel=!1),o.setAttributes(this.connector.container,[["pointer-events","auto"]])}showTextEditor(){this._state="edit",this.overlayContainer.innerHTML="",this.textBlockEditor.text=this.connector.labelText,this.positionTextEditor(),this.textBlockEditor.onTextChanged=this.textChanged,this.overlayContainer.appendChild(this.textBlockEditor.getEditorUi()),this.textBlockEditor.focus(),document.execCommand("selectAll")}positionTextEditor(){"edit"===this.state&&(this.textBlockEditor.width=100,this.textBlockEditor.height=50,this.textBlockEditor.left=this.connector.textBoundingBox.x+this.connector.textBlock.offsetX+this.connector.textBoundingBox.width/2-this.textBlockEditor.width/2,this.textBlockEditor.top=this.connector.textBoundingBox.y+this.connector.textBlock.offsetY+this.connector.textBoundingBox.height/2-this.textBlockEditor.height/2,this.connector.textBlock.hide())}textChanged(e){this.connector.labelText=e.trim(),this.overlayContainer.innerHTML="",this.connector.textBlock.show()}get propertyPanels(){return[this.arrowTypePanel,this.strokePanel,this.lineWidthPanel,this.lineStylePanel]}dispose(){}scale(e,f){this.connector.scale(e,f),this.adjustControlBox()}restoreState(e,f){this.connector.restoreState(e,f),this.adjustControlBox(),this._state="select"}}class z{constructor(e){this.PORT_SIZE=5,this.port=e,this.visual=o.createGroup(),this.visual.appendChild(o.createCircle(1.5*this.PORT_SIZE,[["fill","transparent"]])),this.visual.appendChild(o.createCircle(this.PORT_SIZE,[["fill","#88ccff"],["stroke","#338833"],["stroke-width","2"],["stroke-opacity","0.7"]])),this.ownsTarget=this.ownsTarget.bind(this),this.adjustVisual=this.adjustVisual.bind(this)}ownsTarget(e){return e===this.visual||e===this.visual.childNodes[0]||e===this.visual.childNodes[1]}adjustVisual(){const e=this.visual.transform.baseVal.getItem(0);e.setTranslate(this.port.x-this.PORT_SIZE/2,this.port.y-this.PORT_SIZE/2),this.visual.transform.baseVal.replaceItem(e,0)}}class F extends T{constructor(e,f,B){super(e,f),this.fillPanelsEnabled=!0,this.strokePanelsEnabled=!0,this.strokeColorChanged=this.strokeColorChanged.bind(this),this.fillColorChanged=this.fillColorChanged.bind(this),this.lineStyleChanged=this.lineStyleChanged.bind(this),this.lineWidthChanged=this.lineWidthChanged.bind(this),this.strokeColor=B.strokeColor,this.strokePanel=new P("Line color",this.language,B.strokeColors,this.strokeColor),this.strokePanel.onColorChanged=this.strokeColorChanged,this.fillColor=B.fillColor,this.fillPanel=new P("Fill color",this.language,B.fillColors,this.fillColor),this.fillPanel.onColorChanged=this.fillColorChanged,this.lineStyle=B.lineStyle,this.lineStylePanel=new I("Line style",this.language,"stroke-dasharray",B.lineStyles,this.lineStyle),this.lineStylePanel.lineAttributes=[["stroke-width","3"]],this.lineStylePanel.onLineStyleChanged=this.lineStyleChanged,this.lineWidth=B.lineWidth,this.lineWidthPanel=new I("Line width",this.language,"stroke-width",B.lineWidths,this.lineWidth),this.lineWidthPanel.onLineStyleChanged=this.lineWidthChanged}getUi(){var e,f,B,J;function n(e){const f=document.createElement("h3");return f.innerText=e,f}const lt=document.createElement("div");return this.strokePanelsEnabled&&(lt.appendChild(n(null!==(e=this.language.getString("toolbox-linecolor-title"))&&void 0!==e?e:"Line color")),this.strokePanel.currentColor=this.strokeColor,lt.appendChild(this.strokePanel.getUi())),this.fillPanelsEnabled&&(lt.appendChild(n(null!==(f=this.language.getString("toolbox-fillcolor-title"))&&void 0!==f?f:"Fill color")),this.fillPanel.currentColor=this.fillColor,lt.appendChild(this.fillPanel.getUi())),this.strokePanelsEnabled&&(lt.appendChild(n(null!==(B=this.language.getString("toolbox-linewidth-title"))&&void 0!==B?B:"Line width")),this.lineWidthPanel.currentStyle=this.lineWidth,lt.appendChild(this.lineWidthPanel.getUi())),this.strokePanelsEnabled&&(lt.appendChild(n(null!==(J=this.language.getString("toolbox-linestyle-title"))&&void 0!==J?J:"Line style")),this.lineStylePanel.currentStyle=this.lineStyle,lt.appendChild(this.lineStylePanel.getUi())),lt}strokeColorChanged(e){this.onStrokeColorChanged&&this.onStrokeColorChanged(e)}fillColorChanged(e){this.onFillColorChanged&&this.onFillColorChanged(e)}lineStyleChanged(e){this.onLineStyleChanged&&this.onLineStyleChanged(e)}lineWidthChanged(e){this.onLineWidthChanged&&this.onLineWidthChanged(e)}}class U{constructor(e){var f,B;this._state="new",this.resizeGrips=new Map([["topleft",new L],["topcenter",new L],["topright",new L],["leftcenter",new L],["rightcenter",new L],["bottomleft",new L],["bottomcenter",new L],["bottomright",new L]]),this.portConnectors=new Map,this._controlBox=o.createGroup(),this._gripBox=o.createGroup(),this.CB_DISTANCE=10,this._portBox=o.createGroup(),this.manipulationStartLeft=0,this.manipulationStartTop=0,this.manipulationStartWidth=0,this.manipulationStartHeight=0,this.manipulationStartX=0,this.manipulationStartY=0,this.offsetX=0,this.offsetY=0,this._suppressStencilCreateEvent=!1,this._isSelected=!1,this._isFocused=!1,this._container=e.container,this._overlayContainer=e.overlayContainer,this._stencilType=e.stencilType,this._settings=e.settings,this._language=e.language,this._stencil=null!==(f=e.stencil)&&void 0!==f?f:new e.stencilType(e.iid,e.container,this.settings),this.shapePanel=new F(null!==(B=this._language.getString("toolbox-shape-title"))&&void 0!==B?B:"Shape",this._language,{strokeColors:this.settings.getColorSet(this.stencil.typeName,"stroke"),strokeColor:this.settings.getColor(this.stencil.typeName,"stroke"),fillColors:this.settings.getColorSet(this.stencil.typeName,"fill"),fillColor:this.settings.getColor(this.stencil.typeName,"fill"),lineStyles:this.settings.getDashArrays(this.stencil.typeName),lineStyle:this.settings.getDashArray(this.stencil.typeName),lineWidths:this.settings.getStrokeWidths(this.stencil.typeName),lineWidth:this.settings.getStrokeWidth(this.stencil.typeName)}),this.shapePanel.fillPanelsEnabled=this.stencil.fillEditable,this.shapePanel.strokePanelsEnabled=this.stencil.strokeEditable,this.shapePanel.onStrokeColorChanged=this._stencil.setStrokeColor,this.shapePanel.onFillColorChanged=this._stencil.setFillColor,this.shapePanel.onLineStyleChanged=this._stencil.setStrokeDasharray,this.shapePanel.onLineWidthChanged=this._stencil.setStrokeWidth,this.findGripByVisual=this.findGripByVisual.bind(this),this.ownsTarget=this.ownsTarget.bind(this),this.switchToConnectMode=this.switchToConnectMode.bind(this),this.switchConnectModeOff=this.switchConnectModeOff.bind(this),this.setupVisuals=this.setupVisuals.bind(this),this.setupControlBox=this.setupControlBox.bind(this),this.setupPortBox=this.setupPortBox.bind(this),this.addResizeGrips=this.addResizeGrips.bind(this),this.addPorts=this.addPorts.bind(this),this.positionGrips=this.positionGrips.bind(this),this.positionPorts=this.positionPorts.bind(this),this.positionGrip=this.positionGrip.bind(this),this.hideControlBox=this.hideControlBox.bind(this),this.showControlBox=this.showControlBox.bind(this),this.hidePortBox=this.hidePortBox.bind(this),this.showPortBox=this.showPortBox.bind(this),this.adjustControlBox=this.adjustControlBox.bind(this),this.adjustPortBox=this.adjustPortBox.bind(this),this.select=this.select.bind(this),this.deselect=this.deselect.bind(this),this.focus=this.focus.bind(this),this.blur=this.blur.bind(this),this.initManipulation=this.initManipulation.bind(this),this.create=this.create.bind(this),this.moveStencilTo=this.moveStencilTo.bind(this)}get stencil(){return this._stencil}get container(){return this._container}get overlayContainer(){return this._overlayContainer}get state(){return this._state}set state(e){this._state=e}get settings(){return this._settings}ownsTarget(e){var f;let B=!1;if(null!==e){if(null===(f=this._stencil)||void 0===f?void 0:f.ownsTarget(e))return!0;this.resizeGrips.forEach((f=>{f.ownsTarget(e)&&(B=!0)})),B||this.portConnectors.forEach((f=>{f.ownsTarget(e)&&(B=!0)}))}return B}getTargetPort(e,f=!0,B=1){let J;if(null!==e&&null!==e.target&&(this.portConnectors.forEach((f=>{f.port.enabled&&f.ownsTarget(e.target)&&(J=f)})),void 0===J&&!f)){const f=o.clientToLocalCoordinates(this.container,e.clientX,e.clientY,B);let lt=Number.MAX_VALUE;this.portConnectors.forEach((e=>{if(e.port.enabled){const B=Math.sqrt(Math.pow(f.x-e.port.x,2)+Math.pow(f.y-e.port.y,2));B<lt&&(J=e,lt=B)}}))}return J}setupVisuals(){this._stencil.createVisual(),this.setupPortBox(),this.setupControlBox()}setupControlBox(){if(void 0!==this._stencil){this._controlBox.classList.add("control-box");const e=o.createTransform();e.setTranslate(-this.CB_DISTANCE/2,-this.CB_DISTANCE/2),this._controlBox.transform.baseVal.appendItem(e),this.container.appendChild(this._controlBox),this._controlRect=o.createRect(this._stencil.width+this.CB_DISTANCE,this._stencil.height+this.CB_DISTANCE,[["stroke","black"],["stroke-width","1"],["stroke-opacity","0.5"],["stroke-dasharray","3, 2"],["fill","transparent"],["pointer-events","none"]]),this._controlBox.appendChild(this._controlRect),this.addResizeGrips(),this._controlBox.style.display="none"}}setupPortBox(){if(void 0!==this._stencil){this._stencil.ports.forEach(((e,f)=>{this.portConnectors.set(f,new z(e))})),this._portBox.classList.add("port-box");const e=o.createTransform();e.setTranslate(0,0),this._portBox.transform.baseVal.appendItem(e),this._connectorOutline=o.createPath(this._stencil.getSelectorPathD(this._stencil.width,this._stencil.height),[["stroke","#33ff33"],["stroke-width","6"],["stroke-opacity","0.5"],["fill","transparent"],["pointer-events","none"]]),this._portBox.appendChild(this._connectorOutline),this.container.appendChild(this._portBox),this.addPorts(),this._portBox.style.display="none"}}addResizeGrips(){this._controlBox.appendChild(this._gripBox),this.resizeGrips.forEach((e=>{e.enabled&&(e.visual.transform.baseVal.appendItem(o.createTransform()),this._gripBox.appendChild(e.visual))})),this.positionGrips()}addPorts(){this.portConnectors.forEach((e=>{e.port.enabled&&(e.visual.transform.baseVal.appendItem(o.createTransform()),this._portBox.appendChild(e.visual))})),this.positionPorts()}positionGrips(){var e,f,B,J,lt,Ct,vt,St,wt;if(this._stencil){const zt=(null===(e=this.resizeGrips.get("topleft"))||void 0===e?void 0:e.GRIP_SIZE)||10,Ft=-zt/2,Qt=Ft,Wt=(this._stencil.width+this.CB_DISTANCE)/2-zt/2,Ot=(this._stencil.height+this.CB_DISTANCE)/2-zt/2,Gt=this._stencil.height+this.CB_DISTANCE-zt/2,Rt=this._stencil.width+this.CB_DISTANCE-zt/2;this.positionGrip(null===(f=this.resizeGrips.get("topleft"))||void 0===f?void 0:f.visual,Ft,Qt),this.positionGrip(null===(B=this.resizeGrips.get("topcenter"))||void 0===B?void 0:B.visual,Wt,Qt),this.positionGrip(null===(J=this.resizeGrips.get("topright"))||void 0===J?void 0:J.visual,Rt,Qt),this.positionGrip(null===(lt=this.resizeGrips.get("leftcenter"))||void 0===lt?void 0:lt.visual,Ft,Ot),this.positionGrip(null===(Ct=this.resizeGrips.get("rightcenter"))||void 0===Ct?void 0:Ct.visual,Rt,Ot),this.positionGrip(null===(vt=this.resizeGrips.get("bottomleft"))||void 0===vt?void 0:vt.visual,Ft,Gt),this.positionGrip(null===(St=this.resizeGrips.get("bottomcenter"))||void 0===St?void 0:St.visual,Wt,Gt),this.positionGrip(null===(wt=this.resizeGrips.get("bottomright"))||void 0===wt?void 0:wt.visual,Rt,Gt)}}positionPorts(){this._stencil&&(this._stencil.positionPorts(),this.portConnectors.forEach((e=>{e.port.enabled&&e.adjustVisual()})))}positionGrip(e,f,B){if(void 0!==e){const J=e.transform.baseVal.getItem(0);J.setTranslate(f,B),e.transform.baseVal.replaceItem(J,0)}}hideControlBox(){this._controlBox.style.display="none"}showControlBox(){this._controlBox.style.display=""}hidePortBox(){this._portBox.style.display="none"}showPortBox(){this._portBox.style.display=""}adjustControlBox(){var e,f;if(void 0!==this._stencil){const B=this._controlBox.transform.baseVal.getItem(0);B.setTranslate(this._stencil.left-this.CB_DISTANCE/2,this._stencil.top-this.CB_DISTANCE/2),this._controlBox.transform.baseVal.replaceItem(B,0),null===(e=this._controlRect)||void 0===e||e.setAttribute("width",(this._stencil.width+this.CB_DISTANCE).toString()),null===(f=this._controlRect)||void 0===f||f.setAttribute("height",(this._stencil.height+this.CB_DISTANCE).toString()),this.positionGrips()}}adjustPortBox(){if(void 0!==this._stencil){const e=this._portBox.transform.baseVal.getItem(0);e.setTranslate(this._stencil.left,this._stencil.top),this._portBox.transform.baseVal.replaceItem(e,0),void 0!==this._connectorOutline&&o.setAttributes(this._connectorOutline,[["d",this._stencil.getSelectorPathD(this._stencil.width,this._stencil.height)]]),this.positionPorts()}}switchToConnectMode(){this._state="connect",this.hideControlBox(),this.showPortBox()}switchConnectModeOff(){"connect"===this._state&&(this._state="select",this.hidePortBox())}scale(e,f){var B;null===(B=this._stencil)||void 0===B||B.scale(e,f),this.adjustControlBox(),this.adjustPortBox(),this.onStencilChanged&&this.onStencilChanged(this)}initManipulation(e){this.manipulationStartLeft=this._stencil.left,this.manipulationStartTop=this._stencil.top,this.manipulationStartWidth=this._stencil.width,this.manipulationStartHeight=this._stencil.height,this.manipulationStartX=e.x,this.manipulationStartY=e.y,this.offsetX=e.x-this._stencil.left,this.offsetY=e.y-this._stencil.top}pointerDown(e,f){void 0!==this._stencil&&(this.initManipulation(e),"new"!==this.state&&(this.activeGrip=this.findGripByVisual(f),void 0!==this.activeGrip?this._state="resize":this._state="move"))}dblClick(e,f){}findGripByVisual(e){let f;return this.resizeGrips.forEach((B=>{B.ownsTarget(e)&&(f=B)})),f}moveStencilTo(e,f){void 0!==e&&(this._stencil.left=e),void 0!==f&&(this._stencil.top=f),this._stencil.moveVisual({x:this._stencil.left,y:this._stencil.top}),this.adjustControlBox(),this.adjustPortBox(),this.onStencilChanged&&this.onStencilChanged(this)}manipulate(e){this._stencil&&("move"===this.state?(this._stencil.left=this.manipulationStartLeft+(e.x-this.manipulationStartLeft)-this.offsetX,this._stencil.top=this.manipulationStartTop+(e.y-this.manipulationStartTop)-this.offsetY,this.moveStencilTo()):"resize"===this.state&&(this.resize(e),this.onStencilChanged&&this.onStencilChanged(this)))}resize(e){if(this._stencil){let f=this.manipulationStartLeft,B=this.manipulationStartWidth,J=this.manipulationStartTop,lt=this.manipulationStartHeight;switch(this.activeGrip){case this.resizeGrips.get("bottomleft"):case this.resizeGrips.get("leftcenter"):case this.resizeGrips.get("topleft"):f=this.manipulationStartLeft+e.x-this.manipulationStartX,B=this.manipulationStartWidth+this.manipulationStartLeft-f;break;case this.resizeGrips.get("bottomright"):case this.resizeGrips.get("rightcenter"):case this.resizeGrips.get("topright"):case void 0:B=this.manipulationStartWidth+e.x-this.manipulationStartX}switch(this.activeGrip){case this.resizeGrips.get("topcenter"):case this.resizeGrips.get("topleft"):case this.resizeGrips.get("topright"):J=this.manipulationStartTop+e.y-this.manipulationStartY,lt=this.manipulationStartHeight+this.manipulationStartTop-J;break;case this.resizeGrips.get("bottomcenter"):case this.resizeGrips.get("bottomleft"):case this.resizeGrips.get("bottomright"):case void 0:lt=this.manipulationStartHeight+e.y-this.manipulationStartY}B>=0?(this._stencil.left=f,this._stencil.width=B):(this._stencil.left=f+B,this._stencil.width=-B),lt>=0?(this._stencil.top=J,this._stencil.height=lt):(this._stencil.top=J+lt,this._stencil.height=-lt),this.setSize()}}setSize(){this._stencil&&this._stencil.setSize(),this.adjustControlBox(),this.adjustPortBox()}pointerUp(e){this._stencil&&(this._state="select",this.manipulate(e))}create(e){if(void 0!==this._stencil&&"new"===this.state){this.setupVisuals();const f={x:e.x-this._stencil.defaultSize.width/2,y:e.y-this._stencil.defaultSize.height/2};this._stencil.left=f.x,this._stencil.top=f.y,this._stencil.moveVisual(f),this._stencil.width=this._stencil.defaultSize.width,this._stencil.height=this._stencil.defaultSize.height,this._state="select",this.onStencilCreated&&!1===this._suppressStencilCreateEvent&&this.onStencilCreated(this)}}get isSelected(){return this._isSelected}get isFocused(){return this._isFocused}select(){this.container.style.cursor="move",this._isSelected=!0,this.adjustControlBox(),this._controlBox.style.display="",this._controlRect&&(this._controlRect.style.display=""),this._gripBox.style.display="none"}deselect(){this.container.style.cursor="default",this._isSelected=!1,this._controlBox.style.display="none",this.blur()}focus(){this.select(),this._isFocused=!0,this._gripBox.style.display=""}blur(){this._gripBox.style.display="none",this._isFocused=!1}get propertyPanels(){return this.shapePanel.fillColor=this.stencil.fillColor,this.shapePanel.strokeColor=this.stencil.strokeColor,[this.shapePanel]}restoreState(e){this.stencil.restoreState(e),this.setupControlBox(),this.setupPortBox(),this.adjustControlBox(),this.adjustPortBox(),this._state="select"}}class N{constructor(e,f){this.defaultStencilEditor=U,this.defaultConnectorEditor=D,this.availableConnectorTypes=[v],this.defaultConnectorType=v,this.id=e,this.stencilSet=f,this.getStencilEditor=this.getStencilEditor.bind(this),this.getConnectorEditor=this.getConnectorEditor.bind(this),this.addStencilEditor=this.addStencilEditor.bind(this),this.addConnectorEditor=this.addConnectorEditor.bind(this),this.stencilEditorTypes=new Map,this.connectorEditorTypes=new Map}getStencilEditor(e){var f;return null!==(f=this.stencilEditorTypes.get(e))&&void 0!==f?f:this.defaultStencilEditor}getConnectorEditor(e){var f;return null!==(f=this.connectorEditorTypes.get(e))&&void 0!==f?f:this.defaultConnectorEditor}addStencilEditor(e,...f){f.forEach((f=>{this.stencilEditorTypes.set(f,e)}))}addConnectorEditor(e,...f){f.forEach((f=>{this.connectorEditorTypes.set(f,e)}))}}class j extends T{constructor(e,f,B,J,lt){super(e,f),this.fontFamilies=[],this.currentFontSize={value:1,units:"rem",step:.1},this.setFontFamily=this.setFontFamily.bind(this),this.setFontSize=this.setFontSize.bind(this),this.fontFamilies=B,this.currentFontFamily=J,void 0!==lt&&(this.currentFontSize=lt)}getUi(){var e,f;const B=document.createElement("div");B.style.display="flex",B.style.justifyContent="space-between";const J=document.createElement("select");J.addEventListener("change",(e=>{this.setFontFamily(e.target.value)})),J.style.flexGrow="2",J.style.marginRight="5px",B.appendChild(J),this.fontFamilies.forEach((e=>{const f=document.createElement("option");f.label=e.label,f.value=e.value,f.selected=e.value===this.currentFontFamily,f.style.fontFamily=e.value,f.style.fontSize="1.1rem",J.appendChild(f)}));const lt=document.createElement("div");lt.style.display="flex",B.appendChild(lt);const Ct=document.createElement("button");Ct.style.display="flex",Ct.style.alignItems="center",Ct.style.width="24px",Ct.style.height="24px",Ct.style.padding="3px",Ct.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M5.12,14L7.5,7.67L9.87,14M6.5,5L1,19H3.25L4.37,16H10.62L11.75,19H14L8.5,5H6.5M18,17L23,11.93L21.59,10.5L19,13.1V7H17V13.1L14.41,10.5L13,11.93L18,17Z" /></svg>',Ct.title=null!==(e=this.language.getString("toolbox-decreasefontsize-title"))&&void 0!==e?e:"decrease font size",Ct.addEventListener("click",(()=>this.setFontSize(-1))),lt.appendChild(Ct);const vt=document.createElement("button");return vt.style.display="flex",vt.style.alignItems="center",vt.style.width="24px",vt.style.height="24px",vt.style.padding="3px",vt.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M5.12,14L7.5,7.67L9.87,14M6.5,5L1,19H3.25L4.37,16H10.62L11.75,19H14L8.5,5H6.5M18,7L13,12.07L14.41,13.5L17,10.9V17H19V10.9L21.59,13.5L23,12.07L18,7Z" /></svg>',vt.title=null!==(f=this.language.getString("toolbox-increasefontsize-title"))&&void 0!==f?f:"increase font size",vt.addEventListener("click",(()=>this.setFontSize(1))),lt.appendChild(vt),B}setFontFamily(e){this.currentFontFamily=e,this.onFontFamilyChanged&&this.onFontFamilyChanged(e)}setFontSize(e){this.currentFontSize.value+=this.currentFontSize.step*e,this.onFontSizeChanged&&this.onFontSizeChanged(this.currentFontSize)}}class Q extends T{constructor(e,f,B){super(e,f),this.colorChanged=this.colorChanged.bind(this),this.fontFamilyChanged=this.fontFamilyChanged.bind(this),this.fontSizeChanged=this.fontSizeChanged.bind(this),this.textColor=B.textColor,this.colorPanel=new P("Color",this.language,B.textColors,this.textColor),this.colorPanel.onColorChanged=this.colorChanged,this.fontFamily=B.fontFamily,this.fontPanel=new j("Font",this.language,B.fontFamilies,this.fontFamily,this.fontSize),this.fontPanel.onFontFamilyChanged=this.fontFamilyChanged,this.fontPanel.onFontSizeChanged=this.fontSizeChanged}getUi(){var e,f;function i(e){const f=document.createElement("h3");return f.innerText=e,f}const B=document.createElement("div");return B.appendChild(i(null!==(e=this.language.getString("toolbox-textcolor-title"))&&void 0!==e?e:"Text color")),this.colorPanel.currentColor=this.textColor,B.appendChild(this.colorPanel.getUi()),B.appendChild(i(null!==(f=this.language.getString("toolbox-font-title"))&&void 0!==f?f:"Font")),this.fontPanel.currentFontFamily=this.fontFamily,void 0!==this.fontSize&&(this.fontPanel.currentFontSize=this.fontSize),B.appendChild(this.fontPanel.getUi()),B}colorChanged(e){this.onColorChanged&&this.onColorChanged(e)}fontFamilyChanged(e){this.onFontFamilyChanged&&this.onFontFamilyChanged(e)}fontSizeChanged(e){this.onFontSizeChanged&&this.onFontSizeChanged(e)}}class W extends U{constructor(e){var f;super(e),this.isMoved=!1,this.textBlockEditor=new H,this.setColor=this.setColor.bind(this),this.setFont=this.setFont.bind(this),this.textChanged=this.textChanged.bind(this),this.showTextEditor=this.showTextEditor.bind(this),this.setSize=this.setSize.bind(this),this.positionTextEditor=this.positionTextEditor.bind(this),this.textPanel=new Q(null!==(f=this._language.getString("toolbox-text-title"))&&void 0!==f?f:"Text",this._language,{textColors:this.settings.getColorSet(this.stencil.typeName,"text"),textColor:this.settings.getColor(this.stencil.typeName,"text"),fontFamilies:this.settings.getFontFamilies(this.stencil.typeName),fontFamily:this.settings.getFontFamily(this.stencil.typeName),fontSize:this.settings.getFontSize(this.stencil.typeName)}),this.textPanel.onColorChanged=this._stencil.setColor,this.textPanel.onFontFamilyChanged=this._stencil.setFont,this.textPanel.onFontSizeChanged=this._stencil.setFontSize,this._suppressStencilCreateEvent=!0}get stencil(){return this._stencil}get propertyPanels(){return[...super.propertyPanels,this.textPanel]}pointerDown(e,f){super.pointerDown(e,f),this.isMoved=!1,this.pointerDownPoint=e,this.pointerDownTimestamp=Date.now()}dblClick(e,f){super.dblClick(e,f),this.showTextEditor()}manipulate(e){super.manipulate(e),void 0!==this.pointerDownPoint&&(this.isMoved=Math.abs(e.x-this.pointerDownPoint.x)>5||Math.abs(e.y-this.pointerDownPoint.y)>5)}resize(e){super.resize(e),this.isMoved=!0,this.setSize()}pointerUp(e){super.pointerUp(e),this.setSize(),this.pointerDownPoint=void 0}showTextEditor(){this._state="edit",this.overlayContainer.innerHTML="",this.textBlockEditor.text=this.stencil.text,this.textBlockEditor.fontFamily=this.stencil.fontFamily,this.textBlockEditor.fontSize=`${this.stencil.fontSize.value}${this.stencil.fontSize.units}`,this.textBlockEditor.textColor=this.stencil.textBlock.color,this.positionTextEditor(),this.textBlockEditor.onTextChanged=this.textChanged,this.overlayContainer.appendChild(this.textBlockEditor.getEditorUi()),this.hideVisual(),this.textBlockEditor.focus(),document.execCommand("selectAll")}positionTextEditor(){"edit"===this.state&&(this.textBlockEditor.left=this.stencil.left+this.stencil.textBoundingBox.left,this.textBlockEditor.top=this.stencil.top+this.stencil.textBoundingBox.top,this.textBlockEditor.width=this.stencil.textBoundingBox.width,this.textBlockEditor.height=this.stencil.textBoundingBox.height)}textChanged(e){this.stencil.text=e.trim(),this.overlayContainer.innerHTML="",this.stencil.textBlock.show(),this.showVisual(),this._suppressStencilCreateEvent&&(this._suppressStencilCreateEvent=!1,this.onStencilCreated&&this.onStencilCreated(this))}create(e){super.create(e),this.setSize(),this._suppressStencilCreateEvent&&this.showTextEditor(),this.setFont(this.settings.getFontFamily(this.stencil.typeName)),this.setColor(this.settings.getColor(this.stencil.typeName,"text"))}select(){super.select(),"edit"===this.state&&this.textBlockEditor.blur()}deselect(){"edit"===this.state&&this.textBlockEditor.blur(),super.deselect()}setColor(e){this.stencil.setColor(e),this.textBlockEditor.textColor=e}setFont(e){this.stencil.setFont(e),this.textBlockEditor.fontFamily=e}hideVisual(){this.stencil.textBlock.hide(),this.hideControlBox()}showVisual(){"edit"===this.state&&(this._state="select"),this.stencil.textBlock.show(),this.showControlBox()}scale(e,f){super.scale(e,f),this.positionTextEditor()}restoreState(e){super.restoreState(e)}}class O extends W{}class G extends T{constructor(e,f,B){super(e,f),this.currentImageSrc=B,this.getUi=this.getUi.bind(this),this.imageFileSelected=this.imageFileSelected.bind(this),this.setImageSrc=this.setImageSrc.bind(this)}getUi(){var e,f;const B=document.createElement("div");return B.style.display="flex",B.style.justifyContent="space-between",this.imageFileSelector=document.createElement("input"),this.imageFileSelector.type="file",this.imageFileSelector.accept="image/gif, image/jpeg, image/png",this.imageFileSelector.style.visibility="hidden",this.imageFileSelector.style.width="0px",this.imageFileSelector.style.height="0px",this.imageFileSelector.addEventListener("change",this.imageFileSelected),B.appendChild(this.imageFileSelector),this.removeButton=document.createElement("button"),this.removeButton.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24 width="24" height="24" style="margin: -3px;"><title>close</title><path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" /></svg>',this.removeButton.style.width="24px",this.removeButton.style.height="24px",this.removeButton.style.alignSelf="flex-start",this.removeButton.style.margin="3px",this.removeButton.style.backgroundColor="var(--i-mjsdiae-accent-color)",this.removeButton.style.borderRadius="50%",this.removeButton.addEventListener("click",(e=>{this.setImageSrc(),e.stopPropagation()})),this.selectMessageLabel=document.createElement("span"),this.selectMessageLabel.style.width="100%",this.selectMessageLabel.style.textAlign="center",this.selectMessageLabel.innerText=null!==(e=this.language.getString("toolbox-click-to-select-image"))&&void 0!==e?e:"click to select image",this.imagePreview=document.createElement("div"),this.imagePreview.appendChild(this.removeButton),this.imagePreview.appendChild(this.selectMessageLabel),this.imagePreview.style.display="flex",this.imagePreview.style.alignItems="center",this.imagePreview.style.justifyContent="right",this.imagePreview.style.width="200px",this.imagePreview.style.height="200px",this.imagePreview.style.border="1px solid var(--i-mjsdiae-accent-color)",this.imagePreview.style.margin="5px auto",this.imagePreview.title=null!==(f=this.language.getString("toolbox-image-title"))&&void 0!==f?f:"image",void 0!==this.currentImageSrc?(this.imagePreview.style.backgroundImage=`url(${this.currentImageSrc})`,this.removeButton.style.display="",this.selectMessageLabel.style.display="none"):(this.removeButton.style.display="none",this.selectMessageLabel.style.display=""),this.imagePreview.style.backgroundSize="contain",this.imagePreview.style.backgroundRepeat="no-repeat",this.imagePreview.style.backgroundPosition="center",this.imagePreview.addEventListener("click",(()=>{var e;return null===(e=this.imageFileSelector)||void 0===e?void 0:e.click()})),B.appendChild(this.imagePreview),B}imageFileSelected(){if(this.imageFileSelector&&this.imageFileSelector.files&&this.imageFileSelector.files[0]){const e=new FileReader;e.addEventListener("load",(e=>{var f;(null===(f=e.target)||void 0===f?void 0:f.result)&&"string"==typeof e.target.result&&(this.imagePreview&&(this.imagePreview.style.backgroundImage=`url(${e.target.result})`),this.setImageSrc(e.target.result))})),e.readAsDataURL(this.imageFileSelector.files[0])}}setImageSrc(e){this.currentImageSrc=e,this.selectMessageLabel&&this.removeButton&&(void 0!==e?(this.selectMessageLabel.style.display="none",this.removeButton.style.display=""):(this.selectMessageLabel.style.display="",this.removeButton.style.display="none",this.imagePreview&&(this.imagePreview.style.backgroundImage=""))),this.onImageChanged&&this.onImageChanged(e)}}class R extends T{constructor(e,f,B){super(e,f),this.locationIcons=new Map([["top",'<path d="M4 20H20C21.11 20 22 19.11 22 18V6C22 4.89 21.11 4 20 4H4C2.9 4 2 4.89 2 6V18C2 19.11 2.9 20 4 20M4 11H20V18H4V11Z" />'],["right",'<path d="M20 4H4A2 2 0 0 0 2 6V18A2 2 0 0 0 4 20H20A2 2 0 0 0 22 18V6A2 2 0 0 0 20 4M15 18H4V6H15Z" />'],["bottom",'<path d="M20 4H4A2 2 0 0 0 2 6V18A2 2 0 0 0 4 20H20A2 2 0 0 0 22 18V6A2 2 0 0 0 20 4M20 13H4V6H20Z" />'],["left",'<path d="M20 4H4A2 2 0 0 0 2 6V18A2 2 0 0 0 4 20H20A2 2 0 0 0 22 18V6A2 2 0 0 0 20 4M20 18H9V6H20Z" />'],["hidden",'<path d="M2,5.27L3.28,4L20,20.72L18.73,22L15.65,18.92C14.5,19.3 13.28,19.5 12,19.5C7,19.5 2.73,16.39 1,12C1.69,10.24 2.79,8.69 4.19,7.46L2,5.27M12,9A3,3 0 0,1 15,12C15,12.35 14.94,12.69 14.83,13L11,9.17C11.31,9.06 11.65,9 12,9M12,4.5C17,4.5 21.27,7.61 23,12C22.18,14.08 20.79,15.88 19,17.19L17.58,15.76C18.94,14.82 20.06,13.54 20.82,12C19.17,8.64 15.76,6.5 12,6.5C10.91,6.5 9.84,6.68 8.84,7L7.3,5.47C8.74,4.85 10.33,4.5 12,4.5M3.18,12C4.83,15.36 8.24,17.5 12,17.5C12.69,17.5 13.37,17.43 14,17.29L11.72,15C10.29,14.85 9.15,13.71 9,12.28L5.6,8.87C4.61,9.72 3.78,10.78 3.18,12Z" />']]),this.locationBoxes=[],this.currentLocation=B,this.setCurrentLocation=this.setCurrentLocation.bind(this),this.getLocationBox=this.getLocationBox.bind(this),this.selectLocation=this.selectLocation.bind(this)}getUi(){this.locationBoxes.length>0&&this.locationBoxes.splice(0,this.locationBoxes.length);const e=document.createElement("div");return e.style.display="flex",e.style.justifyContent="stretch",this.locationIcons.forEach(((f,B)=>{const J=this.getLocationBox(B,f),lt=J.getUi();lt.style.stroke="",lt.style.fill="var(--i-mjsdiae-accent-color)",e.appendChild(lt),this.locationBoxes.push(J)})),e}getLocationBox(e,f){const B=30,J=120,lt=document.createElementNS("http://www.w3.org/2000/svg","svg");lt.setAttribute("xmlns","http://www.w3.org/2000/svg"),lt.setAttribute("width",J.toString()),lt.setAttribute("height",B.toString()),lt.setAttribute("viewBox","0 0 24 24"),lt.innerHTML=f;const Ct=new V;return Ct.width=J,Ct.height=B,Ct.content=lt,Ct.dataItem=e,Ct.isSelected=e===this.currentLocation,Ct.onClick=this.setCurrentLocation,Ct}setCurrentLocation(e){this.currentLocation=e.dataItem,this.locationBoxes.forEach((e=>{e.isSelected=e.dataItem===this.currentLocation})),this.onLabelLocationChanged&&void 0!==this.currentLocation&&this.onLabelLocationChanged(this.currentLocation)}selectLocation(e){this.locationBoxes.forEach((f=>{f.dataItem===e?(this.currentLocation=e,f.isSelected=!0):f.isSelected=!1}))}}class Y extends W{constructor(e){var f,B;super(e),this.imagePanel=new G(null!==(f=this._language.getString("toolbox-image-title"))&&void 0!==f?f:"Image",this._language,this._stencil.imageSrc),this.imagePanel.onImageChanged=this._stencil.setImageSrc,this.labelLocationPanel=new R(null!==(B=this._language.getString("toolbox-label-location-title"))&&void 0!==B?B:"Text location",this._language,this._stencil.labelLocation),this.labelLocationPanel.onLabelLocationChanged=this._stencil.setLabelLocation,this._suppressStencilCreateEvent=!1}get propertyPanels(){return[this.imagePanel,this.labelLocationPanel,...super.propertyPanels]}restoreState(e){this.imagePanel.currentImageSrc=e.imageSrc,super.restoreState(e)}}const Ct=new N("core",J);Ct.displayName="Basic stencil set",Ct.defaultStencilEditor=W,Ct.addStencilEditor(O,p),Ct.addStencilEditor(Y,C),Ct.availableConnectorTypes=[v,A,b],Ct.defaultConnectorType=b,Ct.newDocumentTemplate={width:640,height:360,stencils:[{color:"#000000",fontFamily:"Helvetica, Arial, sans-serif",padding:5,text:"Welcome!",typeName:"RectangleTextStencil",iid:1,left:234.53121948242188,top:137.66664123535156,width:179.33331298828125,height:94.66671752929688,fillColor:"#eeeeee",strokeColor:"black",strokeWidth:1,strokeDasharray:""}],connectors:[]};class X{constructor(){this.imageType="image/png"}rasterize(e,f){return new Promise((B=>{const J=void 0!==f?f:document.createElement("canvas"),lt=document.createElementNS("http://www.w3.org/2000/svg","svg");lt.setAttribute("xmlns","http://www.w3.org/2000/svg"),lt.setAttribute("width",e.width.baseVal.valueAsString),lt.setAttribute("height",e.height.baseVal.valueAsString),lt.setAttribute("viewBox","0 0 "+e.viewBox.baseVal.width.toString()+" "+e.viewBox.baseVal.height.toString()),lt.style.backgroundColor=e.style.backgroundColor,lt.innerHTML=e.innerHTML;const Ct=o.createDefs();lt.insertBefore(Ct,lt.firstChild);const vt=document.createElementNS("http://www.w3.org/2000/svg","style");vt.setAttribute("type","text/css"),vt.innerHTML="\n                .control-box, .port-box {\n                    visibility: hidden;\n                }         \n            ",Ct.appendChild(vt),void 0!==this.width&&void 0!==this.height&&(lt.width.baseVal.value=this.width,lt.height.baseVal.value=this.height),J.width=lt.width.baseVal.value,J.height=lt.height.baseVal.value;const St=lt.outerHTML,wt=J.getContext("2d"),zt=window.URL,Ft=new Image(J.width,J.height);Ft.setAttribute("crossOrigin","anonymous");const Qt=new Blob([St],{type:"image/svg+xml"}),Wt=zt.createObjectURL(Qt);Ft.onload=()=>{var e;null!==wt&&wt.drawImage(Ft,0,0),zt.revokeObjectURL(Wt);const f=J.toDataURL(this.imageType,null!==(e=this.imageQuality)&&void 0!==e?e:1);B(f)},Ft.src=Wt}))}}class K{constructor(){this.undoStack=[],this.redoStack=[]}get isUndoPossible(){return this.undoStack.length>0}get isRedoPossible(){return this.redoStack.length>0}get undoStepCount(){return this.undoStack.length}get redoStepCount(){return this.redoStack.length}addUndoStep(e){return(0===this.undoStack.length||JSON.stringify(this.undoStack[this.undoStack.length-1])!==JSON.stringify(e))&&(this.undoStack.push(e),JSON.stringify(this.lastRedoStep)!==JSON.stringify(e)&&this.redoStack.splice(0,this.redoStack.length),!0)}replaceLastUndoStep(e){this.undoStack.length>0&&(this.undoStack[this.undoStack.length-1]=e)}getLastUndoStep(){return this.undoStack.length>0?this.undoStack[this.undoStack.length-1]:void 0}undo(){if(this.undoStack.length>1){const e=this.undoStack.pop();return void 0!==e&&this.redoStack.push(e),this.undoStack.length>0?this.undoStack[this.undoStack.length-1]:void 0}}redo(){return this.lastRedoStep=this.redoStack.pop(),this.lastRedoStep}}class Z extends T{constructor(e,f,B,J){super(e,f),this.connectorTypes=[],this.typeBoxes=[],this.connectorTypes=B,this.currentType=J,this.setCurrentType=this.setCurrentType.bind(this),this.getTypeBox=this.getTypeBox.bind(this),this.selectType=this.selectType.bind(this)}getUi(){this.typeBoxes.length>0&&this.typeBoxes.splice(0,this.typeBoxes.length);const e=document.createElement("div");return e.style.display="flex",e.style.flexWrap="wrap",this.connectorTypes.forEach((f=>{const B=this.getTypeBox(f);e.appendChild(B.getUi()),this.typeBoxes.push(B)})),e}getTypeBox(e){const f=e.getThumbnail(28,28),B=new V;return B.width=28,B.height=28,B.content=f,B.dataItem=e,B.isSelected=e===this.currentType,B.onClick=this.setCurrentType,B}setCurrentType(e){this.currentType=e.dataItem,this.typeBoxes.forEach((e=>{e.isSelected=e.dataItem===this.currentType})),this.onConnectorTypeChanged&&this.currentType&&this.onConnectorTypeChanged(this.currentType)}selectType(e){this.connectorTypes.forEach(((f,B)=>{f.typeName===e?(this.currentType=f,this.typeBoxes[B].isSelected=!0):this.typeBoxes[B].isSelected=!1}))}}class q extends T{constructor(e,f,B,J){super(e,f),this.stencilTypes=[],this.typeBoxes=[],this.stencilTypes=B,this.currentType=J,this.setCurrentType=this.setCurrentType.bind(this),this.getTypeBox=this.getTypeBox.bind(this),this.deselectType=this.deselectType.bind(this)}getUi(){this.typeBoxes.length>0&&this.typeBoxes.splice(0,this.typeBoxes.length);const e=document.createElement("div");return e.style.display="flex",e.style.flexWrap="wrap",e.style.color="#ccc",this.stencilTypes.forEach((f=>{const B=this.getTypeBox(f);e.appendChild(B),this.typeBoxes.push(B)})),e}getTypeBox(e){var f;const B=document.createElement("div");B.className="new-stencil-block",B.style.borderColor=e.stencilType===this.currentType?"var(--i-mjsdiae-accent-color)":"var(--i-mjsdiae-panel-separator-color)";const J=e.stencilType.getThumbnail(80,60);J.setAttribute("class","new-stencil-block-thumbnail"),B.appendChild(J);const lt=document.createElement("p");return lt.className="new-stencil-block-title",lt.innerText=null!==(f=e.displayName)&&void 0!==f?f:e.stencilType.title,lt.title=lt.innerText,B.appendChild(lt),B.addEventListener("pointerdown",(()=>{this.setCurrentType(e.stencilType,B)})),B}setCurrentType(e,f){this.currentType=e,this.typeBoxes.forEach((e=>{e.style.borderColor=e===f?"var(--i-mjsdiae-accent-color)":"var(--i-mjsdiae-panel-separator-color)"})),this.onCreateNewStencil&&this.onCreateNewStencil(e)}deselectType(){this.currentType=void 0,this.typeBoxes.forEach((e=>{e.style.borderColor="var(--i-mjsdiae-panel-separator-color)"}))}}class $ extends T{constructor(e,f){super(e,f),this.horizontalAlignmentClicked=this.horizontalAlignmentClicked.bind(this),this.verticalAlignmentClicked=this.verticalAlignmentClicked.bind(this)}getUi(){var e,f,B,J,lt,Ct;function r(e,f){const B=document.createElement("button");return B.style.display="flex",B.style.alignItems="center",B.style.width="24px",B.style.height="24px",B.style.padding="3px",B.innerHTML=e,B.title=f,B}const vt=document.createElement("div");vt.style.display="flex";const St=document.createElement("div");St.style.display="flex",St.style.marginRight="5px",vt.appendChild(St);const wt=r('<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24"><path d="M4 22H2V2H4V22M22 7H6V10H22V7M16 14H6V17H16V14Z" /></svg>',null!==(e=this.language.getString("toolbox-align-left"))&&void 0!==e?e:"Left");wt.addEventListener("click",(()=>this.horizontalAlignmentClicked("left"))),St.appendChild(wt);const zt=r('<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24"><path d="M11 2H13V7H21V10H13V14H18V17H13V22H11V17H6V14H11V10H3V7H11V2Z" /></svg>',null!==(f=this.language.getString("toolbox-align-center"))&&void 0!==f?f:"Center");zt.addEventListener("click",(()=>this.horizontalAlignmentClicked("center"))),St.appendChild(zt);const Ft=r('<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24"><path d="M20 2H22V22H20V2M2 10H18V7H2V10M8 17H18V14H8V17Z" /></svg>',null!==(B=this.language.getString("toolbox-align-right"))&&void 0!==B?B:"Right");Ft.addEventListener("click",(()=>this.horizontalAlignmentClicked("right"))),St.appendChild(Ft);const Qt=document.createElement("div");Qt.style.display="flex",vt.appendChild(Qt);const Wt=r('<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24"><path d="M22 2V4H2V2H22M7 22H10V6H7V22M14 16H17V6H14V16Z" /></svg>',null!==(J=this.language.getString("toolbox-align-top"))&&void 0!==J?J:"Top");Wt.addEventListener("click",(()=>this.verticalAlignmentClicked("top"))),Qt.appendChild(Wt);const Ot=r('<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24"><path d="M22 11H17V6H14V11H10V3H7V11H1.8V13H7V21H10V13H14V18H17V13H22V11Z" /></svg>',null!==(lt=this.language.getString("toolbox-align-middle"))&&void 0!==lt?lt:"Middle");Ot.addEventListener("click",(()=>this.verticalAlignmentClicked("middle"))),Qt.appendChild(Ot);const Gt=r('<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24"><path d="M22 22H2V20H22V22M10 2H7V18H10V2M17 8H14V18H17V8Z" /></svg>',null!==(Ct=this.language.getString("toolbox-align-bottom"))&&void 0!==Ct?Ct:"Bottom");return Gt.addEventListener("click",(()=>this.verticalAlignmentClicked("bottom"))),Qt.appendChild(Gt),vt}horizontalAlignmentClicked(e){this.onHorizontalAlignmentClicked&&this.onHorizontalAlignmentClicked(e)}verticalAlignmentClicked(e){this.onVerticalAlignmentClicked&&this.onVerticalAlignmentClicked(e)}}class tt extends T{constructor(e,f,B,J){super(e,f),this.currentWidth=0,this.currentHeight=0,this.currentWidth=B,this.currentHeight=J,this.setCurrentDimensions=this.setCurrentDimensions.bind(this)}getUi(){var e,f;const B=document.createElement("div");B.style.display="flex",B.style.flexWrap="wrap",B.style.alignItems="center";const J=document.createElement("span");J.innerText=null!==(e=this.language.getString("toolbox-widthshort-label"))&&void 0!==e?e:"W:",B.appendChild(J),this.widthInput=document.createElement("input"),this.widthInput.type="text",this.widthInput.value=this.currentWidth.toString(),this.widthInput.addEventListener("change",(()=>{this.setCurrentDimensions(Number.parseInt(this.widthInput.value),void 0)})),this.widthInput.style.textAlign="right",this.widthInput.style.margin="0px 10px 0px 4px",this.widthInput.style.width="2.5rem",B.appendChild(this.widthInput);const lt=document.createElement("span");return lt.innerText=null!==(f=this.language.getString("toolbox-heightshort-label"))&&void 0!==f?f:"H:",B.appendChild(lt),this.heightInput=document.createElement("input"),this.heightInput.type="text",this.heightInput.value=this.currentHeight.toString(),this.heightInput.addEventListener("change",(()=>{this.setCurrentDimensions(void 0,Number.parseInt(this.heightInput.value))})),this.heightInput.style.textAlign="right",this.heightInput.style.marginLeft="4px",this.heightInput.style.width="2.5rem",B.appendChild(this.heightInput),B}setCurrentDimensions(e,f){let B=!1;void 0!==e&&e!==this.currentWidth&&(this.currentWidth=e,B=!0),void 0!==f&&f!==this.currentHeight&&(this.currentHeight=f,B=!0),this.onDimensionsChanged&&B&&this.onDimensionsChanged(this.currentWidth,this.currentHeight)}}class et{constructor(e,f){this.value=e,void 0!==f&&(this.label=f)}get label(){var e;return null!==(e=this._label)&&void 0!==e?e:this.value}set label(e){this._label=e}}class it extends Array{constructor(...e){super(),e.length>0&&e.forEach((e=>{"string"==typeof e?this.push(new et(e)):this.push(e)}))}}class st{constructor(e,f){this.value=e,void 0!==f&&(this.label=f)}get label(){var e;return null!==(e=this._label)&&void 0!==e?e:this.value}set label(e){this._label=e}}class nt extends s{constructor(){super(...arguments),this._contextStringArrays=new Map,this.defaultTextColorSet=new it("black","white","red","yellow","green","blue","#3b82f6","#0ea5e9","#a855f7","#d946ef","#10b981","#84cc16","#f59e0b","#f97316","#ef4444","#fda4af","#64748b","#e5e7eb"),this.defaultStrokeColorSet=new it("black","white","red","yellow","green","blue","#3b82f6","#0ea5e9","#a855f7","#d946ef","#10b981","#84cc16","#f59e0b","#f97316","#ef4444","#fda4af","#64748b","#e5e7eb"),this.defaultFillColorSet=new it("#cccccc","#ffcccc","#ccffcc","#ccccff","#fef08a","#fed7aa","black","white","red","yellow","green","blue","#0ea5e9","#a855f7","#d946ef","#10b981","#84cc16","#f59e0b","#f97316","#ef4444","#fda4af","#64748b","#e5e7eb","transparent"),this.defaultBackgroundColorSet=new it("#ffffff","#cccccc","#ffcccc","#ccffcc","#ccccff","#fef08a","#fed7aa","black","red","yellow","green","blue","#0ea5e9","#a855f7","#d946ef","#10b981","#84cc16","#f59e0b","#f97316","#ef4444","#fda4af","#64748b","#e5e7eb","transparent"),this._colorSets=new Map,this.defaultStrokeDasharrays=["","3","12 3","9 6 3 6"],this.defaultStrokeWidths=["1","2","3","5"],this.defaultFontFamilies=[new st('Times, "Times New Roman", serif',"Serif"),new st("Helvetica, Arial, sans-serif","Sans-serif"),new st('Courier, "Courier New", monospace',"Monospace")],this._fontFamilies=new Map}getContextStringArray(e,f){const B=this._contextStringArrays.get(e);return void 0!==B?B.get(f):void 0}setContextStringArray(e,f,B){let J=this._contextStringArrays.get(e);void 0===J&&(J=new Map,this._contextStringArrays.set(e,J)),J.set(f,B)}getColorSet(e,f){var B;const J=null===(B=this._colorSets.get(e))||void 0===B?void 0:B.get(f);if(void 0!==J)return J;switch(f){case"background":return this.defaultBackgroundColorSet;case"fill":return this.defaultFillColorSet;case"stroke":default:return this.defaultStrokeColorSet;case"text":return this.defaultTextColorSet}}setContextColorSet(e,f,B){let J=this._colorSets.get(e);void 0===J&&(J=new Map,this._colorSets.set(e,J)),J.set(f,B)}getDashArrays(e){var f;return null!==(f=this.getContextStringArray(e,"strokeDashArrays"))&&void 0!==f?f:this.defaultStrokeDasharrays}setContextDashArrays(e,f){this.setContextStringArray(e,"strokeDashArrays",f)}getStrokeWidths(e){var f;return null!==(f=this.getContextStringArray(e,"strokeWidths"))&&void 0!==f?f:this.defaultStrokeWidths}setContextStrokeWidths(e,f){this.setContextStringArray(e,"strokeWidths",f)}getFontFamilies(e){const f=this._fontFamilies.get(e);return null!=f?f:this.defaultFontFamilies}setContextFontFamilies(e,f){this._fontFamilies.set(e,f)}}class ot extends Map{}class rt extends Map{}class at extends Map{}class ht{constructor(){this.stringStore=new Map,this.defaultLang="en",this.defaultModule="core"}addStrings(e,f,B){this.stringStore.has(e)||this.stringStore.set(e,new Map);const J=this.stringStore.get(e),lt=B instanceof ot?B:new ot(B);J.set(f,lt)}getString(e,f,B){var J,lt,Ct,vt,St,wt;let zt=null===(lt=null===(J=this.stringStore.get(null!=f?f:this.defaultModule))||void 0===J?void 0:J.get(null!=B?B:this.defaultLang))||void 0===lt?void 0:lt.get(e);return void 0===zt&&void 0!==B&&(zt=null===(vt=null===(Ct=this.stringStore.get(null!=f?f:this.defaultModule))||void 0===Ct?void 0:Ct.get(this.defaultLang))||void 0===vt?void 0:vt.get(e)),void 0===zt&&(zt=null===(wt=null===(St=this.stringStore.get(null!=f?f:this.defaultModule))||void 0===St?void 0:St.get("en"))||void 0===wt?void 0:wt.get(e)),zt}}const vt=[["toolbar-select","select"],["toolbar-delete","delete [Del]"],["toolbar-save","save"],["toolbar-undo","undo"],["toolbar-redo","redo"],["toolbar-add","add a stencil [N]"],["toolbar-document-setup","document properties"],["toolbar-zoomin","zoom in"],["toolbar-zoomreset","reset zoom"],["toolbar-zoomout","zoom out"],["toolbar-properties","toggle toolbox"],["toolbar-connect","connect [C]"],["toolbox-shape-title","Shape properties"],["toolbox-linecolor-title","Line color"],["toolbox-fillcolor-title","Fill color"],["toolbox-linewidth-title","Line width"],["toolbox-linestyle-title","Line style"],["toolbox-arrowtype-title","Arrow type"],["toolbox-text-title","Text properties"],["toolbox-textcolor-title","Text color"],["toolbox-font-title","Font"],["toolbox-increasefontsize-title","increase font size"],["toolbox-decreasefontsize-title","decrease font size"],["toolbox-image-title","Image"],["toolbox-label-location-title","Text location"],["toolbox-click-to-select-image","click to select image"],["toolbox-connectortype-title","Connector type"],["toolbox-newstencil-title","Create new"],["toolbox-bgcolor-title","Background color"],["toolbox-docsize-title","Document size"],["toolbox-align-title","Align"],["toolbox-align-left","Left"],["toolbox-align-center","Center"],["toolbox-align-right","Right"],["toolbox-align-top","Top"],["toolbox-align-middle","Middle"],["toolbox-align-bottom","Bottom"],["toolbox-arrange-title","Arrange"],["toolbox-arrange-front","Bring to front"],["toolbox-arrange-forward","Bring forward"],["toolbox-arrange-backward","Send backward"],["toolbox-arrange-back","Send to backw"],["toolbox-widthshort-label","W:"],["toolbox-heightshort-label","H:"],["RectangleTextStencil-displayname","Text box"],["EllipseStencil-displayname","Ellipse"],["DiamondStencil-displayname","Diamond"],["LabelStencil-displayname","Lable"],["LightbulbIconStencil-displayname","Lightbulb"],["BitmapImageStencil-displayname","Image"]];class ct extends T{constructor(e,f){super(e,f),this.arrangeClicked=this.arrangeClicked.bind(this)}getUi(){var e,f,B,J;function n(e,f){const B=document.createElement("button");return B.style.display="flex",B.style.alignItems="center",B.style.width="24px",B.style.height="24px",B.style.padding="3px",B.innerHTML=e,B.title=f,B}const lt=document.createElement("div");lt.style.display="flex";const Ct=n('<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24"><path d="M2,2H11V6H9V4H4V9H6V11H2V2M22,13V22H13V18H15V20H20V15H18V13H22M8,8H16V16H8V8Z" /></svg>',null!==(e=this.language.getString("toolbox-arrange-front"))&&void 0!==e?e:"Bring to front");Ct.addEventListener("click",(()=>this.arrangeClicked("front"))),lt.appendChild(Ct);const vt=n('<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24"><path d="M2,2H16V16H2V2M22,8V22H8V18H10V20H20V10H18V8H22Z" /></svg>',null!==(f=this.language.getString("toolbox-arrange-forward"))&&void 0!==f?f:"Bring forward");vt.addEventListener("click",(()=>this.arrangeClicked("forward"))),lt.appendChild(vt);const St=n('<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24"><path d="M2,2H16V16H2V2M22,8V22H8V18H18V8H22M4,4V14H14V4H4Z" /></svg>',null!==(B=this.language.getString("toolbox-arrange-backward"))&&void 0!==B?B:"Send backward");St.addEventListener("click",(()=>this.arrangeClicked("backward"))),lt.appendChild(St);const wt=n('<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24"><path d="M2,2H11V11H2V2M9,4H4V9H9V4M22,13V22H13V13H22M15,20H20V15H15V20M16,8V11H13V8H16M11,16H8V13H11V16Z" /></svg>',null!==(J=this.language.getString("toolbox-arrange-back"))&&void 0!==J?J:"Send to back");return wt.addEventListener("click",(()=>this.arrangeClicked("back"))),lt.appendChild(wt),lt}arrangeClicked(e){this.onArrangeClicked&&this.onArrangeClicked(e)}}class dt extends HTMLElement{constructor(){super(),this.mode="select",this._isInitialized=!1,this._selectedStencilEditors=[],this._stencilEditors=[],this._currentConnectorType=v,this._connectorEditors=[],this._newStencilOutline=o.createPath("",[["stroke","#333"],["stroke-width","0.5"],["stroke-dasharray","2 5"],["fill","rgba(200,200,200,0.1)"],["pointer-events","none"]]),this._marqueeSelectOutline=o.createRect(0,0,[["stroke","#333"],["stroke-width","0.5"],["stroke-dasharray","5 5"],["fill","transparent"],["pointer-events","none"]]),this._marqueeSelectRect=new DOMRect(0,0,0,0),this.zoomSteps=[.5,.8,1,1.5,2,4],this._zoomLevel=1,this._stencilEditorSet=Ct,this._manipulationStartX=0,this._manipulationStartY=0,this.undoRedoManager=new K,this.settings=new nt,this.languageManager=new ht,this._iid=0,this._currentToolboxPanels=[],this._isToolboxVisible=!0,this.width=0,this.height=0,this.documentWidth=640,this.documentHeight=360,this.documentBgColor="white",this.touchPoints=0,this.isDragging=!1,this.isSelecting=!1,this.PAGE_MARGIN=10,this.stencilCreated=this.stencilCreated.bind(this),this.stencilChanged=this.stencilChanged.bind(this),this.connectorCreated=this.connectorCreated.bind(this),this.connectorUpdated=this.connectorUpdated.bind(this),this.setCurrentStencil=this.setCurrentStencil.bind(this),this.selectStencil=this.selectStencil.bind(this),this.deselectStencil=this.deselectStencil.bind(this),this.onDblClick=this.onDblClick.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onCanvasPointerDown=this.onCanvasPointerDown.bind(this),this.onCanvasPointerMove=this.onCanvasPointerMove.bind(this),this.onCanvasPointerUp=this.onCanvasPointerUp.bind(this),this.onCanvasPointerOut=this.onCanvasPointerOut.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOut=this.onPointerOut.bind(this),this.toolbarButtonClicked=this.toolbarButtonClicked.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.toggleConnectMode=this.toggleConnectMode.bind(this),this.switchToConnectMode=this.switchToConnectMode.bind(this),this.switchConnectModeOff=this.switchConnectModeOff.bind(this),this.selectHitEditor=this.selectHitEditor.bind(this),this.selectHitConnector=this.selectHitConnector.bind(this),this.addStyles=this.addStyles.bind(this),this.addToolboxPanels=this.addToolboxPanels.bind(this),this.toggleToolbox=this.toggleToolbox.bind(this),this.removeToolboxPanels=this.removeToolboxPanels.bind(this),this.deleteSelected=this.deleteSelected.bind(this),this.deleteConnector=this.deleteConnector.bind(this),this.deleteStencilEditor=this.deleteStencilEditor.bind(this),this.findConnectorEditor=this.findConnectorEditor.bind(this),this.addMainCanvas=this.addMainCanvas.bind(this),this.setMainCanvasSize=this.setMainCanvasSize.bind(this),this.changeConnectorType=this.changeConnectorType.bind(this),this.showAddPanel=this.showAddPanel.bind(this),this.createNewStencil=this.createNewStencil.bind(this),this.addNewStencil=this.addNewStencil.bind(this),this.showDocumentPropertiesPanel=this.showDocumentPropertiesPanel.bind(this),this.setDocumentBgColor=this.setDocumentBgColor.bind(this),this.setDocumentSize=this.setDocumentSize.bind(this),this.zoom=this.zoom.bind(this),this.undo=this.undo.bind(this),this.addUndoStep=this.addUndoStep.bind(this),this.undoStep=this.undoStep.bind(this),this.redo=this.redo.bind(this),this.redoStep=this.redoStep.bind(this),this.applyStencilSet=this.applyStencilSet.bind(this),this.setupPanels=this.setupPanels.bind(this),this.toggleLogo=this.toggleLogo.bind(this),this.addLogo=this.addLogo.bind(this),this.removeLogo=this.removeLogo.bind(this),this.positionLogo=this.positionLogo.bind(this),this.finishMarqueeSelection=this.finishMarqueeSelection.bind(this),this.alignHorizontally=this.alignHorizontally.bind(this),this.alignVertically=this.alignVertically.bind(this),this.arrange=this.arrange.bind(this),this.hideToolbarButtons=this.hideToolbarButtons.bind(this),this.setupResizeObserver=this.setupResizeObserver.bind(this),this.attachShadow({mode:"open"}),this.addStyles()}get zoomLevel(){return this._zoomLevel}set zoomLevel(e){this._zoomLevel=e,this._canvasContainer&&this._contentContainer&&this._mainCanvas&&this._overlayContainer&&(this._mainCanvas.style.width=this.documentWidth*this.zoomLevel+"px",this._mainCanvas.style.height=this.documentHeight*this.zoomLevel+"px",this._canvasContainer.scrollTo({left:(this._mainCanvas.clientWidth-this._canvasContainer.clientWidth)/2,top:(this._mainCanvas.clientHeight-this._canvasContainer.clientHeight)/2}),this._overlayContainer.style.transform=`scale(${this._zoomLevel})`)}get stencilEditorSet(){return this._stencilEditorSet}set stencilEditorSet(e){var f;this._stencilEditorSet=e,this._currentConnectorType=null!==(f=e.defaultConnectorType)&&void 0!==f?f:v,void 0!==e.defaultStringSet&&this.languageManager.addStrings(e.id,"en",e.defaultStringSet),this.applyStencilSet()}set language(e){this.languageManager.defaultLang=e,this.addToolbar()}get language(){return this.languageManager.defaultLang}getNewIId(){return++this._iid}setupPanels(){var e,f,B,J,lt,Ct;this._connectorTypePanel=new Z(null!==(e=this.languageManager.getString("toolbox-connectortype-title"))&&void 0!==e?e:"Connector type",this.languageManager,this._stencilEditorSet.availableConnectorTypes,this._currentConnectorType),this._connectorTypePanel.onConnectorTypeChanged=this.changeConnectorType,this._stencilEditorSet.stencilSet.stencilTypes.forEach((e=>{var f;e.displayName=null!==(f=this.languageManager.getString(`${e.stencilType.typeName}-displayname`,this._stencilEditorSet.id))&&void 0!==f?f:e.displayName})),this._newStencilPanel=new q(null!==(f=this.languageManager.getString("toolbox-newstencil-title"))&&void 0!==f?f:"Create new",this.languageManager,this._stencilEditorSet.stencilSet.stencilTypes),this._newStencilPanel.onCreateNewStencil=this.createNewStencil,this._documentBackgroundPanel=new P(null!==(B=this.languageManager.getString("toolbox-bgcolor-title"))&&void 0!==B?B:"Background color",this.languageManager,this.settings.defaultBackgroundColorSet,this.settings.defaultBackgroundColor),this._documentBackgroundPanel.onColorChanged=this.setDocumentBgColor,this._documentDimensionsPanel=new tt(null!==(J=this.languageManager.getString("toolbox-docsize-title"))&&void 0!==J?J:"Document size",this.languageManager,this.documentWidth,this.documentHeight),this._documentDimensionsPanel.onDimensionsChanged=this.setDocumentSize,this._alignPanel=new $(null!==(lt=this.languageManager.getString("toolbox-align-title"))&&void 0!==lt?lt:"Align",this.languageManager),this._alignPanel.onHorizontalAlignmentClicked=this.alignHorizontally,this._alignPanel.onVerticalAlignmentClicked=this.alignVertically,this._arrangePanel=new ct(null!==(Ct=this.languageManager.getString("toolbox-arrange-title"))&&void 0!==Ct?Ct:"Arrange",this.languageManager),this._arrangePanel.onArrangeClicked=this.arrange}addStyles(){var e;const f=document.createElement("style");f.innerHTML="\n      * {\n        --i-mjsdiae-fore-color: var(--mjsdiae-fore-color, #eee);\n        --i-mjsdiae-accent-color: var(--mjsdiae-accent-color, #cceeff);\n        --i-mjsdiae-accent-color2: var(--mjsdiae-accent-color2, #335577);\n        --i-mjsdiae-background-color: var(--mjsdiae-background-color, #333);\n        --i-mjsdiae-background-color-hover: var(--mjsdiae-background-color-hover, #383838);\n        --i-mjsdiae-border-color: var(--mjsdiae-border-color, --i-mjsdiae-background-color);\n        --i-mjsdiae-border-color-hover: var(--mjsdiae-border-color-hover, #222);\n        --i-mjsdiae-panel-border-color: var(--mjsdiae-panel-border-color, #383838);\n        --i-mjsdiae-panel-separator-color: var(--mjsdiae-panel-separator-color, #444);\n        --i-mjsdiae-input-background-color: var(--mjsdiae-input-background-color, #222);\n        --i-mjsdiae-input-background-color-focus: var(--mjsdiae-input-background-color-focus, #444);\n        --i-mjsdiae-input-fore-color: var(--mjsdiae-input-fore-color, --i-mjsdiae-fore-color);\n\n        --i-mjsdiae-newstencil-background-color: var(--mjsdiae-newstencil-background-color, #444);\n        --i-mjsdiae-newstencil-background-color-hover: var(--mjsdiae-newstencil-background-color-hover, #888);\n        \n        --i-mjsdiae-canvas-background-color: var(--mjsdiae-canvas-background-color, #aaa);\n      }\n\n      .canvas-container {\n        background-color: var(--i-mjsdiae-canvas-background-color);\n        scrollbar-width: thin;\n      }\n      .canvas-container::-webkit-scrollbar {\n        height: 10px;\n        width: 10px;\n      }\n      .canvas-container::-webkit-scrollbar-track {\n        background-color: transparent;\n      }\n      .canvas-container::-webkit-scrollbar-thumb {\n        background-color: #444;\n        border-radius: 20px;\n        border: 2px solid #aaa;\n      }      \n\n      mjstb-panel.toolbar-panel::part(panel) {\n        background-color: var(--i-mjsdiae-background-color);\n        border-bottom: 2px solid var(--i-mjsdiae-panel-border-color);\n      }\n      mjstb-panel.toolbar-panel::part(toolbar) {\n        padding: 5px;\n        justify-content: space-between;\n      }\n      mjstb-panel.toolbar-panel::part(toolbar-block) {\n      }\n      mjstb-panel.toolbar-panel::part(button) {\n        color: var(--i-mjsdiae-fore-color);\n        background-color: var(--i-mjsdiae-background-color);\n        width: 36px;\n        height: 36px;\n        border-radius: 3px;\n        border: 2px solid var(--i-mjsdiae-border-color);\n      }\n      mjstb-panel.toolbar-panel::part(button):hover {\n        background-color: var(--i-mjsdiae-background-color-hover);\n        border-color: var(--i-mjsdiae-border-color-hover);\n      }\n\n      .toolbox-panel {\n        width: 100%;\n        background-color: var(--i-mjsdiae-background-color);\n        border-left: 2px solid var(--i-mjsdiae-panel-border-color);\n        filter: drop-shadow(-2px 0px 4px var(--i-mjsdiae-panel-border-color));\n        padding: 2px;\n        scrollbar-width: thin;\n        overflow-y: auto;\n        font-family: Helvetica, Arial, sans-serif;\n      }\n      .toolbox-panel::-webkit-scrollbar {\n        width: 12px;\n      }\n      .toolbox-panel::-webkit-scrollbar-track {\n        background: var(--i-mjsdiae-background-color);\n      }\n      \n      .toolbox-panel::-webkit-scrollbar-thumb {\n        background-color: #444;\n        border-radius: 20px;\n        border: 1px solid #222;\n      }\n\n      .toolbox-panel .content-block {\n        background-color: var(--i-mjsdiae-background-color);\n        color: var(--i-mjsdiae-fore-color);\n        font-size: 0.8rem;\n        padding: 5px;\n        border-bottom: 2px solid var(--i-mjsdiae-panel-separator-color);\n        border-radius: 3px;\n        overflow: hidden;\n      }\n      .toolbox-panel .content-block input[type=text] {\n        background-color: var(--i-mjsdiae-input-background-color);\n        color: var(--i-mjsdiae-input-fore-color);\n        font-size: 0.8rem;\n        padding: 3px;\n        border: 1px solid var(--i-mjsdiae-input-background-color);\n        outline-color: var(--i-mjsdiae-input-background-color-focus);\n        outline-style: solid;\n        outline-width: 1px;\n      }\n      .toolbox-panel .content-block input[type=text]:focus {\n        background-color: var(--i-mjsdiae-input-background-color-focus);\n      }\n      .toolbox-panel .content-block select {\n        background-color: var(--i-mjsdiae-input-background-color);\n        color: var(--i-mjsdiae-input-fore-color);\n        font-size: 0.8rem;\n        padding: 3px;\n        border: 1px solid var(--i-mjsdiae-input-background-color);\n        outline-color: var(--i-mjsdiae-input-background-color-focus);\n        outline-style: solid;\n        outline-width: 1px;\n      }\n      .toolbox-panel .content-block select:focus {\n        background-color: var(--i-mjsdiae-input-background-color-focus);\n      }\n      .toolbox-panel .content-block button {\n        background-color: var(--i-mjsdiae-input-background-color-focus);\n        color: var(--i-mjsdiae-input-fore-color);\n        font-size: 0.8rem;\n        padding: 3px;\n        border: 1px solid var(--i-mjsdiae-input-background-color);\n        outline-color: var(--i-mjsdiae-input-background-color);\n        outline-style: solid;\n        outline-width: 1px;\n      }\n      .toolbox-panel .content-block button:hover {\n        background-color: var(--i-mjsdiae-input-background-color);\n      }      \n\n      .toolbox-panel .content-block h3 {\n        font-size: 0.8rem;\n        margin-bottom: 2px;\n      }\n\n      .toolbox-panel .content-block-title {\n        margin: -5px;\n        margin-bottom: 5px;\n        padding: 5px;\n        border-bottom: 1px solid var(--i-mjsdiae-panel-separator-color);\n        color: var(--i-mjsdiae-fore-color);\n        font-family: Helvetica, Arial, Sans-Serif;\n        font-size: 0.8rem;\n      }\n      .toolbox-panel .new-stencil-block {\n        padding: 0;\n        background-color: var(--i-mjsdiae-newstencil-background-color);\n        display: flex;\n        flex-direction: column;\n        justify-content: flex-end;\n        width: 100px;\n        margin-bottom: 5px;\n        margin-right: 5px;\n        align-items: center;\n        border-width: 2px;\n        border-style: solid;\n        border-radius: 4px;\n        cursor: pointer;\n      }\n      .toolbox-panel .new-stencil-block:hover {\n        background-color: var(--i-mjsdiae-newstencil-background-color-hover);\n      }\n      .toolbox-panel .new-stencil-block .new-stencil-block-thumbnail {\n        stroke-width: 0.5px;\n        fill: var(--i-mjsdiae-accent-color2);\n        stroke: var(--i-mjsdiae-border-color);\n        color: #000;\n        margin: 10px;\n      }\n      .toolbox-panel .new-stencil-block .new-stencil-block-title {\n        align-self: stretch;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        font-size: 0.7rem;\n        text-align: center;\n        margin: 5px 0 0 0;\n        padding: 3px;\n        background-color: var(--i-mjsdiae-accent-color2);\n        color: var(--i-mjsdiae-fore-color);\n      }\n      \n      \n      mjstb-toolbar {\n        background-color: red;\n      }\n    ",null===(e=this.shadowRoot)||void 0===e||e.appendChild(f)}createLayout(){var e;this.style.display="block",this.style.width=""!==this.style.width?this.style.width:"100%",this.style.height=""!==this.style.height?this.style.height:"100%",this.style.position="relative",this._container=document.createElement("div"),this._container.style.display="flex",this._container.style.flexDirection="column",this._container.style.width="100%",this._container.style.height="100%",this._container.style.userSelect="none",this._toolbarContainer=document.createElement("div"),this._toolbarContainer.style.display="flex",this._toolbarContainer.style.backgroundColor="red",this._container.appendChild(this._toolbarContainer),this._contentContainer=document.createElement("div"),this._contentContainer.style.display="flex",this._contentContainer.style.position="relative",this._contentContainer.style.flexGrow="2",this._contentContainer.style.flexShrink="1",this._contentContainer.style.overflow="hidden",this._container.appendChild(this._contentContainer),this._canvasContainer=document.createElement("div"),this._canvasContainer.style.touchAction="pinch-zoom",this._canvasContainer.className="canvas-container",this._canvasContainer.style.display="grid",this._canvasContainer.style.gridTemplateColumns="1fr",this._canvasContainer.style.flexGrow="2",this._canvasContainer.style.flexShrink="2",this._canvasContainer.style.justifyItems="center",this._canvasContainer.style.alignItems="center",this._canvasContainer.style.overflow="auto",this._contentContainer.appendChild(this._canvasContainer),this._toolboxContainer=document.createElement("div"),this._toolboxContainer.style.display="flex",this._toolboxContainer.style.minWidth="250px",this._toolboxContainer.style.width="250px",this._toolboxContainer.style.maxWidth="250px",this._toolboxContainer.style.height="100%",this._contentContainer.appendChild(this._toolboxContainer),this._container.setAttribute("part","container"),null===(e=this.shadowRoot)||void 0===e||e.appendChild(this._container)}addToolbar(){var J,lt,Ct,vt,St,wt,zt,Ft,Qt,Wt,Ot,Gt,Rt;this._toolbarContainer&&this._toolbarContainer.childElementCount>0&&(this._toolbarContainer.innerHTML="");const Yt=document.createElement("mjstb-panel");Yt.className="toolbar-panel",Yt.style.width="100%",this._toolbar=new e,this._toolbar.addEventListener("buttonclick",this.toolbarButtonClicked);const Jt=new f,Xt=new f,Kt=new f,Zt=new f,qt=new B({icon:'<svg width="24" height="24" viewBox="0 0 24 24">\n    <path fill="currentColor" d="M10.07,14.27C10.57,14.03 11.16,14.25 11.4,14.75L13.7,19.74L15.5,18.89L13.19,13.91C12.95,13.41 13.17,12.81 13.67,12.58L13.95,12.5L16.25,12.05L8,5.12V15.9L9.82,14.43L10.07,14.27M13.64,21.97C13.14,22.21 12.54,22 12.31,21.5L10.13,16.76L7.62,18.78C7.45,18.92 7.24,19 7,19A1,1 0 0,1 6,18V3A1,1 0 0,1 7,2C7.24,2 7.47,2.09 7.64,2.23L7.65,2.22L19.14,11.86C19.57,12.22 19.62,12.85 19.27,13.27C19.12,13.45 18.91,13.57 18.7,13.61L15.54,14.23L17.74,18.96C18,19.46 17.76,20.05 17.26,20.28L13.64,21.97Z" />\n</svg>',text:null!==(J=this.languageManager.getString("toolbar-select"))&&void 0!==J?J:"select",command:"select"});Jt.appendButton(qt);const $t=new B({icon:'<svg width="24" height="24" viewBox="0 0 24 24">\n    <path fill="currentColor" d="M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M7,6H17V19H7V6M9,8V17H11V8H9M13,8V17H15V8H13Z" />\n</svg>',text:null!==(lt=this.languageManager.getString("toolbar-delete"))&&void 0!==lt?lt:"delete",command:"delete"});Jt.appendButton($t);const te=new B({icon:'<svg width="24" height="24" viewBox="0 0 24 24">\n    <path fill="currentColor" d="M17 3H5C3.89 3 3 3.9 3 5V19C3 20.1 3.89 21 5 21H19C20.1 21 21 20.1 21 19V7L17 3M19 19H5V5H16.17L19 7.83V19M12 12C10.34 12 9 13.34 9 15S10.34 18 12 18 15 16.66 15 15 13.66 12 12 12M6 6H15V10H6V6Z" />\n</svg>',text:null!==(Ct=this.languageManager.getString("toolbar-save"))&&void 0!==Ct?Ct:"save",command:"save"});Jt.appendButton(te);const ee=new B({icon:'<svg width="24" height="24" viewBox="0 0 24 24">\n    <path fill="currentColor" d="M12.5,8C9.85,8 7.45,9 5.6,10.6L2,7V16H11L7.38,12.38C8.77,11.22 10.54,10.5 12.5,10.5C16.04,10.5 19.05,12.81 20.1,16L22.47,15.22C21.08,11.03 17.15,8 12.5,8Z" />\n</svg>',text:null!==(vt=this.languageManager.getString("toolbar-undo"))&&void 0!==vt?vt:"undo",command:"undo"});Jt.appendButton(ee);const ie=new B({icon:'<svg width="24" height="24" viewBox="0 0 24 24">\n    <path fill="currentColor" d="M18.4,10.6C16.55,9 14.15,8 11.5,8C6.85,8 2.92,11.03 1.54,15.22L3.9,16C4.95,12.81 7.95,10.5 11.5,10.5C13.45,10.5 15.23,11.22 16.62,12.38L13,16H22V7L18.4,10.6Z" />\n</svg>',text:null!==(St=this.languageManager.getString("toolbar-redo"))&&void 0!==St?St:"redo",command:"redo"});Jt.appendButton(ie);const se=new B({icon:'<svg width="24" height="24" viewBox="0 0 24 24">\n    <path fill="currentColor" d="M19,6H22V8H19V11H17V8H14V6H17V3H19V6M17,17V14H19V19H3V6H11V8H5V17H17Z" />\n</svg>',text:null!==(wt=this.languageManager.getString("toolbar-add"))&&void 0!==wt?wt:"add",command:"add"});Xt.appendButton(se);const oe=new B({icon:'<svg width="24" height="24" viewBox="0 0 24 24">\n    <path fill="currentColor" d="M18,11H14.82C14.4,9.84 13.3,9 12,9C10.7,9 9.6,9.84 9.18,11H6C5.67,11 4,10.9 4,9V8C4,6.17 5.54,6 6,6H16.18C16.6,7.16 17.7,8 19,8A3,3 0 0,0 22,5A3,3 0 0,0 19,2C17.7,2 16.6,2.84 16.18,4H6C4.39,4 2,5.06 2,8V9C2,11.94 4.39,13 6,13H9.18C9.6,14.16 10.7,15 12,15C13.3,15 14.4,14.16 14.82,13H18C18.33,13 20,13.1 20,15V16C20,17.83 18.46,18 18,18H7.82C7.4,16.84 6.3,16 5,16A3,3 0 0,0 2,19A3,3 0 0,0 5,22C6.3,22 7.4,21.16 7.82,20H18C19.61,20 22,18.93 22,16V15C22,12.07 19.61,11 18,11M19,4A1,1 0 0,1 20,5A1,1 0 0,1 19,6A1,1 0 0,1 18,5A1,1 0 0,1 19,4M5,20A1,1 0 0,1 4,19A1,1 0 0,1 5,18A1,1 0 0,1 6,19A1,1 0 0,1 5,20Z" />\n</svg>',text:null!==(zt=this.languageManager.getString("toolbar-connect"))&&void 0!==zt?zt:"connect",command:"connect"});Xt.appendButton(oe);const ne=new B({icon:'<svg width="24" height="24" viewBox="0 0 24 24">\n        <path fill="currentColor" d="M6 2C4.89 2 4 2.9 4 4V20C4 21.11 4.89 22 6 22H12V20H6V4H13V9H18V12H20V8L14 2M18 14C17.87 14 17.76 14.09 17.74 14.21L17.55 15.53C17.25 15.66 16.96 15.82 16.7 16L15.46 15.5C15.35 15.5 15.22 15.5 15.15 15.63L14.15 17.36C14.09 17.47 14.11 17.6 14.21 17.68L15.27 18.5C15.25 18.67 15.24 18.83 15.24 19C15.24 19.17 15.25 19.33 15.27 19.5L14.21 20.32C14.12 20.4 14.09 20.53 14.15 20.64L15.15 22.37C15.21 22.5 15.34 22.5 15.46 22.5L16.7 22C16.96 22.18 17.24 22.35 17.55 22.47L17.74 23.79C17.76 23.91 17.86 24 18 24H20C20.11 24 20.22 23.91 20.24 23.79L20.43 22.47C20.73 22.34 21 22.18 21.27 22L22.5 22.5C22.63 22.5 22.76 22.5 22.83 22.37L23.83 20.64C23.89 20.53 23.86 20.4 23.77 20.32L22.7 19.5C22.72 19.33 22.74 19.17 22.74 19C22.74 18.83 22.73 18.67 22.7 18.5L23.76 17.68C23.85 17.6 23.88 17.47 23.82 17.36L22.82 15.63C22.76 15.5 22.63 15.5 22.5 15.5L21.27 16C21 15.82 20.73 15.65 20.42 15.53L20.23 14.21C20.22 14.09 20.11 14 20 14M19 17.5C19.83 17.5 20.5 18.17 20.5 19C20.5 19.83 19.83 20.5 19 20.5C18.16 20.5 17.5 19.83 17.5 19C17.5 18.17 18.17 17.5 19 17.5Z" />\n  </svg>',text:null!==(Ft=this.languageManager.getString("toolbar-document-setup"))&&void 0!==Ft?Ft:"document setup",command:"document-setup"});Xt.appendButton(ne);const re=new B({icon:'<svg width="24" height="24" viewBox="0 0 24 24">\n    <path fill="currentColor" d="M19,13H5V11H19V13Z" />\n</svg>',text:null!==(Qt=this.languageManager.getString("toolbar-zoomout"))&&void 0!==Qt?Qt:"zoom out",command:"zoomout"});Kt.appendButton(re);const ae=new B({icon:'<svg width="24" height="24" viewBox="0 0 24 24">\n    <path fill="currentColor" d="M12 5.5L10 8H14L12 5.5M18 10V14L20.5 12L18 10M6 10L3.5 12L6 14V10M14 16H10L12 18.5L14 16M21 3H3C1.9 3 1 3.9 1 5V19C1 20.1 1.9 21 3 21H21C22.1 21 23 20.1 23 19V5C23 3.9 22.1 3 21 3M21 19H3V5H21V19Z" />\n</svg>',text:null!==(Wt=this.languageManager.getString("toolbar-zoomreset"))&&void 0!==Wt?Wt:"fit",command:"zoomreset"});Kt.appendButton(ae);const he=new B({icon:'<svg width="24" height="24" viewBox="0 0 24 24">\n    <path fill="currentColor" d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" />\n</svg>',text:null!==(Ot=this.languageManager.getString("toolbar-zoomin"))&&void 0!==Ot?Ot:"zoom in",command:"zoomin"});Kt.appendButton(he);const le=new B({icon:'<svg width="24" height="24" viewBox="0 0 24 24">\n    <path fill="currentColor" d="M8 13C6.14 13 4.59 14.28 4.14 16H2V18H4.14C4.59 19.72 6.14 21 8 21S11.41 19.72 11.86 18H22V16H11.86C11.41 14.28 9.86 13 8 13M8 19C6.9 19 6 18.1 6 17C6 15.9 6.9 15 8 15S10 15.9 10 17C10 18.1 9.1 19 8 19M19.86 6C19.41 4.28 17.86 3 16 3S12.59 4.28 12.14 6H2V8H12.14C12.59 9.72 14.14 11 16 11S19.41 9.72 19.86 8H22V6H19.86M16 9C14.9 9 14 8.1 14 7C14 5.9 14.9 5 16 5S18 5.9 18 7C18 8.1 17.1 9 16 9Z" />\n</svg>',text:null!==(Gt=this.languageManager.getString("toolbar-properties"))&&void 0!==Gt?Gt:"toggle properties",command:"properties"});Zt.appendButton(le),this._toolbar.appendBlock(Jt),this._toolbar.appendBlock(Xt),this._toolbar.appendBlock(Kt),this._toolbar.appendBlock(Zt),Yt.appendToolbar(this._toolbar),null===(Rt=this._toolbarContainer)||void 0===Rt||Rt.appendChild(Yt)}addToolbox(){var e;this._toolboxPanel=document.createElement("div"),this._toolboxPanel.className="toolbox-panel",null===(e=this._toolboxContainer)||void 0===e||e.appendChild(this._toolboxPanel)}addToolboxPanel(e){const f=document.createElement("div");f.className="content-block";const B=document.createElement("h2");B.innerText=e.title,B.className="content-block-title",f.appendChild(B),f.appendChild(e.getUi()),this._toolboxPanel.appendChild(f)}addToolboxPanels(e){void 0!==e?e.forEach((e=>{this._currentToolboxPanels.indexOf(e)<0&&(this._currentToolboxPanels.push(e),this.addToolboxPanel(e))})):(this._toolboxPanel.innerHTML="",this._currentToolboxPanels=[])}removeToolboxPanels(e){if(void 0!==e){let f=!1;e.forEach((e=>{this._currentToolboxPanels.indexOf(e)>-1&&(this._currentToolboxPanels.splice(this._currentToolboxPanels.indexOf(e),1),f=!0)})),f&&(this._toolboxPanel.innerHTML="",this._currentToolboxPanels.forEach((e=>{this.addToolboxPanel(e)})))}else this._toolboxPanel.innerHTML="",this._currentToolboxPanels=[]}toggleToolbox(){void 0!==this._toolboxContainer&&(this._isToolboxVisible=!this._isToolboxVisible,this._toolboxContainer.style.display=this._isToolboxVisible?"flex":"none")}toolbarButtonClicked(e){switch("connect"===this.mode&&"connect"!==e.detail.button.command&&this.switchConnectModeOff(),e.detail.button.command){case"add":this.showAddPanel();break;case"connect":this.toggleConnectMode();break;case"document-setup":this.showDocumentPropertiesPanel();break;case"delete":this.deleteSelected();break;case"save":this.dispatchEvent(new CustomEvent("saveclick",{detail:{state:this.getState()}}));break;case"zoomin":this.zoom(1);break;case"zoomout":this.zoom(-1);break;case"zoomreset":this.zoom(0);break;case"properties":this.toggleToolbox();break;case"undo":this.undo();break;case"redo":this.redo()}}showAddPanel(){this._isToolboxVisible||this.toggleToolbox(),this.deselectStencil(),this.addToolboxPanels(),this.addToolboxPanels([this._newStencilPanel])}toggleConnectMode(){"connect"===this.mode?this.switchConnectModeOff():this.switchToConnectMode()}showDocumentPropertiesPanel(){this._isToolboxVisible||this.toggleToolbox(),this.deselectStencil(),this._documentBackgroundPanel.currentColor=this.documentBgColor,this._documentDimensionsPanel.currentWidth=this.documentWidth,this._documentDimensionsPanel.currentHeight=this.documentHeight,this.addToolboxPanels([this._documentBackgroundPanel,this._documentDimensionsPanel])}setDocumentBgColor(e){this.documentBgColor=e,void 0!==this._mainCanvas&&(this._mainCanvas.style.backgroundColor=e)}setDocumentSize(e,f){this.documentWidth=e,this.documentHeight=f,this.setMainCanvasSize()}switchToConnectMode(){void 0!==this._currentStencilEditor?this._currentStencilEditor.switchToConnectMode():this.setCurrentStencil(),this.mode="connect"}switchConnectModeOff(){this.mode="select",void 0!==this._currentStencilEditor&&(this._currentStencilEditor.switchConnectModeOff(),this._currentStencilEditor.focus())}deleteSelected(){void 0!==this._currentConnectorEditor?this.deleteConnector(this._currentConnectorEditor):this._selectedStencilEditors.length>0&&(this._selectedStencilEditors.forEach((e=>this.deleteStencilEditor(e))),this.deselectStencil())}findConnectorEditor(e){return this._connectorEditors.find((f=>f.connector===e))}deleteStencilEditor(e){var f;e.stencil.ports.forEach((e=>{new Array(...e.connectors).forEach((e=>{const f=this.findConnectorEditor(e);void 0!==f&&this.deleteConnector(f)}))})),(null===(f=this._objectLayer)||void 0===f?void 0:f.contains(e.stencil.container))&&this._objectLayer.removeChild(e.stencil.container);const B=this._stencilEditors.indexOf(e);B>-1&&this._stencilEditors.splice(B,1)}deleteConnector(e){var f,B,J,lt;null===(f=e.connector.startPort)||void 0===f||f.removeConnector(e.connector),null===(B=e.connector.endPort)||void 0===B||B.removeConnector(e.connector),(null===(J=this._objectLayer)||void 0===J?void 0:J.contains(e.connector.container))?this._objectLayer.removeChild(e.connector.container):(null===(lt=this._connectorLayer)||void 0===lt?void 0:lt.contains(e.connector.container))&&this._connectorLayer.removeChild(e.connector.container);const Ct=this._connectorEditors.indexOf(e);Ct>-1&&this._connectorEditors.splice(Ct,1),this._currentConnectorEditor===e&&(this._currentConnectorEditor=void 0)}addMainCanvas(){var e,f,B;this.width=(null===(e=this._contentContainer)||void 0===e?void 0:e.clientWidth)||0,this.height=(null===(f=this._contentContainer)||void 0===f?void 0:f.clientHeight)||0,this._mainCanvas=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._mainCanvas.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.setMainCanvasSize(),this._mainCanvas.style.gridColumnStart="1",this._mainCanvas.style.gridRowStart="1",this._mainCanvas.style.pointerEvents="auto",this._mainCanvas.style.backgroundColor=this.documentBgColor,this._mainCanvas.style.filter="drop-shadow(2px 2px 8px var(--i-mjsdiae-panel-border-color))",this._mainCanvas.style.margin="10px",this._groupLayer=o.createGroup(),this._connectorLayer=o.createGroup(),this._objectLayer=o.createGroup(),this._mainCanvas.appendChild(this._groupLayer),this._mainCanvas.appendChild(this._connectorLayer),this._mainCanvas.appendChild(this._objectLayer),null===(B=this._canvasContainer)||void 0===B||B.appendChild(this._mainCanvas)}setMainCanvasSize(){void 0!==this._mainCanvas&&(this._mainCanvas.setAttribute("width",this.documentWidth.toString()),this._mainCanvas.setAttribute("height",this.documentHeight.toString()),this._mainCanvas.setAttribute("viewBox","0 0 "+this.documentWidth.toString()+" "+this.documentHeight.toString()),this.zoomLevel=1*this.zoomLevel,void 0!==this._overlayContainer&&(this._overlayContentContainer.style.width=`${this.documentWidth}px`,this._overlayContentContainer.style.height=`${this.documentHeight}px`))}initOverlay(){var e;this._overlayContainer=document.createElement("div"),this._overlayContainer.style.pointerEvents="none",this._overlayContainer.style.display="flex",this._overlayContainer.style.alignItems="center",this._overlayContainer.style.justifyContent="center",this._overlayContainer.style.gridRowStart="1",this._overlayContainer.style.gridColumnStart="1",null===(e=this._canvasContainer)||void 0===e||e.appendChild(this._overlayContainer),this._overlayContentContainer=document.createElement("div"),this._overlayContentContainer.style.position="relative",this._overlayContentContainer.style.width=`${this.documentWidth}px`,this._overlayContentContainer.style.height=`${this.documentHeight}px`,this._overlayContentContainer.style.display="flex",this._overlayContainer.appendChild(this._overlayContentContainer)}initUiLayer(){var e;this._internalUiContainer=document.createElement("div"),this._internalUiContainer.style.position="absolute",this._internalUiContainer.style.pointerEvents="none",this._internalUiContainer.style.left="0px",this._internalUiContainer.style.top="0px",this._internalUiContainer.style.width=`${this.width}px`,this._internalUiContainer.style.height=`${this.height}px`,this._internalUiContainer.style.display="flex",this._internalUiContainer.style.alignItems="center",this._internalUiContainer.style.zIndex="10",null===(e=this._contentContainer)||void 0===e||e.appendChild(this._internalUiContainer)}connectedCallback(){this.languageManager.addStrings("core","en",vt),E.addKeyAddListener(this.toggleLogo),this.createLayout(),this.addToolbar(),this.addToolbox(),this.addMainCanvas(),this.initOverlay(),this.initUiLayer(),this.attachEvents(),this._isInitialized=!0,this.applyStencilSet()}disconnectedCallback(){this.detachEvents()}applyStencilSet(){this._isInitialized&&(this.addToolboxPanels(),this.setupPanels(),this.addToolboxPanels([this._newStencilPanel]),void 0!==this._stencilEditorSet&&void 0!==this._stencilEditorSet.newDocumentTemplate&&this.restoreState(this._stencilEditorSet.newDocumentTemplate),this.toggleLogo(),this.dispatchEvent(new CustomEvent("editorinit",{detail:{editor:this}})))}attachEvents(){var e,f,B,J,lt;this.hasAttribute("tabindex")||this.setAttribute("tabindex","0"),this.setupResizeObserver(),null===(e=this._mainCanvas)||void 0===e||e.addEventListener("pointerdown",this.onCanvasPointerDown),null===(f=this._mainCanvas)||void 0===f||f.addEventListener("pointermove",this.onCanvasPointerMove),null===(B=this._mainCanvas)||void 0===B||B.addEventListener("pointerup",this.onCanvasPointerUp),null===(J=this._mainCanvas)||void 0===J||J.addEventListener("pointerout",this.onCanvasPointerOut),null===(lt=this._mainCanvas)||void 0===lt||lt.addEventListener("dblclick",this.onDblClick),this.attachWindowEvents()}attachWindowEvents(){window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp),window.addEventListener("pointercancel",this.onPointerOut),window.addEventListener("pointerout",this.onPointerOut),window.addEventListener("pointerleave",this.onPointerUp),window.addEventListener("keyup",this.onKeyUp)}detachEvents(){var e,f,B;this._resizeObserver&&this._container&&this._resizeObserver.unobserve(this._container),null===(e=this._mainCanvas)||void 0===e||e.removeEventListener("pointerdown",this.onCanvasPointerDown),null===(f=this._mainCanvas)||void 0===f||f.removeEventListener("pointerdown",this.onCanvasPointerUp),null===(B=this._mainCanvas)||void 0===B||B.removeEventListener("dblclick",this.onDblClick),this.detachWindowEvents()}detachWindowEvents(){window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("pointercancel",this.onPointerOut),window.removeEventListener("pointerout",this.onPointerOut),window.removeEventListener("pointerleave",this.onPointerUp),window.removeEventListener("keyup",this.onKeyUp)}setupResizeObserver(){window.ResizeObserver&&this._container&&(this._resizeObserver=new ResizeObserver((()=>{this.positionLogo()})),this._resizeObserver.observe(this._container))}selectHitEditor(e,f){var B;const J=this.getHitEditor(e.target);return void 0!==J?(this.deselectCurrentConnector(),e.shiftKey?this.selectStencil(J):J.isSelected||(this.deselectStencil(),this.selectStencil(J),this.setCurrentStencil(J),void 0!==this._currentStencilEditor&&this._currentStencilEditor.focus()),this.isDragging=!0,J.pointerDown(f,null!==(B=e.target)&&void 0!==B?B:void 0),this._selectedStencilEditors.forEach((e=>{e!==J&&(e.state="move",e.initManipulation(f))}))):(this.deselectStencil(),this.isDragging=!0),J}pushToConnectorLayer(e){var f,B,J;(null===(f=this._objectLayer)||void 0===f?void 0:f.contains(e.connector.container))&&(null===(B=this._objectLayer)||void 0===B||B.removeChild(e.connector.container),null===(J=this._connectorLayer)||void 0===J||J.appendChild(e.connector.container))}popFromConnectorLayer(e){var f,B,J;(null===(f=this._connectorLayer)||void 0===f?void 0:f.contains(e.connector.container))&&(null===(B=this._connectorLayer)||void 0===B||B.removeChild(e.connector.container),null===(J=this._objectLayer)||void 0===J||J.appendChild(e.connector.container))}deselectCurrentConnector(){void 0!==this._currentConnectorEditor&&(this._currentConnectorEditor.deselect(),this.pushToConnectorLayer(this._currentConnectorEditor),this._currentConnectorEditor=void 0,this.removeToolboxPanels(),this.addToolboxPanels([this._newStencilPanel]))}selectHitConnector(e,f){const B=this.getHitConnector(e);return void 0!==B?(this.selectConnector(B),this.dispatchEvent(new CustomEvent("connectorclick",{detail:{diagramEditor:this,connectorEditor:B}}))):this.deselectCurrentConnector(),B}selectConnector(e){this._currentConnectorEditor!==e&&(this.deselectStencil(),this.deselectCurrentConnector(),this._currentConnectorEditor=e,this.popFromConnectorLayer(this._currentConnectorEditor),e.select(),this.removeToolboxPanels(),this.addToolboxPanels([this._connectorTypePanel,...this._currentConnectorEditor.propertyPanels]),this._connectorTypePanel.selectType(e.connector.typeName))}onCanvasPointerDown(e){this._manipulationStartX=e.clientX,this._manipulationStartY=e.clientY;const f=o.clientToLocalCoordinates(this._mainCanvas,e.clientX,e.clientY,this.zoomLevel);if((this.touchPoints++,1===this.touchPoints||"touch"!==e.pointerType)&&(e.target&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId),void 0===this._currentStencilEditor||"new"!==this._currentStencilEditor.state&&"creating"!==this._currentStencilEditor.state))if("select"===this.mode&&e.target===this._mainCanvas)this.deselectStencil(),this.isSelecting=!0,this.isDragging=!0,this._marqueeSelectRect.x=f.x,this._marqueeSelectRect.y=f.y,this._marqueeSelectRect.width=0,this._marqueeSelectRect.height=0,o.setAttributes(this._marqueeSelectOutline,[["x",f.x.toString()],["y",f.y.toString()],["width","0"],["height","0"]]),this._objectLayer&&!this._objectLayer.contains(this._marqueeSelectOutline)&&this._objectLayer.appendChild(this._marqueeSelectOutline);else if("select"===this.mode&&e.target){if(void 0===this.selectHitEditor(e,f)){const B=this.selectHitConnector(e.target,f);null==B||B.pointerDown(f,e.target)}}else if("connect"===this.mode&&e.target){const B=this.getHitEditor(e.target);void 0!==B?(this.connectionStartPort=B.getTargetPort(e),void 0!==this.connectionStartPort?(this.deselectStencil(),this.deselectCurrentConnector(),this._currentConnectorEditor=this.addNewConnector(this._currentConnectorType),this._currentConnectorEditor.onConnectorCreated=this.connectorCreated,this._currentConnectorEditor.onConnectorUpdated=this.connectorUpdated,this._currentConnectorEditor.connector.startStencil=B.stencil,this._currentConnectorEditor.connector.startPort=this.connectionStartPort.port,this._currentConnectorEditor.pointerDown({x:B.stencil.left+this.connectionStartPort.port.x,y:B.stencil.top+this.connectionStartPort.port.y},e.target)):(this.mode="select",B.switchConnectModeOff(),this.selectHitEditor(e,f))):this.isDragging=!0}}onDblClick(e){if("select"===this.mode){const f=this.getHitEditor(e.target);if(void 0!==f&&f!==this._currentStencilEditor&&this.setCurrentStencil(f),void 0!==this._currentStencilEditor&&e.target)this._currentStencilEditor.dblClick(o.clientToLocalCoordinates(this._mainCanvas,e.clientX,e.clientY,this.zoomLevel),e.target);else if(void 0===f&&e.target){const f=o.clientToLocalCoordinates(this._mainCanvas,e.clientX,e.clientY,this.zoomLevel),B=this.selectHitConnector(e.target,f);null==B||B.dblClick(f,e.target)}else this.setCurrentStencil()}}onPointerMove(e){if(1===this.touchPoints||"touch"!==e.pointerType){if(void 0!==this._currentStencilEditor||this.isDragging){void 0!==this._currentStencilEditor&&"edit"===this._currentStencilEditor.state||e.preventDefault();const f=o.clientToLocalCoordinates(this._mainCanvas,e.clientX,e.clientY,this.zoomLevel);void 0!==this._currentStencilEditor&&this.isDragging&&this._currentStencilEditor.manipulate(f),this._selectedStencilEditors.length>1&&this.isDragging&&this._selectedStencilEditors.forEach((e=>e.manipulate(f)))}void 0!==this._currentConnectorEditor&&this._currentConnectorEditor.manipulate(o.clientToLocalCoordinates(this._mainCanvas,e.clientX,e.clientY,this.zoomLevel))}}onCanvasPointerMove(e){const f=o.clientToLocalCoordinates(this._mainCanvas,e.clientX,e.clientY,this.zoomLevel);if(void 0!==this._currentStencilEditor&&"new"===this._currentStencilEditor.state){void 0===this._objectLayer||this._objectLayer.contains(this._newStencilOutline)||this._objectLayer.appendChild(this._newStencilOutline);const e=this._currentStencilEditor.stencil.defaultSize;o.setAttributes(this._newStencilOutline,[["d",this._currentStencilEditor.stencil.getSelectorPathD(e.width,e.height)]]),this._newStencilOutline.style.transform=`translate(${f.x-e.width/2}px, ${f.y-e.height/2}px)`}else if(this.isDragging&&this.isSelecting){const B=o.clientToLocalCoordinates(this._mainCanvas,this._manipulationStartX,this._manipulationStartY,this.zoomLevel);this._marqueeSelectRect.x=Math.min(f.x,B.x),this._marqueeSelectRect.y=Math.min(f.y,B.y),this._marqueeSelectRect.width=Math.abs(e.clientX-this._manipulationStartX)/this.zoomLevel,this._marqueeSelectRect.height=Math.abs(e.clientY-this._manipulationStartY)/this.zoomLevel,o.setAttributes(this._marqueeSelectOutline,[["x",`${this._marqueeSelectRect.x}`],["y",`${this._marqueeSelectRect.y}`],["width",`${this._marqueeSelectRect.width}`],["height",`${this._marqueeSelectRect.height}`]])}else{const f=this.getHitEditor(e.target);this._currentHitEditor!==f&&(void 0!==this._currentHitEditor&&(this.mode="select","connect"===this._currentHitEditor.state&&this._currentHitEditor.switchConnectModeOff()),void 0!==f&&(f.isSelected||(this.mode="connect",f.switchToConnectMode())),this._currentHitEditor=f)}}removeConnectorFromPort(e,f){if(void 0!==f){const B=f.connectors.indexOf(e);B>-1&&f.connectors.splice(B,1)}}onCanvasPointerUp(e){var f,B;if("connect"===this.mode&&e.target){const f=this.getHitEditor(e.target);if(void 0!==f){const B=f.getTargetPort(e,!1,this.zoomLevel);void 0!==this._currentConnectorEditor&&void 0!==B?"creating"===this._currentConnectorEditor.state?(this.connectionEndPort=B,this._currentConnectorEditor.connector.endStencil=f.stencil,this._currentConnectorEditor.connector.endPort=this.connectionEndPort.port,this._currentConnectorEditor.pointerUp({x:f.stencil.left+this.connectionEndPort.port.x,y:f.stencil.top+this.connectionEndPort.port.y})):"move"===this._currentConnectorEditor.state&&(this._currentConnectorEditor.movingPort===this._currentConnectorEditor.connector.endPort?this._currentConnectorEditor.connector.endPort!==B.port&&(this.removeConnectorFromPort(this._currentConnectorEditor.connector,this._currentConnectorEditor.connector.endPort),this._currentConnectorEditor.connector.endStencil=f.stencil,this._currentConnectorEditor.connector.endPort=B.port):this._currentConnectorEditor.movingPort===this._currentConnectorEditor.connector.startPort&&(this.removeConnectorFromPort(this._currentConnectorEditor.connector,this._currentConnectorEditor.connector.startPort),this._currentConnectorEditor.connector.startStencil=f.stencil,this._currentConnectorEditor.connector.startPort=B.port),this._currentConnectorEditor.pointerUp({x:f.stencil.left+B.port.x,y:f.stencil.top+B.port.y})):void 0!==this._currentConnectorEditor&&"move"===this._currentConnectorEditor.state&&this._currentConnectorEditor.pointerUp({x:0,y:0})}}else if(void 0!==this._currentConnectorEditor&&"move"===this._currentConnectorEditor.state)this._currentConnectorEditor.pointerUp({x:0,y:0});else if(void 0!==this._currentConnectorEditor&&"creating"===this._currentConnectorEditor.state)this.deleteConnector(this._currentConnectorEditor);else if(void 0!==this._currentConnectorEditor&&"move-label"===this._currentConnectorEditor.state)this._currentConnectorEditor.pointerUp({x:0,y:0});else if(this.touchPoints>0&&this.touchPoints--,0===this.touchPoints){const J=o.clientToLocalCoordinates(this._mainCanvas,e.clientX,e.clientY,this.zoomLevel);void 0!==this._currentStencilEditor&&"new"===this._currentStencilEditor.state&&(null===(f=this._objectLayer)||void 0===f?void 0:f.contains(this._newStencilOutline))&&(null===(B=this._objectLayer)||void 0===B||B.removeChild(this._newStencilOutline),this._currentStencilEditor.create(J)),void 0===this._currentConnectorEditor||this.getHitConnector(e.target)||this.deselectCurrentConnector(),void 0===this._currentConnectorEditor||this.getHitConnector(e.target)||this.deselectCurrentConnector()}}onCanvasPointerOut(e){void 0!==this._objectLayer&&this._objectLayer.contains(this._newStencilOutline)&&this._objectLayer.removeChild(this._newStencilOutline)}getHitEditor(e){return this._stencilEditors.find((f=>f.ownsTarget(e)))}getHitConnector(e){return this._connectorEditors.find((f=>f.ownsTarget(e)))}onPointerUp(e){if(this.touchPoints>0&&this.touchPoints--,0===this.touchPoints){const f=o.clientToLocalCoordinates(this._mainCanvas,e.clientX,e.clientY,this.zoomLevel);this.isDragging&&this.isSelecting?(this._objectLayer&&this._objectLayer.contains(this._marqueeSelectOutline)&&this._objectLayer.removeChild(this._marqueeSelectOutline),this.finishMarqueeSelection()):void 0!==this._currentStencilEditor&&"new"!==this._currentStencilEditor.state&&this.isDragging&&this._currentStencilEditor.pointerUp(f)}this.isSelecting=!1,this.isDragging=!1,this.addUndoStep()}onPointerOut(){this.touchPoints>0&&this.touchPoints--}onKeyUp(e){document.activeElement===this&&("Delete"===e.key||"Backspace"===e.key?this.deleteSelected():"C"===e.key.toUpperCase()?"select"===this.mode?this.switchToConnectMode():"connect"===this.mode&&this.switchConnectModeOff():"Escape"===e.key?(this.deselectStencil(),this.deselectCurrentConnector()):"N"===e.key.toUpperCase()&&this.showAddPanel())}createNewStencil(e){if(this.deselectStencil(),this.setCurrentStencil(),void 0!==e){const f=this._stencilEditorSet.stencilSet.getStencilProperties(e);f&&(this.addUndoStep(),this._currentStencilEditor=this.addNewStencil(f.stencilType),this._currentStencilEditor.onStencilCreated=this.stencilCreated,this._mainCanvas&&(this._mainCanvas.style.cursor="move"))}}stencilCreated(e){this.mode="select",this._mainCanvas&&(this._mainCanvas.style.cursor="default"),e.onStencilChanged=this.stencilChanged,this._stencilEditors.push(e),this.selectStencil(e),this.setCurrentStencil(e),this.addUndoStep()}stencilChanged(e){e.stencil.ports.forEach((e=>{e.enabled&&e.connectors.forEach((e=>e.adjust()))}))}connectorCreated(e){var f,B;null===(f=e.connector.startPort)||void 0===f||f.connectors.push(e.connector),null===(B=e.connector.endPort)||void 0===B||B.connectors.push(e.connector),this._connectorEditors.push(e),this.pushToConnectorLayer(e),this.deselectCurrentConnector(),this.addUndoStep()}connectorUpdated(e){var f,B;null===(f=e.connector.startPort)||void 0===f||f.connectors.push(e.connector),null===(B=e.connector.endPort)||void 0===B||B.connectors.push(e.connector),this.pushToConnectorLayer(e),this.deselectCurrentConnector(),this.addUndoStep()}setCurrentStencil(e){this._currentStencilEditor!==e&&void 0!==this._currentStencilEditor&&(this._currentStencilEditor.blur(),this.addToolboxPanels(),this.addToolboxPanels([this._newStencilPanel])),this._currentStencilEditor=e,void 0===this._currentStencilEditor||this._currentStencilEditor.isFocused||("new"!==this._currentStencilEditor.state&&this._currentStencilEditor.focus(),this.addToolboxPanels(this._currentStencilEditor.propertyPanels))}selectStencil(e){0===this._selectedStencilEditors.length&&this.addToolboxPanels(),this._selectedStencilEditors.indexOf(e)<0?(this._selectedStencilEditors.push(e),e.select(),this._selectedStencilEditors.length>1&&this.setCurrentStencil()):this.deselectStencil(e),this._selectedStencilEditors.length>0&&(this.removeToolboxPanels([this._newStencilPanel]),this.addToolboxPanels([this._alignPanel]),1===this._selectedStencilEditors.length?this.addToolboxPanels([this._arrangePanel]):this.removeToolboxPanels([this._arrangePanel]))}deselectStencil(e){if(void 0!==e){const f=this._selectedStencilEditors.indexOf(e);f>-1&&(this._selectedStencilEditors[f].deselect(),this._selectedStencilEditors.splice(f,1),1===this._selectedStencilEditors.length&&this.setCurrentStencil(this._selectedStencilEditors[0]))}else this._selectedStencilEditors.forEach((e=>e.deselect())),this._selectedStencilEditors.splice(0),this.setCurrentStencil()}addNewStencil(e){var f;const B=o.createGroup();null===(f=this._objectLayer)||void 0===f||f.appendChild(B);const J=new(this._stencilEditorSet.getStencilEditor(e))({iid:this.getNewIId(),container:B,overlayContainer:this._overlayContentContainer,settings:this.settings,stencilType:e,language:this.languageManager});return J.container.addEventListener("pointerenter",(()=>{this.dispatchEvent(new CustomEvent("stencilpointerenter",{detail:{diagramEditor:this,stencilEditor:J}}))})),J.container.addEventListener("pointerleave",(()=>{this.dispatchEvent(new CustomEvent("stencilpointerleave",{detail:{diagramEditor:this,stencilEditor:J}}))})),J.container.addEventListener("click",(()=>{this.dispatchEvent(new CustomEvent("stencilclick",{detail:{diagramEditor:this,stencilEditor:J}}))})),J}addNewConnector(e,f){var B,J;const lt=o.createGroup();null!==(B=null==f?void 0:f.appendChild(lt))&&void 0!==B||null===(J=this._objectLayer)||void 0===J||J.appendChild(lt);const Ct=new(this._stencilEditorSet.getConnectorEditor(e))({iid:this.getNewIId(),container:lt,overlayContainer:this._overlayContentContainer,settings:this.settings,language:this.languageManager,connectorType:e});return Ct.container.addEventListener("pointerenter",(()=>{this.dispatchEvent(new CustomEvent("connectorpointerenter",{detail:{diagramEditor:this,connectorEditor:Ct}}))})),Ct.container.addEventListener("pointerleave",(()=>{this.dispatchEvent(new CustomEvent("connectorpointerleave",{detail:{diagramEditor:this,connectorEditor:Ct}}))})),Ct.container.addEventListener("click",(()=>{this.dispatchEvent(new CustomEvent("connectorclick",{detail:{diagramEditor:this,connectorEditor:Ct}}))})),Ct}changeConnectorType(e){if(void 0!==this._currentConnectorEditor&&this._currentConnectorEditor.connector.typeName!==e.typeName){const f=this._currentConnectorEditor.connector.getState();f.typeName=e.typeName,this.deleteConnector(this._currentConnectorEditor);const B=this.restoreConnector(f);B&&this.selectConnector(B)}}finishMarqueeSelection(){this.deselectStencil(),this._stencilEditors.forEach((e=>{e.stencil.left>=this._marqueeSelectRect.x&&e.stencil.top>=this._marqueeSelectRect.y&&e.stencil.right<=this._marqueeSelectRect.right&&e.stencil.bottom<=this._marqueeSelectRect.bottom&&this.selectStencil(e)})),1===this._selectedStencilEditors.length&&(this.setCurrentStencil(this._selectedStencilEditors[0]),void 0!==this._currentStencilEditor&&this._currentStencilEditor.focus())}addEventListener(e,f,B){super.addEventListener(e,f,B)}removeEventListener(e,f,B){super.removeEventListener(e,f,B)}hideToolbarButtons(...e){void 0!==this._toolbar&&e.forEach((e=>{var f;return null===(f=this._toolbar)||void 0===f?void 0:f.hideButtonsByCommand(e)}))}getState(){const e={width:this.documentWidth,height:this.documentHeight,backgroundColor:this.documentBgColor,stencils:[],connectors:[]};return this._stencilEditors.forEach((f=>e.stencils.push(f.stencil.getState()))),this._connectorEditors.forEach((f=>e.connectors.push(f.connector.getState()))),e}restoreConnector(e){const f=this._stencilEditorSet.stencilSet.getConnectorProperties(e.typeName);if(void 0!==f){const B=this._stencilEditors.find((f=>f.stencil.IId===e.startStencilId)),J=this._stencilEditors.find((f=>f.stencil.IId===e.endStencilId));if(B&&J&&e.startPortLocation&&e.endPortLocation){const lt=B.stencil.ports.get(e.startPortLocation),Ct=J.stencil.ports.get(e.endPortLocation);if(lt&&Ct){const vt=this.addNewConnector(f.connectorType,this._connectorLayer);return vt.onConnectorUpdated=this.connectorUpdated,vt.restoreState(e,{startStencil:B.stencil,startPort:lt,endStencil:J.stencil,endPort:Ct}),this._connectorEditors.push(vt),this._iid=Math.max(this._iid,vt.connector.IId),lt.connectors.push(vt.connector),Ct.connectors.push(vt.connector),vt}}}}restoreState(e){var f,B;for(void 0!==e.width&&void 0!==e.height&&this.setDocumentSize(e.width,e.height),void 0!==e.backgroundColor&&this.setDocumentBgColor(e.backgroundColor),this._stencilEditors.splice(0);null===(f=this._objectLayer)||void 0===f?void 0:f.lastChild;)this._objectLayer.removeChild(this._objectLayer.lastChild);for(this._connectorEditors.splice(0);null===(B=this._connectorLayer)||void 0===B?void 0:B.lastChild;)this._connectorLayer.removeChild(this._connectorLayer.lastChild);this._iid=0,void 0!==e.stencils&&e.stencils.length>0&&e.stencils.forEach((e=>{const f=this._stencilEditorSet.stencilSet.getStencilProperties(e.typeName);if(void 0!==f){const B=this.addNewStencil(f.stencilType);B.restoreState(e),this._iid=Math.max(this._iid,B.stencil.IId),B.onStencilChanged=this.stencilChanged,this._stencilEditors.push(B)}})),void 0!==e.connectors&&e.connectors.length>0&&e.connectors.forEach((e=>{this.restoreConnector(e)})),this.dispatchEvent(new CustomEvent("diagramload",{detail:{editor:this}}))}zoom(e){const f=this.zoomSteps.indexOf(this.zoomLevel);0===e||-1===f?this.zoomLevel=1:e>0&&f<this.zoomSteps.length-1?this.zoomLevel=this.zoomSteps[f+1]:e<0&&f>0&&(this.zoomLevel=this.zoomSteps[f-1])}render(e,f,B="image/png",J){return k(this,void 0,void 0,(function*(){if(void 0!==this._mainCanvas){const lt=new X;return lt.imageType=B,lt.imageQuality=J,lt.width=e,lt.height=f,yield lt.rasterize(this._mainCanvas)}}))}get isUndoPossible(){return!(!this.undoRedoManager||!this.undoRedoManager.isUndoPossible)}get isRedoPossible(){return!(!this.undoRedoManager||!this.undoRedoManager.isRedoPossible)}addUndoStep(){if(void 0===this._currentStencilEditor||"edit"!==this._currentStencilEditor.state){const e=this.getState(),f=this.undoRedoManager.getLastUndoStep();!f||f.width===e.width&&f.height===e.height?this.undoRedoManager.addUndoStep(e)&&this.dispatchEvent(new CustomEvent("statechange",{detail:{editor:this}})):(this.undoRedoManager.replaceLastUndoStep(e),this.dispatchEvent(new CustomEvent("statechange",{detail:{editor:this}})))}}undo(){this.addUndoStep(),this.undoStep()}undoStep(){const e=this.undoRedoManager.undo();void 0!==e&&this.restoreState(e)}redo(){this.redoStep()}redoStep(){const e=this.undoRedoManager.redo();void 0!==e&&(this.restoreState(e),this.dispatchEvent(new CustomEvent("statechange",{detail:{editor:this}})))}toggleLogo(){E.isLicensed("MJSDE")?this.removeLogo():this.addLogo()}addLogo(){var e,f;void 0!==this._logoUI&&(null===(e=this._contentContainer)||void 0===e||e.removeChild(this._logoUI)),this._logoUI=document.createElement("div"),this._logoUI.style.display="inline-block",this._logoUI.style.margin="0px",this._logoUI.style.padding="0px",this._logoUI.style.fill="#333333";const B=document.createElement("a");B.href="https://markerjs.com/",B.target="_blank",B.innerHTML=lt,B.title="Powered by marker.js",B.style.display="grid",B.style.alignItems="center",B.style.justifyItems="center",B.style.padding="3px",B.style.width="20px",B.style.height="20px",this._logoUI.appendChild(B),null===(f=this._contentContainer)||void 0===f||f.appendChild(this._logoUI),this._logoUI.style.position="absolute",this._logoUI.style.pointerEvents="all",this.positionLogo()}removeLogo(){this._contentContainer&&void 0!==this._logoUI&&this._contentContainer.contains(this._logoUI)&&this._contentContainer.removeChild(this._logoUI)}positionLogo(){this._logoUI&&this._contentContainer&&(this._logoUI.style.left="20px",this._logoUI.style.top=this._contentContainer.offsetHeight-this._logoUI.clientHeight-20+"px")}alignHorizontally(e){if(this._selectedStencilEditors.length>0)if(this._selectedStencilEditors.length>1)switch(e){case"left":{const e=this._selectedStencilEditors[0].stencil.left;for(let f=1;f<this._selectedStencilEditors.length;f++)this._selectedStencilEditors[f].moveStencilTo(e);break}case"center":{const e=this._selectedStencilEditors[0].stencil.left+this._selectedStencilEditors[0].stencil.width/2;for(let f=1;f<this._selectedStencilEditors.length;f++){const B=e-this._selectedStencilEditors[f].stencil.width/2;this._selectedStencilEditors[f].moveStencilTo(B)}break}case"right":{const e=this._selectedStencilEditors[0].stencil.left+this._selectedStencilEditors[0].stencil.width;for(let f=1;f<this._selectedStencilEditors.length;f++){const B=e-this._selectedStencilEditors[f].stencil.width;this._selectedStencilEditors[f].moveStencilTo(B)}break}}else switch(e){case"left":this._selectedStencilEditors[0].moveStencilTo(this.PAGE_MARGIN);break;case"center":{const e=this.documentWidth/2-this._selectedStencilEditors[0].stencil.width/2;this._selectedStencilEditors[0].moveStencilTo(e);break}case"right":{const e=this.documentWidth-this.PAGE_MARGIN-this._selectedStencilEditors[0].stencil.width;this._selectedStencilEditors[0].moveStencilTo(e);break}}}alignVertically(e){if(this._selectedStencilEditors.length>0)if(this._selectedStencilEditors.length>1)switch(e){case"top":{const e=this._selectedStencilEditors[0].stencil.top;for(let f=1;f<this._selectedStencilEditors.length;f++)this._selectedStencilEditors[f].moveStencilTo(void 0,e);break}case"middle":{const e=this._selectedStencilEditors[0].stencil.top+this._selectedStencilEditors[0].stencil.height/2;for(let f=1;f<this._selectedStencilEditors.length;f++){const B=e-this._selectedStencilEditors[f].stencil.height/2;this._selectedStencilEditors[f].moveStencilTo(void 0,B)}break}case"bottom":{const e=this._selectedStencilEditors[0].stencil.top+this._selectedStencilEditors[0].stencil.height;for(let f=1;f<this._selectedStencilEditors.length;f++){const B=e-this._selectedStencilEditors[f].stencil.height;this._selectedStencilEditors[f].moveStencilTo(void 0,B)}break}}else switch(e){case"top":this._selectedStencilEditors[0].moveStencilTo(void 0,this.PAGE_MARGIN);break;case"middle":{const e=this.documentHeight/2-this._selectedStencilEditors[0].stencil.height/2;this._selectedStencilEditors[0].moveStencilTo(void 0,e);break}case"bottom":{const e=this.documentHeight-this.PAGE_MARGIN-this._selectedStencilEditors[0].stencil.height;this._selectedStencilEditors[0].moveStencilTo(void 0,e);break}}}arrange(e){if(void 0!==this._objectLayer&&void 0!==this._currentStencilEditor){const f=this._stencilEditors.indexOf(this._currentStencilEditor);let B=-1;const J=this._currentStencilEditor.container;for(let e=0;e<this._objectLayer.children.length;e++)if(this._objectLayer.children[e]===J){B=e;break}if(f>-1&&B>-1)switch(e){case"front":f<this._stencilEditors.length-1&&(this._stencilEditors.splice(f,1),this._stencilEditors.push(this._currentStencilEditor)),B<this._objectLayer.children.length-1&&(this._objectLayer.removeChild(J),this._objectLayer.appendChild(J));break;case"forward":f<this._stencilEditors.length-1&&(this._stencilEditors.splice(f,1),f<this._stencilEditors.length-1?this._stencilEditors.splice(f+1,0,this._currentStencilEditor):this._stencilEditors.push(this._currentStencilEditor)),B<this._objectLayer.children.length-1&&(this._objectLayer.removeChild(J),B<this._objectLayer.children.length-1?this._objectLayer.insertBefore(J,this._objectLayer.children[B+1]):this._objectLayer.appendChild(J));break;case"backward":f>0&&(this._stencilEditors.splice(f,1),this._stencilEditors.splice(f-1,0,this._currentStencilEditor)),B>0&&(this._objectLayer.removeChild(J),this._objectLayer.insertBefore(J,this._objectLayer.children[B-1]));break;case"back":f>0&&(this._stencilEditors.splice(f,1),this._stencilEditors.splice(0,0,this._currentStencilEditor)),B>0&&(this._objectLayer.removeChild(J),this._objectLayer.insertBefore(J,this._objectLayer.firstChild))}}}}window&&window.customElements&&void 0===window.customElements.get("mjs-diagram-editor")&&window.customElements.define("mjs-diagram-editor",dt);class gt extends A{constructor(e,f,B){super(e,f,B),this.andgledCorners=!1}}gt.typeName="MindMapConnector";class pt extends c{}pt.typeName="CentralTopicStencil";class ut extends l{constructor(e,f,B){super(e,f,B),this.defaultSize.height=30,this.disablePorts("topleft","topcenter","topright","leftcenter","rightcenter","bottomcenter")}static getPathD(e,f){return`M0,${f} L${e},${f}`}static getThumbnail(e,f){return super.getThumbnail(e,e/5)}getSelectorPathD(e,f){return`M 0 0 \n      H ${e} \n      V ${f} \n      H 0 \n      V 0`}}ut.typeName="ItemStencil";class mt extends l{constructor(e,f,B){super(e,f,B),this.defaultSize.height=40,this.disablePorts("topleft","topcenter","topright","bottomcenter","bottomleft","bottomright")}static getPathD(e,f){const B=10;return`M 10 0 \n      H ${e-B} \n      A 10 10 0 0 1 ${e} 10 \n      V ${f-B} \n      A 10 10 0 0 1 ${e-B} ${f} \n      H 10 \n      A 10 10 0 0 1 0 ${f-B} \n      V 10 \n      A 10 10 0 0 1 10 0 \n      Z`}static getThumbnail(e,f){return super.getThumbnail(e,e/4)}}mt.typeName="SubTopicStencil";const St=new w("mindmap","Mind Map");St.stencilTypes.push({stencilType:pt,displayName:"Central topic"},{stencilType:mt,displayName:"Sub-topic"},{stencilType:ut,displayName:"Item"},{stencilType:u,displayName:"Label"},{stencilType:C,displayName:"Image"}),St.connectorTypes.push({connectorType:gt,displayName:"Mind map connector"});const wt=new N("mindmap",St);wt.displayName="Mind map",wt.defaultStencilEditor=W,wt.addStencilEditor(Y,C),wt.availableConnectorTypes=[gt],wt.defaultConnectorType=gt,wt.newDocumentTemplate={width:640,height:360,stencils:[{color:"#000000",fontFamily:"Helvetica, Arial, sans-serif",padding:5,text:"Central topic",typeName:"CentralTopicStencil",iid:1,left:234.53121948242188,top:137.66664123535156,width:179.33331298828125,height:94.66671752929688,fillColor:"#eeeeee",strokeColor:"black",strokeWidth:1,strokeDasharray:""}],connectors:[]};class At extends d{}At.typeName="DecisionStencil";class bt extends l{constructor(e,f,B){super(e,f,B),this.textBoundingBox=new DOMRect,this.defaultSize={width:150,height:70},this.disablePorts("bottomleft","topleft","bottomright","topright","leftcenter","rightcenter")}static getPathD(e,f){return`M${.2*e},0 L${e},0 L${.8*e},${f} L0,${f} Z`}setTextBoundingBox(){super.setTextBoundingBox();const e=.8*this.width,f=this.height;this.textBoundingBox.x=(this.width-e)/2+this.padding,this.textBoundingBox.y=(this.height-f)/2+this.padding,this.textBoundingBox.width=e-2*this.padding,this.textBoundingBox.height=f-2*this.padding}}bt.typeName="IOStencil",bt.title="Input/Output";class xt extends l{constructor(e,f,B){super(e,f,B),this.disablePorts("topleft","topright","bottomleft","bottomright")}}xt.typeName="ProcessStencil";class yt extends l{constructor(e,f,B){super(e,f,B),this.getPathD=this.getPathD.bind(this),this.textBoundingBox=new DOMRect,this.defaultSize={width:150,height:50},this.disablePorts("bottomleft","topleft","bottomright","topright")}static getPathD(e,f){return`\n      M ${f/2} 0 \n      H ${e-f/2} \n      A ${f/2} ${f/2} 0 1 1 ${e-f/2} ${f}\n      H ${f/2}\n      A ${f/2} ${f/2} 0 0 1 ${f/2} 0\n    `}}yt.typeName="TerminalStencil",yt.title="Terminal";const zt=new w("flowchart","Flow chart");zt.stencilTypes.push({stencilType:xt,displayName:"Process"},{stencilType:At,displayName:"Decision"},{stencilType:bt,displayName:"Input/Output"},{stencilType:yt,displayName:"Terminal"},{stencilType:u,displayName:"Label"},{stencilType:C,displayName:"Image"}),zt.connectorTypes.push({connectorType:x,displayName:"Flowline"},{connectorType:y,displayName:"Flow curve"},{connectorType:S,displayName:"Angled Flowline"});const Ft=new N("flowchart",zt);Ft.displayName="Flowchart",Ft.defaultStencilEditor=W,Ft.addStencilEditor(Y,C),Ft.defaultConnectorEditor=D,Ft.defaultStringSet=new ot([["stencilset-displayname","Flowchart"],["ProcessStencil-displayname","Process"],["DecisionStencil-displayname","Decision"],["IOStencil-displayname","Input/Output"],["TerminalStencil-displayname","Terminal"],["LabelStencil-displayname","Label"],["BitmapImageStencil-displayname","Image"],["ArrowConnector-displayname","Flowline"],["CurvedArrowConnector-displayname","Flow curve"]]),Ft.availableConnectorTypes=[S,x,y],Ft.defaultConnectorType=S,Ft.newDocumentTemplate={width:640,height:360,stencils:[{color:"#000000",fontFamily:"Helvetica, Arial, sans-serif",padding:5,text:"Start",typeName:"TerminalStencil",iid:1,left:234.53121948242188,top:10,width:150,height:50,fillColor:"#eeeeee",strokeColor:"black",strokeWidth:1,strokeDasharray:""}],connectors:[]};class ft extends g{constructor(e,f,B){super(e,f,B),this.defaultSize={width:120,height:120},this.setFillColor("#38bdf8"),this.strokeEditable=!1,this.setStrokeWidth(0)}}ft.typeName="CloudStencil",ft.title="Cloud",ft.DEFAULT_TEXT="Cloud",ft.svgString='<path d="M6.5 20Q4.22 20 2.61 18.43 1 16.85 1 14.58 1 12.63 2.17 11.1 3.35 9.57 5.25 9.15 5.88 6.85 7.75 5.43 9.63 4 12 4 14.93 4 16.96 6.04 19 8.07 19 11 20.73 11.2 21.86 12.5 23 13.78 23 15.5 23 17.38 21.69 18.69 20.38 20 18.5 20M6.5 18H18.5Q19.55 18 20.27 17.27 21 16.55 21 15.5 21 14.45 20.27 13.73 19.55 13 18.5 13H17V11Q17 8.93 15.54 7.46 14.08 6 12 6 9.93 6 8.46 7.46 7 8.93 7 11H6.5Q5.05 11 4.03 12.03 3 13.05 3 14.5 3 15.95 4.03 17 5.05 18 6.5 18M12 12Z" />';class Et extends g{constructor(e,f,B){super(e,f,B),this.defaultSize={width:80,height:80},this.strokeEditable=!1,this.setStrokeWidth(0)}}Et.typeName="DatabaseStencil",Et.title="Database",Et.DEFAULT_TEXT="DB",Et.svgString='<path d="M12 3C7.58 3 4 4.79 4 7V17C4 19.21 7.59 21 12 21S20 19.21 20 17V7C20 4.79 16.42 3 12 3M18 17C18 17.5 15.87 19 12 19S6 17.5 6 17V14.77C7.61 15.55 9.72 16 12 16S16.39 15.55 18 14.77V17M18 12.45C16.7 13.4 14.42 14 12 14C9.58 14 7.3 13.4 6 12.45V9.64C7.47 10.47 9.61 11 12 11C14.39 11 16.53 10.47 18 9.64V12.45M12 9C8.13 9 6 7.5 6 7S8.13 5 12 5C15.87 5 18 6.5 18 7S15.87 9 12 9Z" />';class Bt extends g{constructor(e,f,B){super(e,f,B),this.defaultSize={width:80,height:80},this.strokeEditable=!1,this.setStrokeWidth(0)}}Bt.typeName="DesktopStencil",Bt.title="Desktop PC",Bt.DEFAULT_TEXT="PC",Bt.svgString='<path d="M22,18H17A1,1 0 0,1 16,17V7A1,1 0 0,1 17,6H22A1,1 0 0,1 23,7V17A1,1 0 0,1 22,18M22,8H17V9H22V8M22,10H17V11H22V10M9,15V17H10V18H5V17H6V15H2A1,1 0 0,1 1,14V7A1,1 0 0,1 2,6H13A1,1 0 0,1 14,7V14A1,1 0 0,1 13,15H9M12,8H3V13H12V8Z" />';class _t extends g{constructor(e,f,B){super(e,f,B),this.defaultSize={width:80,height:80},this.strokeEditable=!1,this.setStrokeWidth(0)}}_t.typeName="NotebookStencil",_t.title="Notebook",_t.DEFAULT_TEXT="Notebook",_t.svgString='<path d="M4,6H20V16H4M20,18A2,2 0 0,0 22,16V6C22,4.89 21.1,4 20,4H4C2.89,4 2,4.89 2,6V16A2,2 0 0,0 4,18H0V20H24V18H20Z" />';class kt extends g{constructor(e,f,B){super(e,f,B),this.defaultSize={width:80,height:80},this.strokeEditable=!1,this.setStrokeWidth(0)}}kt.typeName="PrinterStencil",kt.title="Printer",kt.DEFAULT_TEXT="Printer",kt.svgString='<path d="M19 8C20.66 8 22 9.34 22 11V17H18V21H6V17H2V11C2 9.34 3.34 8 5 8H6V3H18V8H19M8 5V8H16V5H8M16 19V15H8V19H16M18 15H20V11C20 10.45 19.55 10 19 10H5C4.45 10 4 10.45 4 11V15H6V13H18V15M19 11.5C19 12.05 18.55 12.5 18 12.5C17.45 12.5 17 12.05 17 11.5C17 10.95 17.45 10.5 18 10.5C18.55 10.5 19 10.95 19 11.5Z" />';class Lt extends g{constructor(e,f,B){super(e,f,B),this.defaultSize={width:80,height:80},this.strokeEditable=!1,this.setStrokeWidth(0)}}Lt.typeName="RouterStencil",Lt.title="Router",Lt.DEFAULT_TEXT="Router",Lt.svgString='<path d="M5 9C3.9 9 3 9.9 3 11V15C3 16.11 3.9 17 5 17H11V19H10C9.45 19 9 19.45 9 20H2V22H9C9 22.55 9.45 23 10 23H14C14.55 23 15 22.55 15 22H22V20H15C15 19.45 14.55 19 14 19H13V17H19C20.11 17 21 16.11 21 15V11C21 9.9 20.11 9 19 9H5M6 12H8V14H6V12M9.5 12H11.5V14H9.5V12M13 12H15V14H13V12Z" />';class Tt extends g{constructor(e,f,B){super(e,f,B),this.defaultSize={width:80,height:80},this.strokeEditable=!1,this.setStrokeWidth(0)}}Tt.typeName="ServerStencil",Tt.title="Server",Tt.DEFAULT_TEXT="Server",Tt.svgString='<path d="M4,1H20A1,1 0 0,1 21,2V6A1,1 0 0,1 20,7H4A1,1 0 0,1 3,6V2A1,1 0 0,1 4,1M4,9H20A1,1 0 0,1 21,10V14A1,1 0 0,1 20,15H4A1,1 0 0,1 3,14V10A1,1 0 0,1 4,9M4,17H20A1,1 0 0,1 21,18V22A1,1 0 0,1 20,23H4A1,1 0 0,1 3,22V18A1,1 0 0,1 4,17M9,5H10V3H9V5M9,13H10V11H9V13M9,21H10V19H9V21M5,3V5H7V3H5M5,11V13H7V11H5M5,19V21H7V19H5Z" />';class Pt extends g{constructor(e,f,B){super(e,f,B),this.defaultSize={width:80,height:80},this.strokeEditable=!1,this.setStrokeWidth(0)}}Pt.typeName="WiFiRouterStencil",Pt.title="WiFi Router",Pt.DEFAULT_TEXT="WiFi Router",Pt.svgString='<path d="M20.2,5.9L21,5.1C19.6,3.7 17.8,3 16,3C14.2,3 12.4,3.7 11,5.1L11.8,5.9C13,4.8 14.5,4.2 16,4.2C17.5,4.2 19,4.8 20.2,5.9M19.3,6.7C18.4,5.8 17.2,5.3 16,5.3C14.8,5.3 13.6,5.8 12.7,6.7L13.5,7.5C14.2,6.8 15.1,6.5 16,6.5C16.9,6.5 17.8,6.8 18.5,7.5L19.3,6.7M19,13H17V9H15V13H5A2,2 0 0,0 3,15V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V15A2,2 0 0,0 19,13M8,18H6V16H8V18M11.5,18H9.5V16H11.5V18M15,18H13V16H15V18Z" />';class Mt extends g{constructor(e,f,B){super(e,f,B),this.defaultSize={width:80,height:80},this.strokeEditable=!1,this.setStrokeWidth(0)}}Mt.typeName="CameraStencil",Mt.title="Camera",Mt.DEFAULT_TEXT="Camera",Mt.svgString='<path d="M12,2A7,7 0 0,1 19,9A7,7 0 0,1 12,16A7,7 0 0,1 5,9A7,7 0 0,1 12,2M12,4A5,5 0 0,0 7,9A5,5 0 0,0 12,14A5,5 0 0,0 17,9A5,5 0 0,0 12,4M12,6A3,3 0 0,1 15,9A3,3 0 0,1 12,12A3,3 0 0,1 9,9A3,3 0 0,1 12,6M6,22A2,2 0 0,1 4,20C4,19.62 4.1,19.27 4.29,18.97L6.11,15.81C7.69,17.17 9.75,18 12,18C14.25,18 16.31,17.17 17.89,15.81L19.71,18.97C19.9,19.27 20,19.62 20,20A2,2 0 0,1 18,22H6Z" />';class Ht extends g{constructor(e,f,B){super(e,f,B),this.defaultSize={width:80,height:80},this.strokeEditable=!1,this.setStrokeWidth(0)}}Ht.typeName="SmartphoneStencil",Ht.title="Smartphone",Ht.DEFAULT_TEXT="Phone",Ht.svgString='<path d="M17,19H7V5H17M17,1H7C5.89,1 5,1.89 5,3V21A2,2 0 0,0 7,23H17A2,2 0 0,0 19,21V3C19,1.89 18.1,1 17,1Z" />';class Vt extends g{constructor(e,f,B){super(e,f,B),this.defaultSize={width:80,height:80},this.strokeEditable=!1,this.setStrokeWidth(0)}}Vt.typeName="TabletStencil",Vt.title="Tablet",Vt.DEFAULT_TEXT="Tablet",Vt.svgString='<path d="M19,18H5V6H19M21,4H3C1.89,4 1,4.89 1,6V18A2,2 0 0,0 3,20H21A2,2 0 0,0 23,18V6C23,4.89 22.1,4 21,4Z" />';class It extends g{constructor(e,f,B){super(e,f,B),this.defaultSize={width:80,height:80},this.strokeEditable=!1,this.setStrokeWidth(0)}}It.typeName="TVStencil",It.title="TV",It.DEFAULT_TEXT="TV",It.svgString='<path d="M21,17H3V5H21M21,3H3A2,2 0 0,0 1,5V17A2,2 0 0,0 3,19H8V21H16V19H21A2,2 0 0,0 23,17V5A2,2 0 0,0 21,3Z" />';class Dt extends g{constructor(e,f,B){super(e,f,B),this.defaultSize={width:80,height:80},this.strokeEditable=!1,this.setStrokeWidth(0)}}Dt.typeName="UserStencil",Dt.title="User",Dt.DEFAULT_TEXT="User",Dt.svgString='<path d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,6A2,2 0 0,0 10,8A2,2 0 0,0 12,10A2,2 0 0,0 14,8A2,2 0 0,0 12,6M12,13C14.67,13 20,14.33 20,17V20H4V17C4,14.33 9.33,13 12,13M12,14.9C9.03,14.9 5.9,16.36 5.9,17V18.1H18.1V17C18.1,16.36 14.97,14.9 12,14.9Z" />';const Qt=new w("network","Network diagram");Qt.stencilTypes.push({stencilType:_t,displayName:"Notebook PC"},{stencilType:Bt,displayName:"Desktop PC"},{stencilType:Ht,displayName:"Phone"},{stencilType:Vt,displayName:"Tablet"},{stencilType:It,displayName:"TV"},{stencilType:Tt,displayName:"Server"},{stencilType:Lt,displayName:"Router"},{stencilType:Pt,displayName:"WiFi Router"},{stencilType:ft,displayName:"Cloud"},{stencilType:Et,displayName:"Database"},{stencilType:kt,displayName:"Printer"},{stencilType:Dt,displayName:"User"},{stencilType:Mt,displayName:"Camera"},{stencilType:u,displayName:"Label"},{stencilType:l,displayName:"Text box"},{stencilType:C,displayName:"Custom image"}),Qt.connectorTypes.push({connectorType:x,displayName:"Arrow"},{connectorType:y,displayName:"Curved arrow"},{connectorType:S,displayName:"Angled arrow"});const Wt=new N("network",Qt);Wt.displayName="Network Diagram",Wt.defaultStencilEditor=O,Wt.addStencilEditor(W,u,l),Wt.addStencilEditor(Y,C),Wt.availableConnectorTypes=[x,y,S],Wt.defaultConnectorType=x,Wt.newDocumentTemplate={width:640,height:360,stencils:[],connectors:[]};class Ut extends m{constructor(e,f,B){super(e,f,B),this.defaultSize={width:200,height:80},this.labelLocation="right",this._imageSrc="data:image/png;base64,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"}static getThumbnail(e,f){const B=.9*e,J=Math.min(.9*f,.4*B),lt=o.createSvgFromString('<path d="M18,15H16V17H18M18,11H16V13H18M20,19H12V17H14V15H12V13H14V11H12V9H20M10,7H8V5H10M10,11H8V9H10M10,15H8V13H10M10,19H8V17H10M6,7H4V5H6M6,11H4V9H6M6,15H4V13H6M6,19H4V17H6M12,7V3H2V21H22V7H12Z" />');return o.setAttributes(lt,[["viewBox","0 0 24 24"],["width",`${B}px`],["height",`${J}px`]]),lt}}Ut.typeName="OrganizationStencil",Ut.title="Organization",Ut.DEFAULT_TEXT="Organization";class Nt extends m{constructor(e,f,B){super(e,f,B),this.defaultSize={width:200,height:80},this.labelLocation="right",this._imageSrc="data:image/png;base64,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"}static getThumbnail(e,f){const B=.9*e,J=Math.min(.9*f,.4*B),lt=o.createSvgFromString('<path d="M12,5.5A3.5,3.5 0 0,1 15.5,9A3.5,3.5 0 0,1 12,12.5A3.5,3.5 0 0,1 8.5,9A3.5,3.5 0 0,1 12,5.5M5,8C5.56,8 6.08,8.15 6.53,8.42C6.38,9.85 6.8,11.27 7.66,12.38C7.16,13.34 6.16,14 5,14A3,3 0 0,1 2,11A3,3 0 0,1 5,8M19,8A3,3 0 0,1 22,11A3,3 0 0,1 19,14C17.84,14 16.84,13.34 16.34,12.38C17.2,11.27 17.62,9.85 17.47,8.42C17.92,8.15 18.44,8 19,8M5.5,18.25C5.5,16.18 8.41,14.5 12,14.5C15.59,14.5 18.5,16.18 18.5,18.25V20H5.5V18.25M0,20V18.5C0,17.11 1.89,15.94 4.45,15.6C3.86,16.28 3.5,17.22 3.5,18.25V20H0M24,20H20.5V18.25C20.5,17.22 20.14,16.28 19.55,15.6C22.11,15.94 24,17.11 24,18.5V20Z" />');return o.setAttributes(lt,[["viewBox","0 0 24 24"],["width",`${B}px`],["height",`${J}px`]]),lt}}Nt.typeName="TeamStencil",Nt.title="Team",Nt.DEFAULT_TEXT="Team";class jt extends m{constructor(e,f,B){super(e,f,B),this.defaultSize={width:200,height:80},this.labelLocation="right",this._imageSrc="data:image/png;base64,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"}static getThumbnail(e,f){const B=.9*e,J=Math.min(.9*f,.4*B),lt=o.createSvgFromString('<path d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z" />');return o.setAttributes(lt,[["viewBox","0 0 24 24"],["width",`${B}px`],["height",`${J}px`]]),lt}}jt.typeName="PersonStencil",jt.title="Person",jt.DEFAULT_TEXT="Person";const Ot=new w("orgchart","Org chart");Ot.stencilTypes.push({stencilType:Ut,displayName:"Organization"},{stencilType:Nt,displayName:"Team"},{stencilType:jt,displayName:"Person"},{stencilType:l,displayName:"Text box"},{stencilType:u,displayName:"Label"},{stencilType:m,displayName:"Image"}),Ot.connectorTypes.push({connectorType:v,displayName:"Straight connector"},{connectorType:A,displayName:"Curved connector"},{connectorType:b,displayName:"Angled connector"});const Gt=new N("orgchart",Ot);Gt.displayName="Org. chart",Gt.defaultStencilEditor=Y,Gt.addStencilEditor(W,u,l),Gt.availableConnectorTypes=[b,v,A],Gt.defaultConnectorType=b,Gt.newDocumentTemplate={width:640,height:360,stencils:[],connectors:[]};export{E as Activator,$ as AlignPanel,S as AngledArrowConnector,b as AngledConnector,ct as ArrangePanel,x as ArrowConnector,M as ArrowTypePanel,C as BitmapImageStencil,Mt as CameraStencil,pt as CentralTopicStencil,ft as CloudStencil,et as Color,P as ColorPickerPanel,it as ColorSet,v as ConnectorBase,D as ConnectorBaseEditor,Z as ConnectorTypePanel,y as CurvedArrowConnector,A as CurvedConnector,m as CustomImageStencil,Et as DatabaseStencil,At as DecisionStencil,Bt as DesktopStencil,dt as DiagramEditor,s as DiagramSettings,_ as DiagramViewer,d as DiamondStencil,tt as DimensionsPanel,nt as EditorSettings,c as EllipseStencil,st as FontFamily,j as FontPanel,bt as IOStencil,g as ImageStencil,O as ImageStencilEditor,ut as ItemStencil,u as LabelStencil,rt as LangStringSet,ht as Language,p as LightbulbIconStencil,I as LineStylePanel,gt as MindMapConnector,at as ModuleStringSet,q as NewStencilPanel,_t as NotebookStencil,Ut as OrganizationStencil,jt as PersonStencil,n as Port,z as PortConnector,kt as PrinterStencil,xt as ProcessStencil,T as PropertyPanelBase,l as RectangleTextStencil,L as ResizeGrip,Lt as RouterStencil,Tt as ServerStencil,F as ShapePropertiesPanel,Ht as SmartphoneStencil,r as StencilBase,U as StencilBaseEditor,N as StencilEditorSet,w as StencilSet,ot as StringSet,mt as SubTopicStencil,o as SvgHelper,It as TVStencil,Vt as TabletStencil,Nt as TeamStencil,yt as TerminalStencil,a as TextBlock,H as TextBlockEditor,Q as TextPropertiesPanel,h as TextStencil,W as TextStencilEditor,Dt as UserStencil,Pt as WiFiRouterStencil,Ct as basicStencilEditorSet,J as basicStencilSet,Ft as flowchartStencilEditorSet,zt as flowchartStencilSet,wt as mindMapStencilEditorSet,St as mindMapStencilSet,Wt as networkStencilEditorSet,Qt as networkStencilSet,Gt as orgchartStencilEditorSet,Ot as orgchartStencilSet};

