// @markerjs/mjs-toolbar@0.3.0 downloaded from https://ga.jspm.io/npm:@markerjs/mjs-toolbar@0.3.0/mjs-toolbar.esm.js

class t extends HTMLElement{constructor(){super(),this.left=20,this.top=300,this._minWidth=200,this._minHeight=60,this._width=400,this._height=80,this.prevX=0,this.prevY=0,this.isAttached=!0,this.isDragging=!1,this.isResizing=!1,this.attachShadow({mode:"open"}),this._panel=document.createElement("div"),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.addResizeGrip=this.addResizeGrip.bind(this)}get minWidth(){return this._minWidth}set minWidth(o){this._minWidth=o}get minHeight(){return this._minHeight}set minHeight(o){this._minHeight=o}get width(){return this._width}set width(o){this._width=o}get height(){return this._height}set height(o){this._height=o}setup(){var o,h;const r=document.createElement("style");r.innerHTML="\n      div.toolbar {\n        border-radius: 10px;\n      }\n      \n      button.toolbar-button {\n        background-color: #333;\n        color: #eee;\n        width: 48px;\n        height: 48px;\n        display: block;\n      }\n\n      .content-block {\n        margin: 5px;\n      }\n      .content-block h2 {\n        font-size: 1.3rem;\n      }\n    ",null===(o=this.shadowRoot)||void 0===o||o.appendChild(r),this.style.display="grid",this.style.position="relative",this.style.overflow="hidden",this._panel.setAttribute("part","panel"),null===(h=this.shadowRoot)||void 0===h||h.appendChild(this._panel)}connectedCallback(){this.setup(),this.addResizeGrip(),this.attachEvents(),this.setAttribute("exportparts","panel, toolbar, toolbar-block, button: toolbar-button")}disconnectedCallback(){this.detachEvents()}attachEvents(){this.addEventListener("pointerdown",this.onPointerDown),window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp)}detachEvents(){this.removeEventListener("pointerdown",this.onPointerDown)}addResizeGrip(){this.resizeGrip=document.createElement("div"),this.isAttached?this.resizeGrip.style.display="none":this.resizeGrip.style.display="flex",this.resizeGrip.style.width="24px",this.resizeGrip.style.height="24px",this.resizeGrip.style.color="white",this.resizeGrip.style.position="absolute",this.resizeGrip.style.right="0px",this.resizeGrip.style.bottom="0px",this.resizeGrip.style.zIndex="1000",this.resizeGrip.style.cursor="nwse-resize",this.resizeGrip.innerHTML='<svg style="width:24px;height:24px" viewBox="0 0 24 24">\n      <path fill="currentColor" d="M22,22H20V20H22V22M22,18H20V16H22V18M18,22H16V20H18V22M18,18H16V16H18V18M14,22H12V20H14V22M22,14H20V12H22V14Z" />\n    </svg>',this.resizeGrip.addEventListener("pointerdown",this.onPointerDown),this._panel.appendChild(this.resizeGrip)}onPointerDown(o){var h;this.isAttached||(this.prevX=o.clientX,this.prevY=o.clientY,o.target===this.resizeGrip||(null===(h=this.resizeGrip)||void 0===h?void 0:h.contains(o.target))?(this.isResizing=!0,o.cancelBubble=!0):(this.isDragging=!0,o.cancelBubble=!0),o.preventDefault())}onPointerMove(o){if(this.isDragging||this.isResizing){const h=o.clientX-this.prevX,r=o.clientY-this.prevY;this.isDragging?(this.left+=h,this.top+=r):this.isResizing&&(this._width=Math.max(this._width+h,this._minWidth),this._height=Math.max(this._height+r,this._minHeight)),this.prevX=o.clientX,this.prevY=o.clientY,this.positionPanel(),o.preventDefault(),o.cancelBubble=!0}}onPointerUp(o){this.isAttached||(this.isDragging=!1,this.isResizing=!1,o.preventDefault())}showResizeGrip(){this.resizeGrip&&(this.resizeGrip.style.display="flex")}hideResizeGrip(){this.resizeGrip&&(this.resizeGrip.style.display="none")}attach(){this.style.position="relative",this.style.left="",this.style.top="",this.style.width="",this.style.height="",this.hideResizeGrip(),this.isAttached=!0}detach(){this.style.position="absolute",this.isAttached=!1,this.showResizeGrip(),this.positionPanel()}positionPanel(){this.style.top=`${this.top}px`,this.style.left=`${this.left}px`,this.style.width=`${this._width}px`,this.style.height=`${this._height}px`}appendToolbar(o){this._panel.appendChild(o)}appendChild(o){return this._panel.appendChild(o),o}clear(){this._panel.innerHTML=""}}class e extends HTMLElement{constructor(){super(),this._blocks=[],this._container=document.createElement("div"),this._container.className="toolbar",this._container.style.display="flex",this._container.setAttribute("part","toolbar"),this.appendChild(this._container),this.getButtonsByCommand=this.getButtonsByCommand.bind(this)}appendBlock(o){this._blocks.push(o),this._container.appendChild(o),o.addEventListener("buttonclick",(o=>{this.dispatchEvent(new CustomEvent("buttonclick",{detail:{button:o.detail.button}}))}))}getButtonsByCommand(o){const h=[];return this._blocks.forEach((r=>{h.push(...r.getButtonsByCommand(o))})),h}hideButtonsByCommand(o){this.getButtonsByCommand(o).forEach((o=>o.style.display="none"))}showButtonsByCommand(o){this.getButtonsByCommand(o).forEach((o=>o.style.display=""))}addEventListener(o,h,r){super.addEventListener(o,h,r)}}class i extends HTMLElement{constructor(){super(),this._buttons=[],this._container=document.createElement("div"),this._container.className="toolbar-block",this._container.style.display="flex",this._container.setAttribute("part","toolbar-block"),this.appendChild(this._container)}appendButton(o){this._buttons.push(o),this._container.appendChild(o),o.addEventListener("buttonclick",(o=>{this.dispatchEvent(new CustomEvent("buttonclick",{detail:{button:o.detail.button}}))}))}getButtonsByCommand(o){return this._buttons.filter((h=>h.command===o))}addEventListener(o,h,r){super.addEventListener(o,h,r)}}class s extends HTMLElement{constructor(o){var h;super(),this.icon=o.icon,this.text=o.text,this._command=o.command,this._button=document.createElement("button"),this._button.className="toolbar-button",void 0!==this.icon?(this.icon instanceof HTMLImageElement?this._button.appendChild(this.icon):this._button.innerHTML=this.icon,this._button.title=null!==(h=o.text)&&void 0!==h?h:""):void 0!==this.text&&(this._button.textContent=this.text),this._button.style.display="flex",this._button.style.alignItems="center",this._button.setAttribute("part","button"),this._button.addEventListener("click",(()=>{this.dispatchEvent(new CustomEvent("buttonclick",{detail:{button:this}}))})),this.appendChild(this._button)}get command(){return this._command}addEventListener(o,h,r){super.addEventListener(o,h,r)}}class n extends HTMLElement{constructor(){super(),this._container=document.createElement("div"),this._container.className="content-block",this._container.style.display="flex",this._container.style.flexDirection="column",this._container.setAttribute("part","content-block"),super.appendChild(this._container),this._titleElement=document.createElement("h2"),this._titleElement.setAttribute("part","content-block-title"),this._titleElement.innerText=this.title,this._container.appendChild(this._titleElement),this._contentArea=document.createElement("div"),this._contentArea.setAttribute("part","content-block-body"),this._container.appendChild(this._contentArea)}get title(){var o;return null!==(o=this.getAttribute("title"))&&void 0!==o?o:""}set title(o){this.setAttribute("title",o),this._titleElement.innerText=o}appendChild(o){return this._contentArea.appendChild(o)}}window&&window.customElements&&void 0===window.customElements.get("mjstb-panel")&&(window.customElements.define("mjstb-panel",t),window.customElements.define("mjstb-toolbar",e),window.customElements.define("mjstb-toolbar-block",i),window.customElements.define("mjstb-button",s),window.customElements.define("mjstb-content-block",n));export{s as Button,n as ContentBlock,t as Panel,e as Toolbar,i as ToolbarBlock};

